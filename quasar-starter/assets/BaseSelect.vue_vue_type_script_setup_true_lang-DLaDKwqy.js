import{l as N,am as z,u as E,H as O,an as P,r as R,aP as U,c as Z,m as t,n as o,bl as H,O as y,J as s,bm as J,bn as W,w as l,x as d,T as u,L as c,p as B,aZ as X,aA as p,M as b,az as Y,a1 as C,bo as j,bp as G,v as S,Y as k,Z as w,U as L,ao as K,bf as x,R as Q,W as F}from"./index-D2_s7zbP.js";import{u as _}from"./useValidation-Ch6c2l-f.js";import{_ as ee}from"./SkeletonItem.vue_vue_type_script_setup_true_lang-G2xTrWP4.js";import{B as h}from"./BaseAvatar-Dd0BukBT.js";const te=N({__name:"BaseSelect",props:z({items:{},label:{},optionValue:{default:"value"},optionLabel:{default:"label"},readonly:{type:Boolean,default:!1},dense:{type:Boolean,default:!0},outlined:{type:Boolean,default:!0},filled:{type:Boolean},canFilter:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},required:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},useChips:{type:Boolean,default:!1},icon:{},loading:{type:Boolean,default:!1},inputDebounce:{default:0},lazy:{type:Boolean,default:!1},noOptionsText:{},lazyLoading:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:z(["on-filter","on-scroll"],["update:modelValue"]),setup(r,{emit:I}){const{requiredSelect:M}=_(),g=I,{t:V}=E(),{isDark:T}=O(),m=P(r,"modelValue"),f=R([...r.items]);U(()=>{f.value=r.items});const v=Z(()=>{if(!(r.multiple||!m.value))return r.items.find(e=>e.value==m.value)}),$=(e,i)=>{if(r.lazy)q(e,i);else{if(e===""){i(()=>{f.value=r.items});return}i(()=>{const a=e.toLowerCase();f.value=r.items.filter(n=>n.label&&n.label.toLowerCase().includes(a))})}},q=(e,i)=>{if(e===""){i(()=>{f.value=r.items});return}g("on-filter",e,i)},A=({to:e,ref:i})=>{if(!r.lazy)return;const a=f.value.length-1;r.loading!==!0&&e===a&&g("on-scroll",e,i)};return(e,i)=>e.loading?(o(),t(ee,{key:0,show:"",items:1,"show-header":!1})):(o(),t(H,y({key:1},e.$attrs,{modelValue:m.value,"onUpdate:modelValue":i[1]||(i[1]=a=>m.value=a),label:e.label,dense:e.dense,outlined:e.outlined,filled:e.filled,"option-value":e.optionValue,"option-label":e.optionLabel,loading:e.lazyLoading,"ottom-slots":"","emit-value":"","map-options":"","use-chips":e.useChips,multiple:e.multiple,readonly:e.readonly,"use-input":e.canFilter,options:f.value,"input-debounce":e.inputDebounce,rules:[e.required?s(M):{}],"dropdown-icon":s(J),behavior:"menu",onFilter:$,onVirtualScroll:A}),W({prepend:l(()=>[S(e.$slots,"prepend",{},()=>[v.value!==void 0?(o(),Q(F,{key:0},[v.value.avatar?(o(),t(h,B(y({key:0},{...v.value.avatar})),null,16)):v.value.icon?(o(),t(p,{key:1,name:v.value.icon},null,8,["name"])):u("",!0)],64)):e.icon?(o(),t(p,{key:1,name:e.icon},null,8,["name"])):u("",!0)])]),hint:l(()=>[e.multiple?(o(),Q(F,{key:0},[c(b(s(V)("base.canChooseMoreThen1")),1)],64)):u("",!0)]),option:l(({itemProps:a,opt:n,selected:D})=>[d(w,y(a,{dense:""}),{default:l(()=>[n.avatar||n.icon?(o(),t(k,{key:0,avatar:""},{default:l(()=>[n.avatar?(o(),t(h,B(y({key:0},{...n.avatar})),null,16)):n.icon?(o(),t(p,{key:1,name:n.icon},null,8,["name"])):u("",!0)]),_:2},1024)):u("",!0),d(k,null,{default:l(()=>[d(L,null,{default:l(()=>[c(b(n.label),1)]),_:2},1024),n.description?(o(),t(L,{key:0,caption:""},{default:l(()=>[c(b(n.description),1)]),_:2},1024)):u("",!0)]),_:2},1024),D?(o(),t(k,{key:1,side:""},{default:l(()=>[d(p,{color:"primary",name:s(K)},null,8,["name"])]),_:1})):u("",!0)]),_:2},1040),n?.border?(o(),t(x,{key:0})):u("",!0)]),"no-option":l(()=>[d(w,{dense:""},{default:l(()=>[d(k,{class:"text-italic text-grey"},{default:l(()=>[c(b(e.noOptionsText||s(V)("error.dataNotfound")),1)]),_:1})]),_:1})]),after:l(()=>[S(e.$slots,"after")]),_:2},[e.multiple?{name:"selected-item",fn:l(a=>[d(j,{square:"","icon-remove":s(C),removable:e.clearable,style:Y({backgroundColor:s(T)?"var(--color-zinc-700)":"var(--color-zinc-100)"}),onRemove:n=>a.removeAtIndex(a.index)},{default:l(()=>[a.opt?.avatar?(o(),t(h,B(y({key:0},{...a.opt.avatar,size:a.opt.avatar?.size||"20px"})),null,16)):a.opt?.icon?(o(),t(X,{key:1,color:"primary","text-color":"white"},{default:l(()=>[d(p,{name:a.opt.icon},null,8,["name"])]),_:2},1024)):u("",!0),c(" "+b(a.opt.label),1)]),_:2},1032,["icon-remove","removable","style","onRemove"])]),key:"0"}:void 0,e.clearable?{name:"append",fn:l(()=>[m.value?(o(),t(p,{key:0,class:"cursor-pointer",name:s(C),onClick:i[0]||(i[0]=G(a=>e.multiple?m.value=[]:m.value=null,["stop","prevent"]))},null,8,["name"])):u("",!0)]),key:"1"}:void 0]),1040,["modelValue","label","dense","outlined","filled","option-value","option-label","loading","use-chips","multiple","readonly","use-input","options","input-debounce","rules","dropdown-icon"]))}});export{te as _};
