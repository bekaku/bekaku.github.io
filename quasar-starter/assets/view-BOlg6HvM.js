const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BaseResult-DyqMUy14.js","assets/BaseResult.vue_vue_type_script_setup_true_lang-BQdvhquR.js","assets/index-NsS699ic.js","assets/index-Fr33gqm_.css"])))=>i.map(i=>d[i]);
import{da as de,l as re,u as ue,a as ce,r as D,o as me,c as V,m as f,n as u,w as n,x as e,J as l,bs as q,t as _,aD as I,aw as g,bf as A,L as i,z as pe,M as r,aB as N,bk as fe,aH as w,Q as _e,aL as R,bg as z,$ as L,av as c,ai as h,a_ as C,b8 as B,at as S,au as m,b9 as E,aC as ve,bq as Pe,ag as be,a7 as ke,R as ye,a2 as Ve,aK as ge}from"./index-NsS699ic.js";import{u as Ae,_ as we}from"./useCrudForm-zQ_dR6-i.js";import{u as Le}from"./useAppMeta-BnJy7cDZ.js";import{u as he}from"./useValidation-DTqByABy.js";import{u as Ce}from"./useAxios-DXOj_sxf.js";import{_ as M}from"./BaseToggle.vue_vue_type_script_setup_true_lang-KRu0Qu-l.js";import"./BaseButton-CNa-6ezi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-meta-CnOYxtXy.js";const Be=()=>(Ce(),{findAll:async v=>new Promise(k=>{setTimeout(()=>{k(de)},500)}),userAcl:async(v=0)=>new Promise(k=>{setTimeout(()=>{k(null)},500)}),findAllBackendPermission:async()=>new Promise(v=>{setTimeout(()=>{v(null)},500)}),findAllFrontendPermission:async()=>new Promise(v=>{setTimeout(()=>{v(null)},500)})}),Se={class:"row"},Ee={class:"col-12 q-pa-md"},Qe={class:"col-12 col-md-6 q-pa-md"},xe={class:"col-12 col-md-6 q-pa-md"},Te={class:"row"},De={class:"col-12 col-md-6"},Fe={class:"q-px-md"},Oe={class:"col-12 col-md-6"},Ue={class:"q-px-md"},Je=re({__name:"view",setup($){const T=ve(()=>ge(()=>import("./BaseResult-DyqMUy14.js"),__vite__mapDeps([0,1,2,3]))),{t:d}=ue(),{required:F}=he(),{appLoading:v}=ce(),{findAllBackendPermission:k,findAllFrontendPermission:G}=Be(),b=D([]),Q=D(""),x=D(!1),H={id:null,name:"",nameEn:null,active:!0,frontEnd:!1,companySelected:0,selectdPermissions:[]},{crudAction:O,onBack:J,loading:U,onSubmit:K,crudEntity:o,onDelete:X,preFectData:j,crudName:W}=Ae({crudName:"role",apiEndpoint:"/api",fectchDataOnLoad:!1,backToPreviousPath:!0},H);v(),Le({additionalTitle:d("crudAction."+O.value)}),me(()=>{Y()});const Y=async()=>{const s=await k();s&&(b.value=s);const a=await G();a&&b.value.push(...a),await j(),v(!1)},y=V(()=>{const s=b.value,a=Q.value?Q.value.toLowerCase().trim():null;return a?s.filter(t=>t.description&&t.description.toString().toLowerCase().includes(a)):s}),Z=V(()=>y.value.filter(s=>s.operationType===1&&!s.frontEnd)),ee=V(()=>y.value.filter(s=>s.operationType===2&&!s.frontEnd)),le=V(()=>y.value.filter(s=>s.operationType===3&&!s.frontEnd)),ne=V(()=>y.value.filter(s=>s.frontEnd)),te=s=>{const a=b.value.find(t=>t.id===s);return a&&a.description?a.description:"unknown"},ae=s=>{const a=b.value.find(t=>t.id===s);return a&&a.code?a.code:"unknown"},se=s=>{o.value&&o.value.selectdPermissions&&o.value.selectdPermissions.splice(s,1)},oe=()=>{ie(x.value)},ie=s=>{if(o.value.selectdPermissions=[],s)for(let a=0;a<b.value.length;a++){const t=b.value[a];t&&o.value.selectdPermissions.push(t.id)}};return(s,a)=>(u(),f(Ve,{padding:""},{default:n(()=>[e(we,{icon:l(q),title:l(d)("model_role"),"crud-action":l(O),"crud-name":l(W),loading:l(U),onOnBack:l(J),onOnSubmit:l(K),onOnDelete:l(X)},{crudFromContent:n(()=>[_("div",Se,[_("div",Ee,[e(I,{readonly:l(U),outlined:"",counter:"",maxlength:"125",modelValue:l(o).name,"onUpdate:modelValue":a[0]||(a[0]=t=>l(o).name=t),label:l(d)("model_role_name"),rules:[l(F)]},{prepend:n(()=>[e(g,{name:l(q)},null,8,["name"])]),_:1},8,["readonly","modelValue","label","rules"])]),_("div",Qe,[e(M,{label:l(d)("base.enable"),modelValue:l(o).active,"onUpdate:modelValue":a[1]||(a[1]=t=>l(o).active=t)},null,8,["label","modelValue"])]),_("div",xe,[e(M,{label:l(d)("model_permission_frontEnd"),modelValue:l(o).frontEnd,"onUpdate:modelValue":a[2]||(a[2]=t=>l(o).frontEnd=t)},null,8,["label","modelValue"])])]),e(A),_("div",Te,[_("div",De,[_("div",Fe,[e(g,{name:l(pe),size:"sm",color:"negative"},null,8,["name"]),i(" "+r(l(d)("model_permission")),1)]),e(N,null,{default:n(()=>[e(I,{rounded:"",filled:"",outlined:"",modelValue:Q.value,"onUpdate:modelValue":a[4]||(a[4]=t=>Q.value=t),label:l(d)("base.search")},{prepend:n(()=>[e(w,{modelValue:x.value,"onUpdate:modelValue":a[3]||(a[3]=t=>x.value=t),onClick:oe},{default:n(()=>[e(_e,null,{default:n(()=>[i(r(x.value?l(d)("base.deselectAll"):l(d)("base.selectAll")),1)]),_:1})]),_:1},8,["modelValue"])]),append:n(()=>[e(g,{name:l(fe)},null,8,["name"])]),_:1},8,["modelValue","label"]),e(R,{style:{height:"450px"}},{default:n(()=>[y.value.length>0?(u(),f(z,{key:0,dense:""},{default:n(()=>[e(c,{header:""},{default:n(()=>[i(r(l(d)("crudPermission")),1)]),_:1}),e(A,{spaced:""}),(u(!0),L(h,null,C(Z.value,(t,p)=>B((u(),f(S,{key:p,tag:"label"},{default:n(()=>[e(m,{avatar:""},{default:n(()=>[e(w,{modelValue:l(o).selectdPermissions,"onUpdate:modelValue":a[5]||(a[5]=P=>l(o).selectdPermissions=P),val:t.id},null,8,["modelValue","val"])]),_:2},1024),e(m,null,{default:n(()=>[e(c,null,{default:n(()=>[i(r(t.description?t.description:"unknown"),1)]),_:2},1024),e(c,{caption:""},{default:n(()=>[i(r(t.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[E]])),128)),e(c,{header:""},{default:n(()=>[i(r(l(d)("reportPermission")),1)]),_:1}),e(A,{spaced:""}),(u(!0),L(h,null,C(ee.value,(t,p)=>B((u(),f(S,{key:p,tag:"label"},{default:n(()=>[e(m,{avatar:""},{default:n(()=>[e(w,{modelValue:l(o).selectdPermissions,"onUpdate:modelValue":a[6]||(a[6]=P=>l(o).selectdPermissions=P),val:t.id},null,8,["modelValue","val"])]),_:2},1024),e(m,null,{default:n(()=>[e(c,null,{default:n(()=>[i(r(t.description?t.description:"unknown"),1)]),_:2},1024),e(c,{caption:""},{default:n(()=>[i(r(t.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[E]])),128)),e(c,{header:""},{default:n(()=>[i(r(l(d)("otherPermission")),1)]),_:1}),e(A,{spaced:""}),(u(!0),L(h,null,C(le.value,(t,p)=>B((u(),f(S,{key:p,tag:"label"},{default:n(()=>[e(m,{avatar:""},{default:n(()=>[e(w,{modelValue:l(o).selectdPermissions,"onUpdate:modelValue":a[7]||(a[7]=P=>l(o).selectdPermissions=P),val:t.id},null,8,["modelValue","val"])]),_:2},1024),e(m,null,{default:n(()=>[e(c,null,{default:n(()=>[i(r(t.description?t.description:"unknown"),1)]),_:2},1024),e(c,{caption:""},{default:n(()=>[i(r(t.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[E]])),128)),e(c,{header:""},{default:n(()=>a[9]||(a[9]=[i("Frontend")])),_:1}),e(A,{spaced:""}),(u(!0),L(h,null,C(ne.value,(t,p)=>B((u(),f(S,{key:p,tag:"label"},{default:n(()=>[e(m,{avatar:""},{default:n(()=>[e(w,{modelValue:l(o).selectdPermissions,"onUpdate:modelValue":a[8]||(a[8]=P=>l(o).selectdPermissions=P),val:t.id},null,8,["modelValue","val"])]),_:2},1024),e(m,null,{default:n(()=>[e(c,null,{default:n(()=>[i(r(t.description?t.description:"unknown"),1)]),_:2},1024),e(c,{caption:""},{default:n(()=>[i(r(t.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[E]])),128))]),_:1})):(u(),f(l(T),{key:1,status:"empty",description:l(d)("error.dataNotfound")},null,8,["description"]))]),_:1})]),_:1})]),_("div",Oe,[_("div",Ue,[e(g,{color:"positive",name:l(Pe),size:"sm"},null,8,["name"]),i(" "+r(l(d)("permissionGrant")),1)]),e(N,null,{default:n(()=>[e(R,{style:{height:"450px"}},{default:n(()=>[l(o).selectdPermissions.length>0?(u(),f(z,{key:0,dense:""},{default:n(()=>[(u(!0),L(h,null,C(l(o).selectdPermissions,(t,p)=>B((u(),f(S,{key:p},{default:n(()=>[e(m,{avatar:""},{default:n(()=>[e(g,{color:"primary",name:l(be)},null,8,["name"])]),_:1}),e(m,null,{default:n(()=>[e(c,null,{default:n(()=>[i(r(te(t)),1)]),_:2},1024),e(c,{caption:""},{default:n(()=>[i(r(ae(t)),1)]),_:2},1024)]),_:2},1024),e(m,{side:""},{default:n(()=>[e(ke,{flat:"",round:"",color:"negative",onClick:P=>se(p),icon:l(ye)},null,8,["onClick","icon"])]),_:2},1024)]),_:2},1024)),[[E]])),128))]),_:1})):(u(),f(l(T),{key:1,status:"empty","icon-size":"55px",description:l(d)("permissionNotFound")},null,8,["description"]))]),_:1})]),_:1})])])]),_:1},8,["icon","title","crud-action","crud-name","loading","onOnBack","onOnSubmit","onOnDelete"])]),_:1}))}});export{Je as default};
