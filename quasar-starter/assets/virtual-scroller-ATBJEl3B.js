import{l as j,dl as le,a9 as h,m as A,n as k,J as Q,O as ae,w as l,v as $,p as oe,q as se,u as re,r as p,o as ie,x as t,aE as I,t as r,R as ne,T as ue,M as n,aL as ce,ae as S,en as de,af as fe,L as v,Z as P,Y as R,U as me,aG as U,aZ as pe,bX as ve,bD as M}from"./index-BvWZzpdy.js";import{s as ge,_ as he,Q as C}from"./BaseVirtualScrollerDynamic.vue_vue_type_script_setup_true_lang-Hkpnz-V_.js";import{u as ye}from"./useAppMeta-BsjK9FBA.js";import{_ as _e}from"./BasePage.vue_vue_type_script_setup_true_lang-BZLsoh-1.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as L}from"./BaseInfiniteScroll.vue_vue_type_script_setup_true_lang-BONUxSw_.js";import{B as T}from"./BaseCard-B_NQL-y6.js";import"./use-meta-BFX6TH-Q.js";const Se=j({__name:"BaseVirtualScrollerRecycle",props:{minItemSize:{default:35},itemSize:{},buffer:{default:800},poolSize:{},emitUpdate:{type:Boolean,default:!0},pageMode:{type:Boolean,default:!1},pageModeFullPage:{type:Boolean},scrollAreaHeight:{default:"100%"},minHeight:{},keyField:{default:"id"},isInfiniteDisabled:{type:Boolean},infinitePosition:{},items:{}},emits:["on-update","scroll-start","scroll-end","on-infinite","on-refresh"],setup(E,{expose:V,emit:B}){le(o=>({"318a9ce5":o.scrollAreaHeight}));const i=h("appRecycleScrollerRef"),c=B,f=o=>{o!=null&&(console.log("onScrollToItem",o),i.value&&i.value.scrollToItem(o))},y=(o,g,m,d)=>{c("on-update",{viewStartIndex:o,viewEndIndex:g,visibleStartIndex:m,visibleEndIndex:d})},_=()=>{};return V({onScrollToItem:f}),(o,g)=>(k(),A(Q(ge),ae(o.$attrs,{ref_key:"appRecycleScrollerRef",ref:i,class:"scroller","key-field":o.keyField,items:o.items,"min-item-size":o.minItemSize,"emit-update":o.emitUpdate,"page-mode":o.pageMode,buffer:o.buffer,onResize:_,onUpdate:y}),{before:l(()=>[$(o.$slots,"slotBefore",{},void 0,!0)]),default:l(({item:m,index:d})=>[$(o.$slots,"default",oe(se({item:m,index:d})),void 0,!0)]),after:l(()=>[$(o.$slots,"slotAfter",{},void 0,!0)]),_:3},16,["key-field","items","min-item-size","emit-update","page-mode","buffer"]))}}),Ie=be(Se,[["__scopeId","data-v-6134f107"]]),Re={key:0},Ce={class:"q-pa-md row justify-center"},Te={id:"virtual-scroll-target-holder",class:"scroll",style:{"max-height":"300px"}},ke={class:"q-pa-md row justify-center"},Ve={style:{width:"100%"}},Be={id:"virtual-scroll-chat-target-holder",class:"scroll",style:{"max-height":"300px"}},qe={class:"q-pa-md row justify-center"},we={style:{width:"100%"}},$e=1e4,Ue=j({__name:"virtual-scroller",setup(E){const{t:V}=re(),{setTitle:B}=ye();B(`Virtual scroller | ${V("app.name")}`);const i=p([]),c=p(),f=h("scrollerDynamicRef"),y=h("scrollerRecycleRef"),_=h("chatInfinityScrollRef"),o=p([]),g=p(10),m=h("virtualListRef"),d=p(0),q=h("virtualChatListRef"),b=p([]),w=p(!0);ie(()=>{O();for(let a=0;a<$e;a++)i.value.push({id:a+1,label:"Option "+(a+1)});z(),K()});const F=a=>{c.value=a},N=a=>{f.value&&f.value.onScrollToItem(a)},G=()=>{f.value&&f.value.onScrollToBottom()},z=()=>{let a=o.value.length;for(let e=0;e<40;e++)a++,o.value.push({id:a,label:"Option "+a})},H=()=>{y.value&&y.value.onScrollToItem(g.value||0)},J=(a,e)=>{setTimeout(()=>{z(),e()},500)},Z=()=>{m.value.scrollTo(d.value,"start-force")},x=({index:a})=>{d.value=a},X=()=>{m.value.scrollTo(i.value.length-1,"start-force")},Y=(a,e)=>{console.log("onInfiniteVirtual",a),setTimeout(()=>{for(let s=0;s<30;s++)i.value.push({id:i.value.length+1,label:"Option "+(i.value.length+1)});e()},1e3)},K=async()=>{await W(),D(b.value.length-1),setTimeout(()=>{w.value=!1},1e3)},W=()=>new Promise(a=>{let e=b.value.length;for(let s=0;s<40;s++)e++,b.value.push({id:e,label:"Option "+e});a(!0)}),ee=()=>new Promise(a=>{for(let e=0;e<10;e++)b.value.unshift({id:i.value.length+1,label:"Option "+(i.value.length+1)});a(!0)}),D=a=>{q.value&&q.value.scrollTo(a,"start-force")},te=(a,e)=>{console.log("onInfiniteChatVirtual",a),setTimeout(async()=>{await ee(),e(),a==3&&O(),D(9)},1e3)},O=()=>{_.value&&(_.value.stop(),w.value=!0)};return(a,e)=>(k(),A(_e,{full:!1},{default:l(()=>[t(T,{title:"Dynamic Scroller"},{default:l(()=>[t(I,{class:"q-gutter-y-lg"},{default:l(()=>[r("div",null,[c.value?(k(),ne("p",Re," ("+n(`${c.value.viewStartIndex}-[${c.value.visibleStartIndex}-${c.value.visibleEndIndex}]-${c.value.viewEndIndex}`)+") ",1)):ue("",!0)]),t(ce,null,{default:l(()=>[t(S,{icon:Q(de),"no-caps":"",label:"Scroll to bottom",onClick:G},null,8,["icon"]),t(S,{icon:Q(fe),"no-caps":"",label:"Scroll to top",onClick:e[0]||(e[0]=s=>N(0))},null,8,["icon"])]),_:1}),t(he,{ref_key:"scrollerDynamicRef",ref:f,class:"q-pa-sm","key-field":"id",items:i.value,"min-item-size":24,"scroll-area-height":"200px",onOnUpdate:F},{slotBefore:l(()=>e[3]||(e[3]=[v(" Before Slot ")])),default:l(({item:s,index:u})=>[(k(),A(P,{key:u,dense:"",clickable:""},{default:l(()=>[t(R,null,{default:l(()=>[t(me,null,{default:l(()=>[v(" #"+n(u)+" - "+n(s.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))]),slotAfter:l(()=>e[4]||(e[4]=[v(" After Slot ")])),_:1},8,["items"])]),_:1})]),_:1}),t(T,{title:"Recycle Scroller + infinite-scroll"},{default:l(()=>[t(I,{class:"q-gutter-y-lg"},{default:l(()=>[r("div",null,[t(U,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=s=>g.value=s),label:"Scroll to",type:"number"},{append:l(()=>[t(S,{label:"Go",color:"primary",onClick:H})]),_:1},8,["modelValue"])]),t(Ie,{id:"scroll-chat-target-id",ref_key:"scrollerRecycleRef",ref:y,style:{"padding-bottom":"65px"},items:o.value,"scroll-area-height":"200px","min-item-size":42},{slotBefore:l(()=>e[5]||(e[5]=[v(" Slot before ")])),default:l(({item:s,index:u})=>[t(P,{clickable:""},{default:l(()=>[t(R,{avatar:""},{default:l(()=>[t(pe,null,{default:l(()=>e[6]||(e[6]=[r("img",{src:"https://cdn.quasar.dev/img/avatar.png"},null,-1)])),_:1})]),_:1}),t(R,null,{default:l(()=>[v(n(s.label),1)]),_:2},1024),t(R,{side:""},{default:l(()=>[t(ve,null,{default:l(()=>[v(" #"+n(u),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),slotAfter:l(()=>e[7]||(e[7]=[v(" Slot after ")])),_:1},8,["items"]),t(L,{"scroll-target":"#scroll-chat-target-id",onOnInfinite:J})]),_:1})]),_:1}),t(T,{flat:"",bordered:"",title:"Quasar virtual Scroller"},{default:l(()=>[t(I,{class:"q-gutter-y-lg"},{default:l(()=>[r("div",Ce,[t(U,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=s=>d.value=s),modelModifiers:{number:!0},style:{"min-width":"10em"},type:"number",min:0,max:9999,label:"Scroll to index","input-class":"text-right",outlined:""},null,8,["modelValue"]),t(S,{class:"q-ml-sm",label:"Go","no-caps":"",color:"primary",onClick:Z}),t(S,{class:"q-ml-sm",label:"To Bottom","no-caps":"",onClick:X})]),r("div",Te,[e[8]||(e[8]=r("p",null,"Top Area",-1)),t(M,{id:"q-scroll-target-id",ref_key:"virtualListRef",ref:m,"scroll-target":"#virtual-scroll-target-holder",items:i.value,separator:"",onVirtualScroll:x},{default:l(({item:s,index:u})=>[r("div",ke,[r("div",Ve,[t(C,{name:"me",avatar:"https://cdn.quasar.dev/img/avatar4.jpg",sent:"",stamp:"7 minutes ago"},{default:l(()=>[r("div",null,"#"+n(u)+" - "+n(s.label),1)]),_:2},1024),t(C,{name:"Jane",avatar:"https://cdn.quasar.dev/img/avatar3.jpg",stamp:"4 minutes ago"},{default:l(()=>[r("div",null,"#"+n(u)+" - "+n(s.label),1)]),_:2},1024)])])]),_:1},8,["items"]),e[9]||(e[9]=r("p",null,"Bottom Area",-1)),t(L,{"scroll-target":"#virtual-scroll-target-holder",onOnInfinite:Y})])]),_:1})]),_:1}),t(T,{flat:"",bordered:"",title:"Chat style virtual scroller"},{default:l(()=>[t(I,null,{default:l(()=>[r("div",Be,[t(L,{ref_key:"chatInfinityScrollRef",ref:_,"scroll-target":"#virtual-scroll-chat-target-holder",reverse:"",disable:w.value,onOnInfinite:te},null,8,["disable"]),t(M,{id:"q-scroll-target-id",ref_key:"virtualChatListRef",ref:q,"scroll-target":"#virtual-scroll-chat-target-holder",items:b.value,separator:"",onVirtualScroll:x},{default:l(({item:s,index:u})=>[r("div",qe,[r("div",we,[t(C,{name:"me",avatar:"https://cdn.quasar.dev/img/avatar4.jpg",sent:"",stamp:"7 minutes ago"},{default:l(()=>[r("div",null,"#"+n(u)+" - "+n(s.label),1)]),_:2},1024),t(C,{name:"Jane",avatar:"https://cdn.quasar.dev/img/avatar3.jpg",stamp:"4 minutes ago"},{default:l(()=>[r("div",null,"#"+n(u)+" - "+n(s.label),1)]),_:2},1024)])])]),_:1},8,["items"])])]),_:1})]),_:1})]),_:1}))}});export{Ue as default};
