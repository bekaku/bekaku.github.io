import{N as w,a as P,u as S,P as L,O as s,A as x,d as m,k as D,e as E,R as r,T as y}from"./index-B0LpE6d9.js";const C=()=>{const{canSyncActiveStatusToServer:h}=w(),{appToast:l,appLoading:n,isDevMode:v}=P(),{locale:f}=S(),g=L,p=t=>t?m(t)||D(t)?new Promise(a=>{a(null)}):new Promise(a=>{a(t)}):new Promise(a=>{a(null)}),A=t=>{n(!1),l(`<strong>${t.message}</strong><br> ${t.errors?.join("<br>")}`,{multiLine:!0,html:!0,type:"negative",timeout:0,position:"bottom-left",caption:y(t.timestamp,f.value)||"",actions:[{icon:r,color:"white"}]})},T=t=>{t.message&&(n(!1),l(t.message,{multiLine:!0,html:!0,type:t.status=="OK"||t.status=="CREATED"?"positive":"negative",timeout:t.status=="OK"||t.status=="CREATED"?3*1e3:10*1e3,position:"bottom-left",caption:y(t.timestamp,f.value)||"",actions:[{icon:r,color:"white"}]}))},b=async t=>new Promise(async(a,o)=>{c(t).then(async e=>{e.status!=401&&e.status!=403&&d(e);const u=await p(e.data);a(u)}).catch(e=>{o(e)})}),d=t=>{t&&t.data&&(m(t.data)?A(t.data):E(t.data)&&T(t.data))},R=async t=>new Promise(async(a,o)=>{c(t,!1).then(e=>{a(e)}).catch(e=>{o(e)})}),c=async(t,a=!0)=>{const o=await h();return new Promise((e,u)=>{s.defaults.headers.Authorization=`Bearer ${g.get(x)}`,t.baseURL!=null?s.defaults.baseURL=t.baseURL:s.defaults.baseURL="https://api.yourdomain.com",t.contentType?s.defaults.headers["Content-Type"]=t.contentType:s.defaults.headers["Content-Type"]="application/json",t.responseType?s.defaults.responseType=t.responseType:s.defaults.responseType="json",s.defaults.headers["X-Sync-Active"]=o?"1":"0",s({method:t.method,url:t.API,data:t.body?t.body:void 0}).then(i=>{v()&&a&&console.log(`api ${s.defaults.baseURL}${t.API}`,i),e(i)}).catch(i=>{n(!1),i?.response&&i.response.status!=401&&i.response.status!=403&&i?.response?.data&&d(i?.response),u(i)})})};return{callAxios:b,validateServerResponse:p,callAxiosFile:R,callAxiosProcess:c}};export{C as u};
