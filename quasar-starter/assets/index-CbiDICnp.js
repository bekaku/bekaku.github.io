const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChatMessageFile-B_uva5nf.js","assets/ChatMessageFile.vue_vue_type_script_setup_true_lang-Vxmi9UGe.js","assets/index-BUKV_9O1.js","assets/index-Fr33gqm_.css","assets/BaseFilesPreviewItem.vue_vue_type_script_setup_true_lang-BN5Iltha.js","assets/BaseAvatar-YhefbKXS.js","assets/FileManagerService-DtMSDvzq.js","assets/useAxios-578BH76m.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/BaseAvatar-BJnla1kf.css","assets/BaseFilesPreviewItemAlt.vue_vue_type_script_setup_true_lang-BTzkGJSH.js","assets/ChatMessageEngage-PQcXsKEJ.js","assets/ChatMessageEngage-DdctgRtk.css","assets/BaseMapPreview-BOGXjvQE.js","assets/BaseMapPreview-KhQNB2ht.css","assets/ChatMessageReply-CcBJTt4y.js","assets/QChatMessage-DaItF_9Y.js","assets/ContentItem-DATjPqDu.js","assets/BaseButton-CaTrqY0C.js","assets/BaseButton-CVVJuEEX.css","assets/ContentItem-CLJYYNU6.css","assets/OpenGraphItemAlt.vue_vue_type_script_setup_true_lang-7wY7Jhna.js","assets/BaseRippleItem.vue_vue_type_script_setup_true_lang-B0a1Gwy1.js","assets/BaseCard-CVr34Mor.js","assets/BaseCard-IC8sCSUl.css","assets/ClosePopup-DPKYBDjj.js","assets/BaseLink.vue_vue_type_script_setup_true_lang-DQBFuEsj.js","assets/BaseScrollArea.vue_vue_type_script_setup_true_lang-CGGch_uA.js","assets/useAppMeta-eA7SJycm.js","assets/use-meta-BfsM_rxZ.js","assets/BaseResult.vue_vue_type_script_setup_true_lang-YQvm5QEs.js","assets/BaseSpinner-Cd9dyqoV.js","assets/SkeletonItem.vue_vue_type_script_setup_true_lang-C9i1fiUb.js","assets/ChatMessageReply-DZy6Cfbo.css","assets/ChatLeft-D739EIUv.js","assets/BaseDropdownMenu.vue_vue_type_script_setup_true_lang-ClCoKzA0.js","assets/BaseLabelValueItem.vue_vue_type_script_setup_true_lang-C6tqZTAA.js","assets/BaseInput.vue_vue_type_script_setup_true_lang-DONewUfx.js","assets/BaseTabs-D0Qt7Ow4.js","assets/BaseTabs-DJuRc6HI.css","assets/ChatLeft-zhWpNxHR.css","assets/ChatRight-BMkLirDQ.js"])))=>i.map(i=>d[i]);
import{l as E,u as J,r as m,bT as Me,m as g,n as l,as as G,Y as me,w as n,a0 as p,x as o,a5 as d,at as R,au as B,aC as Se,gc as ve,dw as Ae,a4 as O,cY as $e,gd as Be,a7 as x,W as w,X as T,cW as Ee,ek as De,V as I,fD as Ve,t as z,av as U,dK as Ne,ge as Fe,dL as qe,gf as Ge,dI as Ue,gg as He,dH as Qe,gh as je,dJ as Ze,gi as We,c6 as Ie,a as ce,c as L,M as we,U as Ke,gj as Je,ah as A,Z as q,c0 as Ye,ar as le,aB as _,c7 as Xe,eM as xe,cB as Te,aJ as ee,v as se,dS as de,aW as ue,gk as pe,aU as _e,p as ze,q as Le,bg as et,b7 as W,dB as tt,aI as at,bk as nt,ct as st,d2 as it,ad as ye,ae as ot,gl as lt,_ as Ce,o as Pe,bf as ut,aZ as rt,gm as mt,H as dt,a8 as ct,f7 as gt,gn as ft,aq as ht,f8 as vt,$ as pt}from"./index-BUKV_9O1.js";import{B as ge}from"./BaseAvatar-YhefbKXS.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as re}from"./QChatMessage-DaItF_9Y.js";import{C as yt}from"./ContentItem-DATjPqDu.js";import{_ as Ct}from"./OpenGraphItemAlt.vue_vue_type_script_setup_true_lang-7wY7Jhna.js";import{_ as kt}from"./BaseRippleItem.vue_vue_type_script_setup_true_lang-B0a1Gwy1.js";import{B as bt}from"./BaseCard-CVr34Mor.js";import{C as K}from"./ClosePopup-DPKYBDjj.js";import{_ as Mt}from"./BaseLink.vue_vue_type_script_setup_true_lang-DQBFuEsj.js";import{_ as St}from"./BaseScrollArea.vue_vue_type_script_setup_true_lang-CGGch_uA.js";import{u as $t}from"./useAppMeta-eA7SJycm.js";import{_ as It}from"./BaseResult.vue_vue_type_script_setup_true_lang-YQvm5QEs.js";import Re from"./BaseSpinner-Cd9dyqoV.js";import{_ as ke}from"./SkeletonItem.vue_vue_type_script_setup_true_lang-C9i1fiUb.js";const wt=E({__name:"ChatInput",setup(t){const{t:f}=J(),y=m(),h=Me(),c=C=>{C&&C.shiftKey||(console.log("onSubmit",y.value),y.value="")};return(C,M)=>(l(),g(G,me(C.$attrs,{dense:"",class:"q-pa-none q-mt-md"}),{default:n(()=>[d(h)?.auth?.avatar?.thumbnail?(l(),g(R,{key:0,side:""},{default:n(()=>[o(ge,{src:d(h)?.auth?.avatar?.thumbnail},null,8,["src"])]),_:1})):p("",!0),o(R,null,{default:n(()=>[o(B,null,{default:n(()=>[o(Se,me(C.$attrs,{outlined:"",modelValue:y.value,"onUpdate:modelValue":M[0]||(M[0]=k=>y.value=k),type:"textarea",autogrow:"",label:d(f)("chats.typeMessage"),class:"input-emoji",onKeyup:[ve(c,["enter"]),ve(Ae(c,["shift"]),["enter"])],dense:""}),{after:n(()=>[o(O,{flat:"",round:"",icon:d(Ee),color:"primary"},null,8,["icon"])]),append:n(()=>[o(O,{dense:"",flat:"",round:"",icon:d($e),size:"sm"},null,8,["icon"]),o(O,{dense:"",flat:"",round:"",icon:d(Be),size:"sm"},{default:n(()=>[o(x,null,{default:n(()=>[w(T(d(f)("base.chooseFile")),1)]),_:1})]),_:1},8,["icon"])]),_:1},16,["modelValue","label","onKeyup"])]),_:1})]),_:1})]),_:1},16))}}),Tt=ie(wt,[["__scopeId","data-v-7e08c377"]]),fe=De("chatStore",()=>{const t=m(!1),f=m(),y=m(),h=m(!1),c=m(),C=m(),M=m(0),k=m(),b=m(!1),r=m(),i=m(!1);return{removeChat:t,chatId:f,totalNewChat:M,toggleChatSetting:h,chatSettingType:c,clearSetting:()=>{f.value=void 0,c.value=void 0,h.value=!1,C.value=void 0},currentDateForShow:k,requestItem:C,messageIdFocus:y,onCloseMiniChatPage:()=>{b.value=!1,r.value=void 0,i.value=!1},openMiniChatPage:b,miniChatGroupId:r,miniChatMinimize:i,isCurrentOpenMiniChatByGroupId:H=>H?b.value&&r.value&&r.value==H:!1}}),zt={class:"row q-pa-md q-gutter-md"},Lt={key:"btn-1",class:"btn-holder"},Pt={key:"btn-2",class:"btn-holder"},Rt={key:"btn-3",class:"btn-holder"},Ot={key:"btn-4",class:"btn-holder"},At={key:"btn-5",class:"btn-holder"},Bt=E({__name:"AppReactionMenu",props:{iconSize:{default:"45px"},iconZoomSize:{default:"64px"}},emits:["on:like"],setup(t,{emit:f}){const y=f;J();const h=m(!1),c=m(!1),C=m(!1),M=m(!1),k=m(!1),b=r=>{y("on:like",r)};return(r,i)=>(l(),I("div",zt,[o(Ve,{appear:"","enter-active-class":"animated lightSpeedInLeft"},{default:n(()=>[z("div",Lt,[o(O,{round:"",dense:"",flat:"",color:"primary",onMouseover:i[0]||(i[0]=a=>h.value=!0),onMouseleave:i[1]||(i[1]=a=>h.value=!1),onClick:i[2]||(i[2]=a=>b("LIKE"))},{default:n(()=>[o(U,{name:h.value?d(Ne):d(Fe),size:h.value?r.iconZoomSize:r.iconSize},null,8,["name","size"]),o(x,{class:"bg-primary",anchor:"top middle",self:"center middle"},{default:n(()=>i[15]||(i[15]=[w(" Like ")])),_:1})]),_:1})]),z("div",Pt,[o(O,{round:"",dense:"",flat:"",color:"green",onMouseover:i[3]||(i[3]=a=>c.value=!0),onMouseleave:i[4]||(i[4]=a=>c.value=!1),onClick:i[5]||(i[5]=a=>b("FIGHTING"))},{default:n(()=>[o(U,{name:c.value?d(qe):d(Ge),size:c.value?r.iconZoomSize:r.iconSize},null,8,["name","size"]),o(x,{class:"bg-green",anchor:"top middle",self:"center middle"},{default:n(()=>i[16]||(i[16]=[w(" Give going ")])),_:1})]),_:1})]),z("div",Rt,[o(O,{round:"",dense:"",flat:"",color:"orange",onMouseover:i[6]||(i[6]=a=>C.value=!0),onMouseleave:i[7]||(i[7]=a=>C.value=!1),onClick:i[8]||(i[8]=a=>b("LAUGH"))},{default:n(()=>[o(U,{name:C.value?d(Ue):d(He),size:C.value?r.iconZoomSize:r.iconSize},null,8,["name","size"]),o(x,{class:"bg-orange",anchor:"top middle",self:"center middle"},{default:n(()=>i[17]||(i[17]=[w(" LOL ")])),_:1})]),_:1})]),z("div",Ot,[o(O,{round:"",dense:"",flat:"",color:"pink",onMouseover:i[9]||(i[9]=a=>M.value=!0),onMouseleave:i[10]||(i[10]=a=>M.value=!1),onClick:i[11]||(i[11]=a=>b("CARE"))},{default:n(()=>[o(U,{name:M.value?d(Qe):d(je),size:M.value?r.iconZoomSize:r.iconSize},null,8,["name","size"]),o(x,{class:"bg-pink",anchor:"top middle",self:"center middle"},{default:n(()=>i[18]||(i[18]=[w(" Care ")])),_:1})]),_:1})]),z("div",At,[o(O,{round:"",dense:"",flat:"",color:"deep-purple",onMouseover:i[12]||(i[12]=a=>k.value=!0),onMouseleave:i[13]||(i[13]=a=>k.value=!1),onClick:i[14]||(i[14]=a=>b("SAD"))},{default:n(()=>[o(U,{name:k.value?d(Ze):d(We),size:k.value?r.iconZoomSize:r.iconSize},null,8,["name","size"]),o(x,{class:"bg-deep-purple",anchor:"top middle",self:"center middle"},{default:n(()=>i[19]||(i[19]=[w(" Sad ")])),_:1})]),_:1})])]),_:1})]))}}),Et=ie(Bt,[["__scopeId","data-v-69824305"]]),Dt=["id"],Vt={class:"col-12"},Nt={class:"text-muted"},Ft={class:"text-muted"},qt={class:"text-muted"},Gt={key:0,class:"text-muted text-caption"},Ut={class:"row items-center",style:{"z-index":"99999"}},Ht=E({__name:"ChatMessageItem",props:{item:{},chatType:{},index:{},showSenderAvatar:{type:Boolean,default:!1},showSenderName:{type:Boolean,default:!1},label:{},haveReply:{type:Boolean,default:!1},miniChat:{type:Boolean,default:!1},highLightText:{}},emits:["message-reaction","message-delete","message-unsend","message-reply","on-open-seen-dialog","message-share"],setup(t,{emit:f}){const y=_(()=>ee(()=>import("./ChatMessageFile-B_uva5nf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),h=_(()=>ee(()=>import("./ChatMessageEngage-PQcXsKEJ.js"),__vite__mapDeps([11,2,3,8,12]))),c=_(()=>ee(()=>import("./BaseMapPreview-BOGXjvQE.js"),__vite__mapDeps([13,2,3,8,14]))),C=f,M=fe(),{screen:k,dark:b}=Ie(),{t:r}=J(),{appFormatDateTimeAuto:i}=ce();m(!1),m();const a=m(!1),$=m(null),j=L(()=>t.item.sent?"absolute-bottom-left q-text-black":"absolute-bottom-right q-text-black"),H=L(()=>t.item.sent?"left: -55px;":"right: -50px;"),Q=L(()=>t.item.sent?"absolute-bottom-right":"absolute-bottom-left"),D=L(()=>t.item.sent?t.item.chatMsg?"bottom:-25px":"bottom:-15px":t.item.chatMsg?"bottom:-55px":"bottom:-25px"),Y=L(()=>t.item.sent?t.showSenderName?r("base.you"):"":t.item.sendUser?.name),V=L(()=>!t.item?.files||t.item.files.length==0?[]:t.item.files.filter(e=>e.fileManager&&e.fileManager.image)),N=L(()=>t.item.files?t.item.files.filter(e=>e.fileManager&&!e.fileManager.image):[]),P=L(()=>t.item.unsend||t.item.chatMessageType=="LEAVE"||t.item.chatMessageType=="INVITE"),Z=L(()=>V.value.length>0&&!t.item.chatMsg&&N.value.length==0),X=L(()=>P.value?"message-unsend":Z.value?"message-transparent":t.item.sent?"message-sent":"message-received"),F=L(()=>t.item.sent?"#":`user/${t.item.sendUser?.id}`),te=L(()=>t.item.reactionEngage&&t.item.reactionEngage.length>0?"q-mb-xl":"q-mb-sm"),ae=L(()=>{if(P.value||!t.item.files)return;if(t.item.chatMessageType=="LOCATION")return t.miniChat?"10":"9";const e=V.value.length,oe=N.value.length;if(t.miniChat&&(e>0||oe>0))return"10";if(k.gt.xs){if(e==1||e==2)return"4";if(e>0)return"6"}else if(e>0)return"8"}),ne=L(()=>P.value?b.isActive?"grey-4":"grey-7":t.item.sent?"grey-10":b.isActive?"white":"black"),s=async e=>{t.item.id&&C("message-reaction",e,t.item.id)},u=()=>{!t.item.id||!t.item?.readCount||t.item.readCount==0||!t.item.sent||t.chatType=="PERSONAL"||C("on-open-seen-dialog",t.item.id,t.item.readCount)},v=e=>new Promise(oe=>{$.value=setTimeout(()=>{a.value=e,oe(!0)},500)}),S=async()=>{a.value=!0,await v(!1),await v(!0),await v(!1),await v(!0),await v(!1),clearTimeout($.value),$.value=null,M.messageIdFocus=void 0},Oe=e=>{console.log("onReactionClick",e)};return we(M,e=>{t.item&&t.item.id&&e&&e.messageIdFocus&&e.messageIdFocus==t.item.id&&S()}),(e,oe)=>{const he=Ke("router-link");return e.item&&e.index!=null?(l(),I("div",me({key:0},e.$attrs,{class:["row",{"holder-recive":!e.item.sent&&e.miniChat,"holder-sent":e.item.sent&&e.miniChat}],id:`${d(Je)}-${e.item.id}`}),[z("div",Vt,[e.item.onlyLabel?(l(),I(A,{key:0},[e.item.chatMsg?(l(),g(re,{key:0},{label:n(()=>[z("span",Nt,T(e.item.chatMsg),1)]),_:1})):p("",!0)],64)):(l(),I(A,{key:1},[e.label?(l(),g(re,{key:0},{label:n(()=>[z("span",Ft,T(e.label),1)]),_:1})):p("",!0),e.item?(l(),g(re,{key:1,"text-color":ne.value,"bg-color":X.value,class:q(te.value),size:ae.value,sent:e.item.sent},Ye({name:n(()=>[z("div",qt,[!e.item.sent&&e.chatType!="PERSONAL"&&(!e.haveReply||e.item.unsend)?(l(),I(A,{key:0},[F.value?(l(),g(he,{key:0,to:F.value},{default:n(()=>[w(T(Y.value),1)]),_:1},8,["to"])):p("",!0)],64)):p("",!0)])]),stamp:n(()=>[z("span",{class:q(["text-caption",{"text-muted":d(b).isActive&&Z.value}])},T(d(i)(e.item.msgDateTime)),3)]),default:n(()=>[z("div",{class:q({"message-focus":a.value})},[!e.item.sent&&e.chatType!="PERSONAL"&&e.haveReply&&!e.item.unsend?(l(),I("div",Gt,T(Y.value),1)):p("",!0),P.value?e.item.chatMsg?(l(),I(A,{key:2},[w(T(e.item.chatMsg),1)],64)):(l(),I(A,{key:3},[w(T(d(r)("chats.unsend")),1)],64)):(l(),I(A,{key:1},[e.item.chatMessageType!="LOCATION"?(l(),I(A,{key:0},[e.item.chatMsg?(l(),g(yt,{key:0,class:q([d(k).gt.xs?"text-div-web":"text-div-mobile","q-pa-xs"]),"wrap-text":!0,limit:20,"is-escape-html":"","high-light-text":e.highLightText||"",content:e.item.chatMsg,"hashtag-urlify":!1,"content-id":`chat-message-${e.item.id}-${e.index}-content`,"link-style":(e.item.sent,"app-text-link"),"text-style":"text-black"},null,8,["class","high-light-text","content","content-id","link-style"])):p("",!0),e.item.chatMsg?(l(),g(Ct,{key:1,class:"q-pa-sm",style:le({maxWidth:d(k).xs?"60vw":e.miniChat?"13vw":"25vw"}),content:e.item.chatMsg,short:!e.miniChat,"image-max-height":e.miniChat?"120px":"150px","image-size":e.miniChat?"50px":"120px","show-bg":!1},null,8,["style","content","short","image-max-height","image-size"])):p("",!0),e.item.files&&e.item.files.length>0&&e.item.id?(l(),g(d(y),{key:2,class:"q-mt-sm","mini-chat":e.miniChat,"chat-id":e.item.id,files:e.item.files,sent:e.item.sent},null,8,["mini-chat","chat-id","files","sent"])):p("",!0)],64)):(l(),g(d(c),{key:1,"preview-src":e.item.chatMsg,preview:"",height:e.miniChat?140:150,zoom:2},null,8,["preview-src","height"])),e.item.reactionEngage&&e.item.reactionEngage.length>0?(l(),I("div",{key:2,class:q(Q.value),style:le([D.value,{width:"175px"}])},[e.item.reactionEngage&&e.item.reactionEngage.length>0&&e.item.id?(l(),g(d(h),{key:0,"chat-id":e.item.id,class:q(e.item.sent?"float-right":"float-left"),items:e.item.reactionEngage,onOnClick:Oe},null,8,["chat-id","class","items"])):p("",!0)],6)):p("",!0),e.item.sent&&e.item.readCount>0?(l(),g(kt,{key:3,class:"absolute-bottom-left text-muted text-weight-light text-caption app-border-radius q-px-xs","cursor-pointer":e.chatType!="PERSONAL",style:{left:"-50px",bottom:"25px"},onClick:u},{default:n(()=>[w(T(`${d(r)("chats.read")} ${e.chatType=="GROUP"?d(Xe)(e.item.readCount):""}`),1)]),_:1},8,["cursor-pointer"])):p("",!0),e.item.id?(l(),I("div",{key:4,class:q(j.value),style:le(H.value)},[z("div",Ut,[o(O,{flat:"",round:"",dense:"",size:"sm",icon:d(xe),class:"text-muted",style:{opacity:"0.5"}},null,8,["icon"]),o(O,{flat:"",round:"",dense:"",size:"sm",icon:d($e),class:q(e.item.liked?"text-amber-9":"text-muted")},{default:n(()=>[o(Te,{"auto-close":"",anchor:"top end",self:"bottom middle",style:{height:"80px",width:"310px"}},{default:n(()=>[o(Et,{"onOn:like":s})]),_:1})]),_:1},8,["icon","class"])])],6)):p("",!0)],64))],2)]),_:2},[!e.item.sent||e.showSenderAvatar?{name:"avatar",fn:n(()=>[F.value&&e.item.sendUser?.avatar?.thumbnail?(l(),g(he,{key:0,to:F.value},{default:n(()=>[o(ge,{class:"q-mr-xs",src:e.item.sendUser?.avatar?.thumbnail,"fetch-image":""},null,8,["src"])]),_:1},8,["to"])):p("",!0)]),key:"0"}:void 0]),1032,["text-color","bg-color","class","size","sent"])):p("",!0)],64))])],16,Dt)):p("",!0)}}}),Qt=ie(Ht,[["__scopeId","data-v-bda3b0e7"]]),jt=E({__name:"ChatMessage",props:{item:{},chatType:{},index:{},showSenderAvatar:{type:Boolean,default:!1},showSenderName:{type:Boolean,default:!1},miniChat:{type:Boolean,default:!1},label:{},highLightText:{}},emits:["message-reaction","message-delete","message-unsend","message-reply","on-open-seen-dialog","message-share","on-open-message-dialog"],setup(t,{emit:f}){const y=_(()=>ee(()=>import("./ChatMessageReply-CcBJTt4y.js"),__vite__mapDeps([15,2,3,5,6,7,8,9,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33]))),h=f,c=async a=>{t.item.id&&h("message-reaction",a,t.item.id)},C=async()=>{t.item.id&&h("message-delete",t.item.id)},M=async()=>{t.item.id&&h("message-unsend",t.item.id)},k=async()=>{t.item.id&&h("message-reply",t.item.id)},b=async()=>{t.item.id&&h("message-share",t.item.id)},r=(a,$)=>{h("on-open-seen-dialog",a,$)},i=a=>{h("on-open-message-dialog",a)};return(a,$)=>(l(),I(A,null,[a.item.dtoReplyTo&&!a.item.unsend?(l(),g(d(y),{key:0,item:a.item.dtoReplyTo,sent:a.item.sent,onOnClick:i,"mini-chat":a.miniChat},null,8,["item","sent","mini-chat"])):p("",!0),o(Qt,{item:a.item,index:a.index,"chat-type":a.chatType,"have-reply":a.item.dtoReplyTo!=null,"mini-chat":a.miniChat,"high-light-text":a.highLightText,"show-sender-avatar":a.showSenderAvatar,"show-sender-name":a.showSenderName,onMessageDelete:C,onMessageUnsend:M,onMessageReply:k,onMessageReaction:c,onOnOpenSeenDialog:r,onMessageShare:b},null,8,["item","index","chat-type","have-reply","mini-chat","high-light-text","show-sender-avatar","show-sender-name"])],64))}}),Zt={key:0},Wt=E({__name:"ChatGroupAvatar",props:{item:{},avatarSize:{default:"40px"},rounded:{type:Boolean,default:!1},showPin:{type:Boolean,default:!0}},setup(t){return(f,y)=>f.item?(l(),I("div",Zt,[f.item.dtoAvatar?(l(),g(ge,{key:0,"fetch-image":"",rounded:f.rounded,src:f.item.dtoAvatar.thumbnail,size:f.avatarSize},{extra:n(()=>[se(f.$slots,"extra",{},()=>[f.item.online?(l(),g(de,{key:0,floating:"",color:"positive",rounded:"",transparent:"",class:"absolute"})):p("",!0),f.showPin&&f.item.pin?(l(),g(ue,{key:1,class:"absolute",color:"primary",size:"18px",style:{top:"25px",left:"25px"}},{default:n(()=>[o(U,{color:"white",name:d(pe)},null,8,["name"])]),_:1})):p("",!0)])]),_:3},8,["rounded","src","size"])):(l(),g(ue,{key:1,size:`${f.avatarSize}px`,rounded:f.rounded},{default:n(()=>[o(_e,{alt:"avatar",src:"images/ninja.png"}),se(f.$slots,"extra",{},()=>[f.item.online?(l(),g(de,{key:0,floating:"",color:"positive",rounded:"",transparent:"",class:"absolute"})):p("",!0),f.showPin&&f.item.pin?(l(),g(ue,{key:1,class:"absolute",color:"primary",size:"18px",style:{top:"25px",left:"25px"}},{default:n(()=>[o(U,{color:"white",name:d(pe)},null,8,["name"])]),_:1})):p("",!0)])]),_:3},8,["size","rounded"]))])):p("",!0)}}),Kt=E({__name:"ChatMenu",props:{chatId:{},pin:{type:Boolean},favorite:{type:Boolean},muteNotify:{type:Boolean},chatType:{}},emits:["toggle-mute","toggle-pin","toggle-fav","toggle-chat","delete-chat","leave-group","invite-people","on-close"],setup(t,{emit:f}){const y=f,{appConfirm:h}=ce(),{t:c}=J(),C=()=>{t.chatId&&y("on-close",t.chatId)},M=()=>{t.chatId&&y("toggle-mute",t.chatId)},k=()=>{t.chatId&&y("toggle-pin",t.chatId)},b=()=>{t.chatId&&y("toggle-fav",t.chatId)},r=()=>{t.chatId&&y("invite-people",t.chatId)},i=async()=>{if(!t.chatId)return;await h(c("app.monogram"),c("chats.deleteChatConfirm"))&&y("delete-chat",t.chatId)},a=async()=>{if(!t.chatId)return;await h(c("app.monogram"),c("chats.leaveGroupConfirm"))&&y("leave-group",t.chatId)};return($,j)=>(l(),g(Te,ze(Le($.$attrs)),{default:n(()=>[o(et,{dense:""},{default:n(()=>[W((l(),g(G,{clickable:"",onClick:M},{default:n(()=>[o(R,null,{default:n(()=>[o(B,null,{default:n(()=>[w(T($.muteNotify?d(c)("chats.unmuteNotify"):d(c)("chats.muteNotify")),1)]),_:1})]),_:1})]),_:1})),[[K]]),W((l(),g(G,{clickable:"",onClick:k},{default:n(()=>[o(R,null,{default:n(()=>[o(B,null,{default:n(()=>[w(T($.pin?d(c)("chats.unpin"):d(c)("chats.pin")),1)]),_:1})]),_:1})]),_:1})),[[K]]),W((l(),g(G,{clickable:"",onClick:b},{default:n(()=>[o(R,null,{default:n(()=>[o(B,null,{default:n(()=>[w(T($.favorite?d(c)("chats.unfavorite"):d(c)("chats.favorite")),1)]),_:1})]),_:1})]),_:1})),[[K]]),$.chatType=="GROUP"?W((l(),g(G,{key:0,clickable:"",onClick:r},{default:n(()=>[o(R,null,{default:n(()=>[o(B,null,{default:n(()=>[w(T(d(c)("chats.invite")),1)]),_:1})]),_:1})]),_:1})),[[K]]):p("",!0),W((l(),g(G,{clickable:"",onClick:i},{default:n(()=>[o(R,null,{default:n(()=>[o(B,{class:"text-negative"},{default:n(()=>[w(T(d(c)("base.delete")),1)]),_:1})]),_:1})]),_:1})),[[K]]),$.chatType=="GROUP"?W((l(),g(G,{key:1,clickable:"",onClick:a},{default:n(()=>[o(R,null,{default:n(()=>[o(B,{class:"text-negative"},{default:n(()=>[w(T(d(c)("chats.leaveGroup")),1)]),_:1})]),_:1})]),_:1})),[[K]]):p("",!0),W((l(),g(G,{clickable:"",onClick:C},{default:n(()=>[o(R,null,{default:n(()=>[o(B,null,{default:n(()=>[w(T(d(c)("base.close")),1)]),_:1})]),_:1})]),_:1})),[[K]])]),_:1})]),_:1},16))}}),Jt={class:"row"},Yt=E({__name:"ChatContentHeader",props:{miniChat:{type:Boolean,default:!1},miniminze:{type:Boolean,default:!1},item:{},chatWith:{}},emits:["toggle-mute","toggle-pin","toggle-fav","toggle-chat","delete-chat","leave-group","invite-people","on-close"],setup(t){const f=m(0),{t:y}=J(),h=m(!1),c=m(""),C=L(()=>t.chatWith?`/user/${t.chatWith.id}`:"#"),M=()=>{c.value=""},k=()=>{h.value=!h.value,h.value||M()},b=()=>{const r=c.value?c.value.trim():void 0;r||(!r||r.length==0)&&M()};return(r,i)=>(l(),g(G,{class:"card-top-bg"},{default:n(()=>[r.miniChat&&r.miniminze&&f.value>0?(l(),g(de,{key:0,color:"negative",floating:""},{default:n(()=>[w(T(f.value),1)]),_:1})):p("",!0),o(R,{avatar:""},{default:n(()=>[o(Wt,{item:r.item},null,8,["item"])]),_:1}),o(R,null,{default:n(()=>[o(B,{lines:"2"},{default:n(()=>[o(Mt,{to:C.value},{default:n(()=>[w(T(r.item.groupName),1)]),_:1},8,["to"]),r.item.favorite?(l(),g(U,{key:0,color:"amber-8",size:"14px",class:"q-ml-xs q-mb-xs",name:d(tt)},null,8,["name"])):p("",!0)]),_:1}),o(B,{caption:"",lines:"1"},{default:n(()=>[w(T(r.item.chatType=="PERSONAL"?"Software engineer":"Group"),1)]),_:1})]),_:1}),o(R,{side:""},{default:n(()=>[z("div",Jt,[se(r.$slots,"headerRight",{},()=>[r.miniChat?p("",!0):(l(),I(A,{key:0},[o(at,{onSubmit:b},{default:n(()=>[h.value?(l(),g(Se,{key:0,modelValue:c.value,"onUpdate:modelValue":i[0]||(i[0]=a=>c.value=a),outlined:"",dense:"",clearable:"",onClear:M,placeholder:d(y)("chats.searchMessage")},null,8,["modelValue","placeholder"])):p("",!0)]),_:1}),o(O,{onClick:k,flat:"",round:"",icon:d(nt),size:"sm"},null,8,["icon"])],64)),r.item.id?(l(),g(O,{key:1,flat:"",round:"",icon:r.miniChat?d(it):d(st),size:"sm"},{default:n(()=>[o(Kt,{"chat-id":r.item.id,"chat-type":r.item.chatType,pin:r.item.pin,"mute-notify":r.item.muteNotify,favorite:r.item.favorite,"mini-chat":r.miniChat,onTogglePin:i[1]||(i[1]=a=>r.$emit("toggle-pin",a)),onToggleMute:i[2]||(i[2]=a=>r.$emit("toggle-mute",a)),onToggleFav:i[3]||(i[3]=a=>r.$emit("toggle-fav",a)),onDeleteChat:i[4]||(i[4]=a=>r.$emit("delete-chat",a)),onLeaveGroup:i[5]||(i[5]=a=>r.$emit("leave-group",a)),onInvitePeople:i[6]||(i[6]=a=>r.$emit("invite-people",a)),onOnClose:i[7]||(i[7]=a=>r.$emit("on-close",a))},null,8,["chat-id","chat-type","pin","mute-notify","favorite","mini-chat"])]),_:1},8,["icon"])):p("",!0)],!0)])]),_:3})]),_:3}))}}),Xt=ie(Yt,[["__scopeId","data-v-1ae1ed4e"]]),xt={class:"q-pa-md"},_t=E({__name:"ChatContent",props:ye({showHeader:{type:Boolean,default:!0},square:{type:Boolean,default:!1},inputDense:{type:Boolean},inputAvata:{type:Boolean,default:!0},scrollAreaHeight:{default:"65vh"},miniChat:{type:Boolean,default:!1},miniminze:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:ye(["toggle-mute","toggle-pin","toggle-fav","toggle-chat","delete-chat","leave-group","on-close"],["update:modelValue"]),setup(t,{emit:f}){J(),fe(),Me();const y=ot(t,"modelValue"),h=m([...lt.dataList]);m(null),Ce("chatInfinityScrollRef"),m(null),m(!1),m(),m(),m(null),m(!1);const c=m("");m({chatMsg:null,fileIds:[],chatMessageType:null}),m(!1);const C=m(),M=m(!1),k=m(),b=m(!1),r=m(0),i=m(!0),a=m(),$=Ce("chatContentInputRef");m(null);const j=m(!1);m(0);const H=m();m(!1),m(!1),m(null),m(null),Pe(async()=>{});const Q=s=>{console.log("invitePeople",s)},D=s=>new Promise(u=>{const v=h.value.findIndex(S=>S.id==s);u(v)}),Y=async s=>new Promise(u=>{const v=h.value.find(S=>S.id==s);u(v)}),V=s=>h.value[s],N=s=>{s>=0&&h.value.splice(s,1)},P=async s=>{const u=await D(s);u>=0&&N(u)},Z=async(s,u=!0)=>{if(!s)return;const v=await D(s);if(v>=0){const S=V(v);S&&(S.unsend=!0,S.chatMsg=void 0,S.files=[],S.reactionEngage=[])}},X=async(s,u)=>{const v=await D(u);if(v>=0){const S=V(v);S&&(S.liked?S.liked&&S.emojiType==s?(S.liked=!1,S.emojiType=null):S.emojiType=s:(S.liked=!0,S.emojiType=s))}},F=async s=>{i.value=!1,a.value=setTimeout(()=>{i.value=!0},100);const u=await D(s);if(u>=0){const v=V(u);v&&(C.value=v)}},te=(s,u)=>{s&&(k.value=s,r.value=u,b.value=!0)},ae=async s=>{if(!s)return;await D(s)>=0||(k.value=s,M.value=!0)},ne=async s=>{if(!s)return;const u=await Y(s);u&&(H.value=u,j.value=!0)};return(s,u)=>(l(),I("div",ze(Le(s.$attrs)),[y.value?(l(),g(bt,{key:0,flat:"",bordered:!s.square,class:q(["card-bg",{"card-minipage-style":s.miniChat}]),square:s.square},{default:n(()=>[s.showHeader?(l(),I(A,{key:0},[o(Xt,{item:y.value,"mini-chat":s.miniChat,miniminze:s.miniminze,onTogglePin:u[0]||(u[0]=v=>s.$emit("toggle-pin",v)),onToggleMute:u[1]||(u[1]=v=>s.$emit("toggle-mute",v)),onToggleFav:u[2]||(u[2]=v=>s.$emit("toggle-fav",v)),onDeleteChat:u[3]||(u[3]=v=>s.$emit("delete-chat",v)),onLeaveGroup:u[4]||(u[4]=v=>s.$emit("leave-group",v)),onInvitePeople:Q,onOnClose:u[5]||(u[5]=v=>s.$emit("on-close",v))},null,8,["item","mini-chat","miniminze"]),o(ut)],64)):p("",!0),o(St,{height:"68vh"},{default:n(()=>[z("div",xt,[(l(!0),I(A,null,rt(h.value,(v,S)=>(l(),g(jt,{key:`message-${v.id}-${S}`,item:v,index:S,"chat-type":y.value.chatType,"mini-chat":s.miniChat,"high-light-text":c.value,onMessageReaction:X,onMessageDelete:P,onMessageUnsend:Z,onMessageReply:F,onOnOpenSeenDialog:te,onOnOpenMessageDialog:ae,onMessageShare:ne},null,8,["item","index","chat-type","mini-chat","high-light-text"]))),128))])]),_:1})]),_:1},8,["bordered","class","square"])):p("",!0),o(Tt,{ref_key:"chatContentInputRef",ref:$},null,512)],16))}}),ea=ie(_t,[["__scopeId","data-v-76277d5a"]]),ta={class:"text-center"},be=E({__name:"BaseSuspense",setup(t){return(f,y)=>(l(),g(mt,null,{default:n(()=>[se(f.$slots,"default")]),fallback:n(()=>[se(f.$slots,"fallback",{},()=>[z("div",ta,[o(Re)])])]),_:3}))}}),aa={class:"row"},na={key:0,class:"col-12 col-md-3 col-sm-4 q-pa-sm"},sa={class:"col-12 col-md-6 col-sm-8 q-pa-md"},ia={key:2,style:{height:"50vh"},class:"row items-center flex-center"},oa={key:1,class:"col-12 col-md-3 q-pa-sm"},la=E({__name:"index",setup(t){const f=_(()=>ee(()=>import("./ChatLeft-D739EIUv.js"),__vite__mapDeps([34,2,3,25,8,18,19,23,24,35,36,5,6,7,9,37,30,27,38,39,16,17,20,21,22,26,28,29,31,32,40]))),y=_(()=>ee(()=>import("./ChatRight-BMkLirDQ.js"),__vite__mapDeps([41,2,3,5,6,7,8,9,23,24,18,19,27,38,39,26,16,17,20,21,22,25,28,29,30,31,32]))),{t:h}=J(),{screen:c}=Ie(),{setTitle:C}=$t();C(`${h("chats.chats")} | ${h("app.name")}`);const{getParamNumber:M,appNavigateTo:k}=ce(),b=fe(),{isSmallScreen:r}=dt(),i=ct(),a=m(),$=L(()=>M("groupId")||0);m(!1);const j=m(!1),H=m(!1),Q=m(!0),D=m([...gt.dataList]);Pe(async()=>{await V(),H.value=!0});const Y=s=>{s&&k(`/example/chats/g/${s.id}`)},V=async()=>{if(N(),Q.value=!0,!$.value)return Q.value=!1,new Promise(u=>u(!1));const s=D.value.find(u=>u.id==$.value);return console.log("onFetchGroupData, id ",$.value,s),s&&(a.value=ft(s)),Q.value=!1,new Promise(u=>{u(!0)})},N=()=>{a.value=void 0},P=(s,u)=>{b.toggleChatSetting=!0,b.chatId=u,b.chatSettingType=s},Z=async(s,u=!0)=>{s&&(u&&a.value&&(console.log("toggleMute",s),a.value.muteNotify=!a.value.muteNotify),P("NOTIFICATION",s))},X=async(s,u=!0)=>{s&&(u&&a.value&&(a.value.pin=!a.value.pin),P("PIN",s))},F=async(s,u=!0)=>{s&&(u&&a.value&&(a.value.favorite=!a.value.favorite),P("FAVORITE",s))},te=async(s,u=!0)=>{s&&(P("LEAVE",s),u&&(N(),k("/example/chats/g/0",!0)))},ae=async(s,u=!0)=>{s&&(P("LEAVE",s),u&&(N(),k("/example/chats/g/0",!0)))},ne=s=>{console.log("onCloseChat",s),N(),k("/example/chats/g/0",!0)};return we(()=>i.params.groupId,()=>{V()}),(s,u)=>(l(),g(pt,null,{default:n(()=>[o(ht,{flat:"",square:"",style:{"min-height":"91vh"}},{default:n(()=>[z("div",aa,[d(c).gt.xs?(l(),I("div",na,[o(be,null,{default:n(()=>[o(d(f),{class:"content-limit720",onOnItemClick:Y,"group-item":a.value},null,8,["group-item"])]),fallback:n(()=>[o(ke,{no:5})]),_:1})])):p("",!0),z("div",sa,[Q.value?(l(),g(Re,{key:0})):a.value?(l(),g(ea,{key:1,modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=v=>a.value=v),class:"content-limit",onToggleMute:Z,onTogglePin:X,onToggleFav:F,onDeleteChat:te,onLeaveGroup:ae,onOnClose:ne},null,8,["modelValue"])):(l(),I("div",ia,[o(It,{status:"empty",description:d(h)("chats.chatContentEmpty"),"show-icon":!1},{extra:n(()=>[o(U,{name:d(vt),size:"120px",class:"text-muted"},null,8,["name"])]),_:1},8,["description"])]))]),d(c).gt.xs&&d(c).gt.sm?(l(),I("div",oa,[o(be,null,{default:n(()=>[a.value?(l(),g(d(y),{key:0,modelValue:a.value,"onUpdate:modelValue":u[1]||(u[1]=v=>a.value=v),onToggleMute:Z,onTogglePin:X,onToggleFav:F,"show-close":d(r),onOnClose:u[2]||(u[2]=v=>j.value=!1),class:"content-limit720"},null,8,["modelValue","show-close"])):p("",!0)]),fallback:n(()=>[o(ke,{no:5})]),_:1})])):p("",!0)])]),_:1})]),_:1}))}}),Sa=Object.freeze(Object.defineProperty({__proto__:null,default:la},Symbol.toStringTag,{value:"Module"}));export{Wt as _,Sa as i,fe as u};
