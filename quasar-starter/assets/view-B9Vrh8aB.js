const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BaseResult-BxVjDszv.js","assets/BaseResult.vue_vue_type_script_setup_true_lang-YQvm5QEs.js","assets/index-BUKV_9O1.js","assets/index-Fr33gqm_.css"])))=>i.map(i=>d[i]);
import{d9 as de,l as re,u as ue,a as ce,r as D,o as me,c as y,m as f,n as u,w as n,x as e,a5 as l,bt as I,t as v,aC as q,av as g,bf as A,W as i,z as pe,X as r,aA as N,bk as fe,aG as w,a7 as ve,aK as z,bg as R,V as h,au as c,ah as C,aZ as L,b7 as B,as as S,at as m,b8 as E,aB as _e,br as Pe,af as be,a4 as ke,J as Ve,$ as ye,aJ as ge}from"./index-BUKV_9O1.js";import{u as Ae,_ as we}from"./useCrudForm-C0ReN6yk.js";import{u as he}from"./useAppMeta-eA7SJycm.js";import{u as Ce}from"./useValidation-CudGxf_T.js";import{u as Le}from"./useAxios-578BH76m.js";import{_ as $}from"./BaseToggle.vue_vue_type_script_setup_true_lang-CRAh5qvJ.js";import"./BaseButton-CaTrqY0C.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-meta-BfsM_rxZ.js";const Be=()=>(Le(),{findAll:async _=>new Promise(k=>{setTimeout(()=>{k(de)},500)}),userAcl:async(_=0)=>new Promise(k=>{setTimeout(()=>{k(null)},500)}),findAllBackendPermission:async()=>new Promise(_=>{setTimeout(()=>{_(null)},500)}),findAllFrontendPermission:async()=>new Promise(_=>{setTimeout(()=>{_(null)},500)})}),Se={class:"row"},Ee={class:"col-12 q-pa-md"},xe={class:"col-12 col-md-6 q-pa-md"},Qe={class:"col-12 col-md-6 q-pa-md"},Te={class:"row"},De={class:"col-12 col-md-6"},Fe={class:"q-px-md"},Oe={class:"col-12 col-md-6"},Ue={class:"q-px-md"},Xe=re({__name:"view",setup(M){const T=_e(()=>ge(()=>import("./BaseResult-BxVjDszv.js"),__vite__mapDeps([0,1,2,3]))),{t:d}=ue(),{required:F}=Ce(),{appLoading:_}=ce(),{findAllBackendPermission:k,findAllFrontendPermission:G}=Be(),b=D([]),x=D(""),Q=D(!1),J={id:null,name:"",nameEn:null,active:!0,frontEnd:!1,companySelected:0,selectdPermissions:[]},{crudAction:O,onBack:X,loading:U,onSubmit:K,crudEntity:o,onDelete:W,preFectData:Z,crudName:j}=Ae({crudName:"role",apiEndpoint:"/api",fectchDataOnLoad:!1,backToPreviousPath:!0},J);_(),he({additionalTitle:d("crudAction."+O.value)}),me(()=>{H()});const H=async()=>{const s=await k();s&&(b.value=s);const a=await G();a&&b.value.push(...a),await Z(),_(!1)},V=y(()=>{const s=b.value,a=x.value?x.value.toLowerCase().trim():null;return a?s.filter(t=>t.description&&t.description.toString().toLowerCase().includes(a)):s}),Y=y(()=>V.value.filter(s=>s.operationType===1&&!s.frontEnd)),ee=y(()=>V.value.filter(s=>s.operationType===2&&!s.frontEnd)),le=y(()=>V.value.filter(s=>s.operationType===3&&!s.frontEnd)),ne=y(()=>V.value.filter(s=>s.frontEnd)),te=s=>{const a=b.value.find(t=>t.id===s);return a&&a.description?a.description:"unknown"},ae=s=>{const a=b.value.find(t=>t.id===s);return a&&a.code?a.code:"unknown"},se=s=>{o.value&&o.value.selectdPermissions&&o.value.selectdPermissions.splice(s,1)},oe=()=>{ie(Q.value)},ie=s=>{if(o.value.selectdPermissions=[],s)for(let a=0;a<b.value.length;a++){const t=b.value[a];t&&o.value.selectdPermissions.push(t.id)}};return(s,a)=>(u(),f(ye,{padding:""},{default:n(()=>[e(we,{icon:l(I),title:l(d)("model_role"),"crud-action":l(O),"crud-name":l(j),loading:l(U),onOnBack:l(X),onOnSubmit:l(K),onOnDelete:l(W)},{crudFromContent:n(()=>[v("div",Se,[v("div",Ee,[e(q,{readonly:l(U),outlined:"",counter:"",maxlength:"125",modelValue:l(o).name,"onUpdate:modelValue":a[0]||(a[0]=t=>l(o).name=t),label:l(d)("model_role_name"),rules:[l(F)]},{prepend:n(()=>[e(g,{name:l(I)},null,8,["name"])]),_:1},8,["readonly","modelValue","label","rules"])]),v("div",xe,[e($,{label:l(d)("base.enable"),modelValue:l(o).active,"onUpdate:modelValue":a[1]||(a[1]=t=>l(o).active=t)},null,8,["label","modelValue"])]),v("div",Qe,[e($,{label:l(d)("model_permission_frontEnd"),modelValue:l(o).frontEnd,"onUpdate:modelValue":a[2]||(a[2]=t=>l(o).frontEnd=t)},null,8,["label","modelValue"])])]),e(A),v("div",Te,[v("div",De,[v("div",Fe,[e(g,{name:l(pe),size:"sm",color:"negative"},null,8,["name"]),i(" "+r(l(d)("model_permission")),1)]),e(N,null,{default:n(()=>[e(q,{rounded:"",filled:"",outlined:"",modelValue:x.value,"onUpdate:modelValue":a[4]||(a[4]=t=>x.value=t),label:l(d)("base.search")},{prepend:n(()=>[e(w,{modelValue:Q.value,"onUpdate:modelValue":a[3]||(a[3]=t=>Q.value=t),onClick:oe},{default:n(()=>[e(ve,null,{default:n(()=>[i(r(Q.value?l(d)("base.deselectAll"):l(d)("base.selectAll")),1)]),_:1})]),_:1},8,["modelValue"])]),append:n(()=>[e(g,{name:l(fe)},null,8,["name"])]),_:1},8,["modelValue","label"]),e(z,{style:{height:"450px"}},{default:n(()=>[V.value.length>0?(u(),f(R,{key:0,dense:""},{default:n(()=>[e(c,{header:""},{default:n(()=>[i(r(l(d)("crudPermission")),1)]),_:1}),e(A,{spaced:""}),(u(!0),h(C,null,L(Y.value,(t,p)=>B((u(),f(S,{key:p,tag:"label"},{default:n(()=>[e(m,{avatar:""},{default:n(()=>[e(w,{modelValue:l(o).selectdPermissions,"onUpdate:modelValue":a[5]||(a[5]=P=>l(o).selectdPermissions=P),val:t.id},null,8,["modelValue","val"])]),_:2},1024),e(m,null,{default:n(()=>[e(c,null,{default:n(()=>[i(r(t.description?t.description:"unknown"),1)]),_:2},1024),e(c,{caption:""},{default:n(()=>[i(r(t.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[E]])),128)),e(c,{header:""},{default:n(()=>[i(r(l(d)("reportPermission")),1)]),_:1}),e(A,{spaced:""}),(u(!0),h(C,null,L(ee.value,(t,p)=>B((u(),f(S,{key:p,tag:"label"},{default:n(()=>[e(m,{avatar:""},{default:n(()=>[e(w,{modelValue:l(o).selectdPermissions,"onUpdate:modelValue":a[6]||(a[6]=P=>l(o).selectdPermissions=P),val:t.id},null,8,["modelValue","val"])]),_:2},1024),e(m,null,{default:n(()=>[e(c,null,{default:n(()=>[i(r(t.description?t.description:"unknown"),1)]),_:2},1024),e(c,{caption:""},{default:n(()=>[i(r(t.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[E]])),128)),e(c,{header:""},{default:n(()=>[i(r(l(d)("otherPermission")),1)]),_:1}),e(A,{spaced:""}),(u(!0),h(C,null,L(le.value,(t,p)=>B((u(),f(S,{key:p,tag:"label"},{default:n(()=>[e(m,{avatar:""},{default:n(()=>[e(w,{modelValue:l(o).selectdPermissions,"onUpdate:modelValue":a[7]||(a[7]=P=>l(o).selectdPermissions=P),val:t.id},null,8,["modelValue","val"])]),_:2},1024),e(m,null,{default:n(()=>[e(c,null,{default:n(()=>[i(r(t.description?t.description:"unknown"),1)]),_:2},1024),e(c,{caption:""},{default:n(()=>[i(r(t.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[E]])),128)),e(c,{header:""},{default:n(()=>a[9]||(a[9]=[i("Frontend")])),_:1}),e(A,{spaced:""}),(u(!0),h(C,null,L(ne.value,(t,p)=>B((u(),f(S,{key:p,tag:"label"},{default:n(()=>[e(m,{avatar:""},{default:n(()=>[e(w,{modelValue:l(o).selectdPermissions,"onUpdate:modelValue":a[8]||(a[8]=P=>l(o).selectdPermissions=P),val:t.id},null,8,["modelValue","val"])]),_:2},1024),e(m,null,{default:n(()=>[e(c,null,{default:n(()=>[i(r(t.description?t.description:"unknown"),1)]),_:2},1024),e(c,{caption:""},{default:n(()=>[i(r(t.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[E]])),128))]),_:1})):(u(),f(l(T),{key:1,status:"empty",description:l(d)("error.dataNotfound")},null,8,["description"]))]),_:1})]),_:1})]),v("div",Oe,[v("div",Ue,[e(g,{color:"positive",name:l(Pe),size:"sm"},null,8,["name"]),i(" "+r(l(d)("permissionGrant")),1)]),e(N,null,{default:n(()=>[e(z,{style:{height:"450px"}},{default:n(()=>[l(o).selectdPermissions.length>0?(u(),f(R,{key:0,dense:""},{default:n(()=>[(u(!0),h(C,null,L(l(o).selectdPermissions,(t,p)=>B((u(),f(S,{key:p},{default:n(()=>[e(m,{avatar:""},{default:n(()=>[e(g,{color:"primary",name:l(be)},null,8,["name"])]),_:1}),e(m,null,{default:n(()=>[e(c,null,{default:n(()=>[i(r(te(t)),1)]),_:2},1024),e(c,{caption:""},{default:n(()=>[i(r(ae(t)),1)]),_:2},1024)]),_:2},1024),e(m,{side:""},{default:n(()=>[e(ke,{flat:"",round:"",color:"negative",onClick:P=>se(p),icon:l(Ve)},null,8,["onClick","icon"])]),_:2},1024)]),_:2},1024)),[[E]])),128))]),_:1})):(u(),f(l(T),{key:1,status:"empty","icon-size":"55px",description:l(d)("permissionNotFound")},null,8,["description"]))]),_:1})]),_:1})])])]),_:1},8,["icon","title","crud-action","crud-name","loading","onOnBack","onOnSubmit","onOnDelete"])]),_:1}))}});export{Xe as default};
