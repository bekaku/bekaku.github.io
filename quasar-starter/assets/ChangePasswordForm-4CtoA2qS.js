import{l as S,u as h,a as k,r as m,U as A,m as I,n as D,w as a,x as e,ar as q,t as w,aw as b,J as s,d1 as F,M as v,bb as L,a7 as g,R as N,Q as J,L as R,aB as p,aJ as T,aD as z,aG as E,aH as G,bf as H,aI as K,ba as M}from"./index-NsS699ic.js";import{Q as O}from"./QBar-rIp4_9Dv.js";import{u as X}from"./useValidation-DTqByABy.js";import{U as j}from"./UserService-DD4mEbpH.js";import"./useAxios-DXOj_sxf.js";const ae=S({__name:"ChangePasswordForm",props:{dialog:{type:Boolean,default:!1},isFromCompanyAdmin:{type:Boolean,default:!1},title:{type:String,default:void 0},userId:{type:Number,default:void 0}},emits:["on-close","on-okay"],setup(y,{emit:Q}){const n=y,V=Q,{t:o}=h(),{appLoading:c}=k(),i=m(!1),d=m(""),u=m(!0),{validatePasswordStrongV2:C,required:_}=X(),{updateUserPassword:B,updateUserPasswordByAdmin:P}=j(),f=()=>{V("on-close")},U=()=>{x({userChangePasswordRequest:{password:d.value,logoutAllDevice:u.value}})},x=async r=>{n.userId&&(c(),n.isFromCompanyAdmin?await P(r,n.userId):await B(r,n.userId),c(!1),f(),d.value="",u.value=!0)};return A(()=>n.dialog,r=>{i.value=r}),(r,t)=>(D(),I(M,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=l=>i.value=l),persistent:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:a(()=>[e(q,{style:{"max-width":"480px"},flat:"",bordered:""},{default:a(()=>[e(O,{class:"bg-transparent q-my-sm"},{default:a(()=>[e(b,{name:s(F)},null,8,["name"]),w("div",null,v(s(o)("base.changePassword")),1),e(L),e(g,{dense:"",flat:"",icon:s(N),size:"md",onClick:f},{default:a(()=>[e(J,null,{default:a(()=>[R(v(s(o)("base.close")),1)]),_:1})]),_:1},8,["icon"])]),_:1}),e(p,null,{default:a(()=>[e(T,{onSubmit:U,class:"q-px-sm"},{default:a(()=>[e(p,null,{default:a(()=>[e(z,{class:"q-pt-md",outlined:"",dense:"",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),type:"password",label:s(o)("authen.newPassword"),rules:[s(_),l=>s(C)(l)||s(o)("error.passwordStrongError")]},{prepend:a(()=>[e(b,{name:s(E),color:"grey-9"},null,8,["name"])]),_:1},8,["modelValue","label","rules"])]),_:1}),e(p,null,{default:a(()=>[w("div",null,[e(G,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=l=>u.value=l),label:s(o)("authen.logoutAll")},null,8,["modelValue","label"])])]),_:1}),e(H),e(K,{align:"center"},{default:a(()=>[e(g,{unelevated:"",color:"primary",label:s(o)("updatePassword"),type:"submit"},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});export{ae as default};
