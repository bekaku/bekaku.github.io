import{l as x,u as $,r as v,a as X,o as j,c as H,m as U,n as V,w as g,x as f,J as i,bP as q,Q,L as z,y as J,bR as G}from"./index-CPWGwitb.js";import{u as K}from"./useAppMeta-k5JT6zDJ.js";import{U as W}from"./UserService-DNeOA0rn.js";import{B as Y}from"./BaseButton-DENZZgD6.js";import{_ as Z}from"./BasePage.vue_vue_type_script_setup_true_lang-CqA8jxOV.js";import{a as ee}from"./BaseCard-Cq6rApTk.js";import{C as s,I as b,a as ae}from"./CrudApiList-DqnA1yui.js";import{u as te}from"./usePaging-1NDTddI3.js";import{u as oe}from"./useSort-BcEtnp5j.js";import"./use-meta-BBkCK9ZH.js";import"./useAxios-NU667v5x.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ClosePopup-CrK4Rbkw.js";import"./Paging.vue_vue_type_script_setup_true_lang-CrZS2cwn.js";import"./BaseTooltip.vue_vue_type_script_setup_true_lang-ljSUUMBP.js";const ye=x({__name:"crud-table",setup(le){const{t:u}=$(),{setTitle:y}=K();y(`Crud table | ${u("app.name")}`);const C=v([{label:"Image",translateLabel:!1,column:"avatar.thumbnail",type:s.AVATAR,options:{fillable:!0,align:"center"}},{label:"Email",translateLabel:!1,column:"email",type:s.TEXT,options:{searchable:!0,sortable:!0,fillable:!0,searchType:b.TEXT,searchModel:"",searchOperation:":"}},{label:"Username",translateLabel:!1,column:"username",type:s.TEXT,options:{fillable:!0,searchable:!0,sortable:!0,searchType:b.TEXT,searchModel:"",searchOperation:":"}},{label:"Active",translateLabel:!1,column:"active",type:s.STATUS,options:{fillable:!0,sortable:!0,searchable:!0,align:"center",searchType:b.BOOLEAN,searchModel:!0,searchOperation:"=",clickable:!0}},{label:"Select options",translateLabel:!1,column:"selectedOption",type:s.TEXT,options:{searchable:!0,searchType:b.OPTIONS,searchModel:null,searchOperation:"=",selectOption:{items:[{label:"Cody Fisher",value:6,description:"Fisher",avatar:{src:"https://www.primefaces.org/cdn/primevue/images/landing/apps/avatar11.jpg"}},{label:"Robert Fox",value:7,description:"Fox",avatar:{src:"https://www.primefaces.org/cdn/primevue/images/landing/apps/avatar12.jpg"}},{label:"Esther Howard",value:8,description:"Howard",avatar:{src:"https://www.primefaces.org/cdn/primevue/images/landing/apps/avatar13.jpg"}},{label:"Darlene Robertson",value:9,description:"Robertson",avatar:{src:"https://www.primefaces.org/cdn/primevue/images/landing/apps/avatar9.jpg"}},{label:"Ralph Edwards",value:10,description:"Edwards",avatar:{src:"https://www.primefaces.org/cdn/primevue/images/landing/apps/avatar6.png"}}],multiple:!1}}},{label:"Tools",translateLabel:!1,type:s.BASE_TOOL,options:{fillable:!0,editButton:!0,deleteButton:!0,copyButton:!0,align:"center"}}]),{findAll:T}=W(),{appConfirm:P}=X(),{pages:l,resetPaging:O}=te(5),{sort:a}=oe({column:"id",mode:"desc"}),t=v([]),p=v(!1),h=v(!1);j(async()=>{m()});const S=H(()=>`?page=${l.value.current}&size=${l.value.itemsPerPage}&sort=${a.value.column},${a.value.mode}`),m=async()=>{h.value=!0;const e=await T(S.value);return console.log("findAll",e),e&&(t.value=e.dataList,e.totalPages!=null&&(l.value.totalPages=e.totalPages),e.totalElements!=null&&(l.value.totalElements=e.totalElements),e.last!=null&&(l.value.last=e.last)),p.value||(p.value=!0),h.value=!1,new Promise(o=>o(!0))},_=async()=>{A(),await m()},A=()=>{O(),t.value=[],p.value=!1},L=e=>{console.log("onItemClick",e)},I=e=>{console.log("onItemCopy",e)},E=async e=>{console.log("onPageNoChange",e),e!=null&&(l.value.current=e,await m())},k=async e=>{console.log("onItemPerPageChange",e),e!=null&&(l.value.itemsPerPage=e,await m())},B=async e=>{a.value.column===e?a.value.mode=a.value.mode==="asc"?"desc":"asc":a.value.column=e,console.log("onSort",a.value),w()},w=async()=>{t.value=await G(t.value,a.value.column,a.value.mode||"asc")},N=async e=>{console.log("onSortMode",e),a.value.mode=e,w()},M=async e=>{console.log("onAdvanceSearch",e)},R=async(e,o)=>{await P(u("app.monogram"),u("base.deleteConfirm"))&&(console.log("onItemDelete",{indexOrIds:e,isSingle:o}),o?t.value=t.value.filter((n,c)=>c!==e):Array.isArray(e)&&(t.value=t.value.filter(n=>n.id&&!e.includes(n.id))))},D=()=>{console.log("onNewForm")},F=(e,o,r,n)=>{if(console.log("pages/permission/index.vue : onColClick",{index:o,event:e,headerOption:r,colValue:n}),r&&r.column&&r.column=="active"){const c=t.value[o];c&&(console.log("rowItem.active",c.active),t.value.map(d=>(d.id==c.id&&(d.active=!d.active),d)))}};return(e,o)=>(V(),U(Z,null,{default:g(()=>[f(ee,{title:"Crud Table",class:"q-py-md"},{end:g(()=>[f(Y,{href:"https://github.com/bekaku/quasar-starter-template/blob/main/src/pages/example/crud-table.vue",target:"_blank",icon:i(q),flat:"",round:""},{default:g(()=>[f(Q,null,{default:g(()=>o[0]||(o[0]=[z("View Source")])),_:1,__:[0]})]),_:1},8,["icon"])]),_:1}),f(ae,{icon:i(J),title:i(u)("model_user"),"crud-name":"user",loading:h.value,"frist-load":p.value,pages:i(l),headers:C.value,sort:i(a),list:t.value,onOnItemClick:L,onOnItemCopy:I,onOnPageNoChange:E,onOnItemsPerpageChange:k,onOnSort:B,onOnSortMode:N,onOnReload:_,onOnAdvanceSearch:M,onOnItemDelete:R,onOnNewForm:D,onOnColClick:F},null,8,["icon","title","loading","frist-load","pages","headers","sort","list"])]),_:1}))}});export{ye as default};
