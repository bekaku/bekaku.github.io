const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BaseResult-DOvYhWGC.js","assets/BaseResult.vue_vue_type_script_setup_true_lang-B5WERB_G.js","assets/index-D68YvXgu.js","assets/index-Bb7z0Y_k.css"])))=>i.map(i=>d[i]);
import{cX as de,l as re,u as ue,a as ce,r as F,o as me,c as y,m as f,n as u,w as n,x as e,a0 as l,bq as O,t as _,aB as q,au as A,bc as g,a3 as i,z as pe,a4 as r,az as N,bh as fe,aF as w,a2 as _e,aU as z,bd as R,ac as h,at as c,af as L,aY as C,bJ as B,ar as S,as as m,cY as E,aA as ve,bo as Pe,ad as be,$ as ke,J as Ve,V as ye,aI as Ae}from"./index-D68YvXgu.js";import{u as ge,_ as we}from"./useCrudForm-D5p0Y-Rg.js";import{u as he}from"./useAppMeta-Drc70SGy.js";import{u as Le}from"./useValidation-BLU7ykTP.js";import{u as Ce}from"./useAxios-Dx6XxiQg.js";import{_ as $}from"./BaseToggle.vue_vue_type_script_setup_true_lang-C99EEflt.js";import"./BaseButton-BrRy4iP_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-meta-CKw5NdLW.js";const Be=()=>(Ce(),{findAll:async v=>new Promise(k=>{setTimeout(()=>{k(de)},500)}),userAcl:async(v=0)=>new Promise(k=>{setTimeout(()=>{k(null)},500)}),findAllBackendPermission:async()=>new Promise(v=>{setTimeout(()=>{v(null)},500)}),findAllFrontendPermission:async()=>new Promise(v=>{setTimeout(()=>{v(null)},500)})}),Se={class:"row"},Ee={class:"col-12 q-pa-md"},xe={class:"col-12 col-md-6 q-pa-md"},Qe={class:"col-12 col-md-6 q-pa-md"},Te={class:"row"},Fe={class:"col-12 col-md-6"},De={class:"q-px-md"},Ue={class:"col-12 col-md-6"},Ie={class:"q-px-md"},Ye=re({__name:"view",setup(M){const T=ve(()=>Ae(()=>import("./BaseResult-DOvYhWGC.js"),__vite__mapDeps([0,1,2,3]))),{t:d}=ue(),{required:D}=Le(),{appLoading:v}=ce(),{findAllBackendPermission:k,findAllFrontendPermission:J}=Be(),b=F([]),x=F(""),Q=F(!1),X={id:null,name:"",nameEn:null,active:!0,frontEnd:!1,companySelected:0,selectdPermissions:[]},{crudAction:U,onBack:Y,loading:I,onSubmit:G,crudEntity:o,onDelete:j,preFectData:H,crudName:K}=ge({crudName:"role",apiEndpoint:"/api",fectchDataOnLoad:!1,backToPreviousPath:!0},X);v(),he({additionalTitle:d("crudAction."+U.value)}),me(()=>{W()});const W=async()=>{const s=await k();s&&(b.value=s);const a=await J();a&&b.value.push(...a),await H(),v(!1)},V=y(()=>{const s=b.value,a=x.value?x.value.toLowerCase().trim():null;return a?s.filter(t=>t.description&&t.description.toString().toLowerCase().includes(a)):s}),Z=y(()=>V.value.filter(s=>s.operationType===1&&!s.frontEnd)),ee=y(()=>V.value.filter(s=>s.operationType===2&&!s.frontEnd)),le=y(()=>V.value.filter(s=>s.operationType===3&&!s.frontEnd)),ne=y(()=>V.value.filter(s=>s.frontEnd)),te=s=>{const a=b.value.find(t=>t.id===s);return a&&a.description?a.description:"unknown"},ae=s=>{const a=b.value.find(t=>t.id===s);return a&&a.code?a.code:"unknown"},se=s=>{o.value&&o.value.selectdPermissions&&o.value.selectdPermissions.splice(s,1)},oe=()=>{ie(Q.value)},ie=s=>{if(o.value.selectdPermissions=[],s)for(let a=0;a<b.value.length;a++){const t=b.value[a];t&&o.value.selectdPermissions.push(t.id)}};return(s,a)=>(u(),f(ye,{padding:""},{default:n(()=>[e(we,{icon:l(O),title:l(d)("model_role"),"crud-action":l(U),"crud-name":l(K),loading:l(I),onOnBack:l(Y),onOnSubmit:l(G),onOnDelete:l(j)},{crudFromContent:n(()=>[_("div",Se,[_("div",Ee,[e(q,{readonly:l(I),outlined:"",counter:"",maxlength:"125",modelValue:l(o).name,"onUpdate:modelValue":a[0]||(a[0]=t=>l(o).name=t),label:l(d)("model_role_name"),rules:[l(D)]},{prepend:n(()=>[e(A,{name:l(O)},null,8,["name"])]),_:1},8,["readonly","modelValue","label","rules"])]),_("div",xe,[e($,{label:l(d)("base.enable"),modelValue:l(o).active,"onUpdate:modelValue":a[1]||(a[1]=t=>l(o).active=t)},null,8,["label","modelValue"])]),_("div",Qe,[e($,{label:l(d)("model_permission_frontEnd"),modelValue:l(o).frontEnd,"onUpdate:modelValue":a[2]||(a[2]=t=>l(o).frontEnd=t)},null,8,["label","modelValue"])])]),e(g),_("div",Te,[_("div",Fe,[_("div",De,[e(A,{name:l(pe),size:"sm",color:"negative"},null,8,["name"]),i(" "+r(l(d)("model_permission")),1)]),e(N,null,{default:n(()=>[e(q,{rounded:"",filled:"",outlined:"",modelValue:x.value,"onUpdate:modelValue":a[4]||(a[4]=t=>x.value=t),label:l(d)("base.search")},{prepend:n(()=>[e(w,{modelValue:Q.value,"onUpdate:modelValue":a[3]||(a[3]=t=>Q.value=t),onClick:oe},{default:n(()=>[e(_e,null,{default:n(()=>[i(r(Q.value?l(d)("base.deselectAll"):l(d)("base.selectAll")),1)]),_:1})]),_:1},8,["modelValue"])]),append:n(()=>[e(A,{name:l(fe)},null,8,["name"])]),_:1},8,["modelValue","label"]),e(z,{style:{height:"450px"}},{default:n(()=>[V.value.length>0?(u(),f(R,{key:0,dense:""},{default:n(()=>[e(c,{header:""},{default:n(()=>[i(r(l(d)("crudPermission")),1)]),_:1}),e(g,{spaced:""}),(u(!0),h(L,null,C(Z.value,(t,p)=>B((u(),f(S,{key:p,tag:"label"},{default:n(()=>[e(m,{avatar:""},{default:n(()=>[e(w,{modelValue:l(o).selectdPermissions,"onUpdate:modelValue":a[5]||(a[5]=P=>l(o).selectdPermissions=P),val:t.id},null,8,["modelValue","val"])]),_:2},1024),e(m,null,{default:n(()=>[e(c,null,{default:n(()=>[i(r(t.description?t.description:"unknown"),1)]),_:2},1024),e(c,{caption:""},{default:n(()=>[i(r(t.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[E]])),128)),e(c,{header:""},{default:n(()=>[i(r(l(d)("reportPermission")),1)]),_:1}),e(g,{spaced:""}),(u(!0),h(L,null,C(ee.value,(t,p)=>B((u(),f(S,{key:p,tag:"label"},{default:n(()=>[e(m,{avatar:""},{default:n(()=>[e(w,{modelValue:l(o).selectdPermissions,"onUpdate:modelValue":a[6]||(a[6]=P=>l(o).selectdPermissions=P),val:t.id},null,8,["modelValue","val"])]),_:2},1024),e(m,null,{default:n(()=>[e(c,null,{default:n(()=>[i(r(t.description?t.description:"unknown"),1)]),_:2},1024),e(c,{caption:""},{default:n(()=>[i(r(t.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[E]])),128)),e(c,{header:""},{default:n(()=>[i(r(l(d)("otherPermission")),1)]),_:1}),e(g,{spaced:""}),(u(!0),h(L,null,C(le.value,(t,p)=>B((u(),f(S,{key:p,tag:"label"},{default:n(()=>[e(m,{avatar:""},{default:n(()=>[e(w,{modelValue:l(o).selectdPermissions,"onUpdate:modelValue":a[7]||(a[7]=P=>l(o).selectdPermissions=P),val:t.id},null,8,["modelValue","val"])]),_:2},1024),e(m,null,{default:n(()=>[e(c,null,{default:n(()=>[i(r(t.description?t.description:"unknown"),1)]),_:2},1024),e(c,{caption:""},{default:n(()=>[i(r(t.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[E]])),128)),e(c,{header:""},{default:n(()=>a[9]||(a[9]=[i("Frontend")])),_:1}),e(g,{spaced:""}),(u(!0),h(L,null,C(ne.value,(t,p)=>B((u(),f(S,{key:p,tag:"label"},{default:n(()=>[e(m,{avatar:""},{default:n(()=>[e(w,{modelValue:l(o).selectdPermissions,"onUpdate:modelValue":a[8]||(a[8]=P=>l(o).selectdPermissions=P),val:t.id},null,8,["modelValue","val"])]),_:2},1024),e(m,null,{default:n(()=>[e(c,null,{default:n(()=>[i(r(t.description?t.description:"unknown"),1)]),_:2},1024),e(c,{caption:""},{default:n(()=>[i(r(t.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[E]])),128))]),_:1})):(u(),f(l(T),{key:1,status:"empty",description:l(d)("error.dataNotfound")},null,8,["description"]))]),_:1})]),_:1})]),_("div",Ue,[_("div",Ie,[e(A,{color:"positive",name:l(Pe),size:"sm"},null,8,["name"]),i(" "+r(l(d)("permissionGrant")),1)]),e(N,null,{default:n(()=>[e(z,{style:{height:"450px"}},{default:n(()=>[l(o).selectdPermissions.length>0?(u(),f(R,{key:0,dense:""},{default:n(()=>[(u(!0),h(L,null,C(l(o).selectdPermissions,(t,p)=>B((u(),f(S,{key:p},{default:n(()=>[e(m,{avatar:""},{default:n(()=>[e(A,{color:"primary",name:l(be)},null,8,["name"])]),_:1}),e(m,null,{default:n(()=>[e(c,null,{default:n(()=>[i(r(te(t)),1)]),_:2},1024),e(c,{caption:""},{default:n(()=>[i(r(ae(t)),1)]),_:2},1024)]),_:2},1024),e(m,{side:""},{default:n(()=>[e(ke,{flat:"",round:"",color:"negative",onClick:P=>se(p),icon:l(Ve)},null,8,["onClick","icon"])]),_:2},1024)]),_:2},1024)),[[E]])),128))]),_:1})):(u(),f(l(T),{key:1,status:"empty","icon-size":"55px",description:l(d)("permissionNotFound")},null,8,["description"]))]),_:1})]),_:1})])])]),_:1},8,["icon","title","crud-action","crud-name","loading","onOnBack","onOnSubmit","onOnDelete"])]),_:1}))}});export{Ye as default};
