import{l as v,a as B,c as w,d$ as S,m as o,n as s,ac as H,w as t,t as C,O as N,u as L,b8 as $,T as l,Z as z,x as n,Y as y,U as u,L as m,az as k,J as i,dK as A,M as d,cd as Q,R as M,dM as O,dO as T,W as b,v as P,c3 as U}from"./index-BvWZzpdy.js";import{C as V}from"./ClosePopup-Bp5W5fPl.js";import{_ as F}from"./chatStore-C8hKXATz.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E=["innerHTML"],R=v({__name:"BaseContentHtml",props:{content:{},isEscapeHtml:{type:Boolean,default:!1},highLightText:{}},emits:["on-press"],setup(a,{emit:p}){const{inputSanitizeHtml:r}=B(),f=p,c=e=>{f("on-press",e)},g=w(()=>{if(!a.content)return"";const e=a.isEscapeHtml?r(S(a.content)):r(a.content);return a.highLightText?e.replaceAll(a.highLightText,`<span class='text-weight-bold text-blue'>${a.highLightText}</span>`):e});return(e,h)=>(s(),o(H,null,{default:t(()=>[C("div",N(e.$attrs,{onClick:h[0]||(h[0]=I=>c(I)),innerHTML:g.value}),null,16,E)]),_:1}))}}),q={class:"row"},G=v({__name:"ChatHistoryItem",props:{item:{},avatarSize:{},isActive:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},closePopup:{type:Boolean},showSettingIcon:{type:Boolean,default:!0},clickable:{type:Boolean,default:!0}},emits:["on-item-click"],setup(a,{emit:p}){const r=p,{appFormatDateAuto:f}=B(),{t:c}=L(),g=()=>{r("on-item-click",a.item)};return(e,h)=>e.item?$((s(),o(z,N({key:0},e.$attrs,{dense:e.dense,clickable:e.clickable,onClick:g,class:{"active-chat":e.isActive}}),{default:t(()=>[n(y,{avatar:""},{default:t(()=>[n(F,{item:e.item},null,8,["item"])]),_:1}),n(y,null,{default:t(()=>[n(u,{lines:"1"},{default:t(()=>[e.item.favorite&&e.showSettingIcon?(s(),o(k,{key:0,color:"amber-8",size:"11px",class:"q-mb-xs",name:i(A)},null,8,["name"])):l("",!0),m(" "+d(`${e.item.chatType=="GROUP"?"("+i(Q)(e.item.totalMembers)+") ":""}${e.item.groupName?e.item.groupName:i(c)("chats.groupUntitledName")}`),1)]),_:1}),n(u,{caption:"",lines:"1"},{default:t(()=>[C("div",q,[e.item.muteNotify&&e.showSettingIcon?(s(),o(k,{key:0,size:"15px",class:"text-muted",name:i(O)},null,8,["name"])):l("",!0),e.item.latestMessageType!="LOCATION"&&e.item.latestMessage?(s(),o(R,{key:1,content:e.item.latestMessage,"is-escape-html":""},null,8,["content"])):i(T)(e.item.latestMessageType)!=""?(s(),M(b,{key:2},[m(d(i(c)(i(T)(e.item.latestMessageType))),1)],64)):(s(),M(b,{key:3},[m(" Â  ")],64))])]),_:1})]),_:1}),n(y,{side:""},{default:t(()=>[P(e.$slots,"side",{},()=>[e.item.latestUpdate?(s(),o(u,{key:0,caption:"",lines:"1"},{default:t(()=>[m(d(i(f)(e.item.latestUpdate)),1)]),_:1})):l("",!0),!e.isActive&&e.item.totalNewMessage>0?(s(),o(u,{key:1,caption:""},{default:t(()=>[n(U,{color:"negative"},{default:t(()=>[m(d(e.item.totalNewMessage>=100?"99+":e.item.totalNewMessage),1)]),_:1})]),_:1})):l("",!0)],!0)]),_:3})]),_:3},16,["dense","clickable","class"])),[[V]]):l("",!0)}}),Z=D(G,[["__scopeId","data-v-04a4557d"]]);export{Z as C};
