import{l as U,u as A,a as h,r as m,M as k,m as I,n as q,w as a,x as e,aq as F,t as w,av as b,a5 as s,d1 as D,X as v,bb as N,a4 as g,J as L,a7 as T,W as X,aA as p,aI as z,aC as E,aF as G,aG as H,bf as J,aH as K,ba as M}from"./index-BUKV_9O1.js";import{Q as O}from"./QBar-C-cge2z0.js";import{u as R}from"./useValidation-CudGxf_T.js";import{U as W}from"./UserService-CYiRClh_.js";import"./useAxios-578BH76m.js";const ae=U({__name:"ChangePasswordForm",props:{dialog:{type:Boolean,default:!1},isFromCompanyAdmin:{type:Boolean,default:!1},title:{type:String,default:void 0},userId:{type:Number,default:void 0}},emits:["on-close","on-okay"],setup(y,{emit:Q}){const n=y,V=Q,{t:o}=A(),{appLoading:c}=h(),i=m(!1),d=m(""),u=m(!0),{validatePasswordStrongV2:C,required:_}=R(),{updateUserPassword:P,updateUserPasswordByAdmin:x}=W(),f=()=>{V("on-close")},B=()=>{S({userChangePasswordRequest:{password:d.value,logoutAllDevice:u.value}})},S=async r=>{n.userId&&(c(),n.isFromCompanyAdmin?await x(r,n.userId):await P(r,n.userId),c(!1),f(),d.value="",u.value=!0)};return k(()=>n.dialog,r=>{i.value=r}),(r,t)=>(q(),I(M,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=l=>i.value=l),persistent:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:a(()=>[e(F,{style:{"max-width":"480px"},flat:"",bordered:""},{default:a(()=>[e(O,{class:"bg-transparent q-my-sm"},{default:a(()=>[e(b,{name:s(D)},null,8,["name"]),w("div",null,v(s(o)("base.changePassword")),1),e(N),e(g,{dense:"",flat:"",icon:s(L),size:"md",onClick:f},{default:a(()=>[e(T,null,{default:a(()=>[X(v(s(o)("base.close")),1)]),_:1})]),_:1},8,["icon"])]),_:1}),e(p,null,{default:a(()=>[e(z,{onSubmit:B,class:"q-px-sm"},{default:a(()=>[e(p,null,{default:a(()=>[e(E,{class:"q-pt-md",outlined:"",dense:"",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),type:"password",label:s(o)("authen.newPassword"),rules:[s(_),l=>s(C)(l)||s(o)("error.passwordStrongError")]},{prepend:a(()=>[e(b,{name:s(G),color:"grey-9"},null,8,["name"])]),_:1},8,["modelValue","label","rules"])]),_:1}),e(p,null,{default:a(()=>[w("div",null,[e(H,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=l=>u.value=l),label:s(o)("authen.logoutAll")},null,8,["modelValue","label"])])]),_:1}),e(J),e(K,{align:"center"},{default:a(()=>[e(g,{unelevated:"",color:"primary",label:s(o)("updatePassword"),type:"submit"},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});export{ae as default};
