const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BaseImageViewDialog-BOpTg9vm.js","assets/index-CPWGwitb.js","assets/index-BgtrcqL_.css","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/BaseFilesPreviewItem.vue_vue_type_script_setup_true_lang-CLGllsp3.js","assets/BaseAvatar-DZIJSCVa.js","assets/FileManagerService-pqu110kJ.js","assets/useAxios-NU667v5x.js","assets/BaseAvatar-DIqnQNII.css","assets/BaseFilesPreviewItemAlt.vue_vue_type_script_setup_true_lang-C0QPSrdG.js","assets/BaseScrollArea.vue_vue_type_script_setup_true_lang-dfnFduQu.js","assets/useAppMeta-k5JT6zDJ.js","assets/use-meta-BBkCK9ZH.js","assets/BasePage.vue_vue_type_script_setup_true_lang-CqA8jxOV.js","assets/BaseCard-Cq6rApTk.js","assets/BaseCard-49o-4T3u.css","assets/ClosePopup-CrK4Rbkw.js","assets/BaseSwiperSlides.vue_vue_type_script_setup_true_lang-DTBXdeAX.js","assets/index-Clrgq_aO.js","assets/SkeletonItem.vue_vue_type_script_setup_true_lang-CTnq6bRS.js","assets/BaseButton-DENZZgD6.js","assets/BaseButton-XQUT7Fs7.css","assets/BaseImageViewDialog-1whlK3ju.css","assets/BasePdfViewDialog-BHg1ZhI8.js","assets/BasePdfViewDialog.vue_vue_type_script_setup_true_lang-LaFpDKun.js","assets/BaseFileViewDialog-ygVBr2nw.js"])))=>i.map(i=>d[i]);
import{l as K,ab as $e,bT as Ve,u as te,a as Se,bS as De,r,o as ge,c as we,m,n as s,ay as se,I as le,w as l,v as Te,t as y,x as e,T as b,R as I,J as i,bB as pe,L as B,M as S,af as P,d1 as Le,f7 as Qe,bA as he,cz as ye,W as Q,bb as be,em as ze,bX as Ne,bg as Me,b8 as ne,Z as ie,Y as U,aA as ue,f8 as ke,bC as Oe,a1 as Ce,bz as Ie,dc as Ae,X as A,az as j,aX as Fe,am as X,an as F,_ as Re,a4 as xe,f9 as Be,H as Pe,aS as qe,Q as R,aR as Ee,bf as re,N as He,dg as de,dh as fe,aF as Z,U as me,bP as Ue,aG as Y,aO as ee}from"./index-CPWGwitb.js";import{_ as ae}from"./BaseFilesPreviewItem.vue_vue_type_script_setup_true_lang-CLGllsp3.js";import{_ as Ze}from"./BaseFilesPreviewItemAlt.vue_vue_type_script_setup_true_lang-C0QPSrdG.js";import{_ as We}from"./BaseScrollArea.vue_vue_type_script_setup_true_lang-dfnFduQu.js";import{u as je}from"./useAppMeta-k5JT6zDJ.js";import{_ as Xe}from"./BasePage.vue_vue_type_script_setup_true_lang-CqA8jxOV.js";import{B as W,a as ce}from"./BaseCard-Cq6rApTk.js";import{C as ve}from"./ClosePopup-CrK4Rbkw.js";import{F as _e,k as Ke,l as Ge,m as Je,n as Ye,e as ea,h as aa}from"./FileManagerService-pqu110kJ.js";import{_ as la}from"./BaseSwiperSlides.vue_vue_type_script_setup_true_lang-DTBXdeAX.js";import{B as ta}from"./BaseAvatar-DZIJSCVa.js";import{_ as sa}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{$ as oa}from"./index-Clrgq_aO.js";import{_ as na}from"./SkeletonItem.vue_vue_type_script_setup_true_lang-CTnq6bRS.js";import{B as ia}from"./BaseButton-DENZZgD6.js";const ua={key:2,class:"q-ml-xs text-caption"},ra={class:"row items-center"},da={class:"swiper-zoom-container"},fa=K({__name:"BaseImageView",props:{showDeleteImage:{type:Boolean,default:!1},fetch:{type:Boolean,default:!1},showArrow:{type:Boolean,default:!0},user:{},files:{default:()=>[]},images:{default:()=>[]},selectedIndex:{default:0},allowKeyboard:{type:Boolean,default:!0},height:{default:"90vh"},width:{default:"100%"},dark:{type:Boolean,default:!0},closeable:{type:Boolean,default:!0}},emits:["onClose","onBeforeHide","onDelete"],setup(o,{emit:O}){const V=O,p=$e("baseImgViewSwiperRef"),{screen:z}=Ve(),{t:x}=te(),{appConfirm:D}=Se(),_=De(),{fethCdnData:h}=_e(),n=r(0),d=r([]),$=r(!1),T=r(!1),c=r(!0),v=r({speed:400,slidesPerView:1,spaceBetween:0,centeredSlides:!1,pagination:!1,initialSlide:o.selectedIndex,zoom:!0});ge(async()=>{n.value=o.selectedIndex,await M(),c.value=!1,o.allowKeyboard&&document.addEventListener("keydown",N)});const k=we(()=>d.value?d.value.length:0),N=a=>{a.key==="ArrowLeft"?($.value=!0,T.value=!1,n.value>0&&E()):a.key==="ArrowRight"&&($.value=!1,T.value=!0,n.value<k.value-1&&q())},M=async()=>{if(o.files&&o.files.length>0)for(const a of o.files)if(o.fetch){const t=await L(a.filePath);t&&d.value.push(t)}else d.value.push(a.filePath);else if(o.images&&o.images.length>0)for(const a of o.images)if(o.fetch){const t=await L(a.image);t&&d.value.push(t)}else d.value.push(a.image);return new Promise(a=>{a(!0)})},L=async a=>{const t=await h(a);return t?new Promise(u=>{u(t)}):new Promise(u=>{u(null)})},g=async()=>{if(d.value.length>0){const a=d.value[n.value];a&&Ke(a,Ge())}},f=async()=>{await D(x("app.monogram"),x("base.deletePhotoConfirm"))&&(d.value.splice(n.value,1),V("onDelete",n.value),d.value.length==0&&V("onClose"))},C=a=>{!c.value&&a&&(n.value=a.realIndex)},q=()=>{p.value&&p.value.onNext()},E=()=>{p.value&&p.value.onPrev()},G=()=>{p.value&&p.value.onZoomIn()},H=()=>{p.value&&p.value.onZoomOut()},J=()=>{V("onClose")};return(a,t)=>(s(),m(se,{class:le({"text-white":a.dark}),flat:"",dark:a.dark},{default:l(()=>[Te(a.$slots,"toolbar",{},()=>[e(Ie,null,{default:l(()=>[a.user&&a.user.avatar?.thumbnail?(s(),m(ta,{key:0,src:a.user.avatar.thumbnail,size:"32px"},null,8,["src"])):b("",!0),i(z).gt.xs?(s(),m(pe,{key:1},{default:l(()=>[B(S(`${i(x)("base.photo")} ${n.value+1}/${k.value}`),1)]),_:1})):(s(),I("span",ua,S(`${n.value+1}/${k.value}`),1)),e(P,{dense:"",flat:"",round:"",icon:i(Le),onClick:G},null,8,["icon"]),e(P,{dense:"",flat:"",round:"",icon:i(Qe),onClick:H},null,8,["icon"]),a.showArrow?(s(),I(Q,{key:3},[e(P,{dense:"",flat:"",round:"",icon:i(he),disable:n.value==0,onClick:t[0]||(t[0]=u=>E())},null,8,["icon","disable"]),e(P,{dense:"",flat:"",round:"",icon:i(ye),disable:n.value==k.value-1,onClick:t[1]||(t[1]=u=>q())},null,8,["icon","disable"])],64)):b("",!0),e(be),e(P,{flat:"",round:"",dense:"",icon:i(ze)},{default:l(()=>[e(Ne,null,{default:l(()=>[e(Me,{style:{"min-width":"100px"}},{default:l(()=>[ne((s(),m(ie,{clickable:"",onClick:g},{default:l(()=>[e(U,{avatar:""},{default:l(()=>[e(ue,{name:i(ke)},null,8,["name"])]),_:1}),e(U,null,{default:l(()=>[B(S(i(x)("base.download")),1)]),_:1})]),_:1})),[[ve]]),a.showDeleteImage&&i(_)&&i(_).auth?ne((s(),m(ie,{key:0,clickable:"",onClick:f},{default:l(()=>[e(U,{avatar:""},{default:l(()=>[e(ue,{name:i(Oe)},null,8,["name"])]),_:1}),e(U,null,{default:l(()=>[B(S(i(x)("base.delete")),1)]),_:1})]),_:1})),[[ve]]):b("",!0)]),_:1})]),_:1})]),_:1},8,["icon"]),a.closeable?(s(),m(P,{key:4,dense:"",flat:"",round:"",icon:i(Ce),onClick:J},null,8,["icon"])):b("",!0)]),_:1})],!0),y("div",ra,[c.value?(s(),m(Ae,{key:0,showing:c.value,"label-class":"text-white"},null,8,["showing"])):b("",!0),e(la,{ref_key:"baseImgViewSwiperRef",ref:p,params:v.value,style:j({height:a.height,width:a.width}),class:le({"bg-black":a.dark,"bg-grey-2":!a.dark}),onOnSlideChange:C},{default:l(()=>[(s(!0),I(Q,null,A(d.value,(u,w)=>(s(),I("swiper-slide",{key:`base-img-view-${w}-${u}`},[y("div",da,[e(Fe,{style:j({maxWidth:a.width,maxHeight:a.height}),ratio:"1",fit:"scale-down",class:"swiper-zoom-target",src:u,alt:`img-${w}`},null,8,["style","src","alt"])])]))),128))]),_:1},8,["params","style","class"])])]),_:3},8,["class","dark"]))}}),ma=sa(fa,[["__scopeId","data-v-7d4044a6"]]),ca={class:"row justify-center"},va=K({__name:"BasePdfViewCore",props:X({src:{},fitParent:{type:Boolean,default:!1},textLayer:{type:Boolean,default:!1},width:{},height:{},watermarkText:{},hideForms:{type:Boolean,default:!1}},{scale:{type:Number,default:1},scaleModifiers:{},page:{type:Number,default:1},pageModifiers:{},pagess:{type:Number,default:1},pagessModifiers:{},loading:{type:Boolean,default:!0},loadingModifiers:{}}),emits:X(["onPageChange"],["update:scale","update:page","update:pagess","update:loading"]),setup(o,{emit:O}){const V=F(o,"scale"),p=F(o,"page"),z=F(o,"pagess");F(o,"loading");const x=r(!1),{pdf:D,pages:_}=oa(o.src),h=()=>{x.value=!0,z.value=_.value};return(n,d)=>{const $=Re("pdf-vue");return s(),m(xe,null,{default:l(()=>[y("div",ca,[x.value?b("",!0):(s(),m(Be,{key:0,query:"",color:"primary",style:{height:"5px"}})),e($,{pdf:i(D),scale:V.value,page:p.value,"fit-parent":n.fitParent,width:n.width,height:n.height,"text-layer":n.textLayer,"watermark-text":n.watermarkText,"hide-forms":n.hideForms,onLoaded:h},null,8,["pdf","scale","page","fit-parent","width","height","text-layer","watermark-text","hide-forms"])])]),_:1})}}}),ga=K({__name:"BasePdfView",props:X({title:{},src:{},fetchToServer:{type:Boolean,default:!1},showDownload:{type:Boolean,default:!0},isBlob:{type:Boolean,default:!1},scrollHeight:{default:"80vh"},minHeight:{default:"500px"},minWidth:{default:"100%"},closeable:{type:Boolean,default:!0}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:X(["on-close"],["update:show"]),setup(o,{emit:O}){const{isDark:V}=Pe(),{fethCdnData:p,downloadCdnData:z}=_e(),x=O,{t:D}=te(),_=F(o,"show"),h=r(),n=r(!0),d=r(!1),$=r(),T=r(),c=r(1),v=r(1),k=r(0);ge(async()=>{N()});const N=async()=>{if(n.value=!0,o.fetchToServer){const g=await p(o.src,"axiosresponse");g&&(h.value=await Je(g),T.value=g.headers["content-type"],$.value=Ye(g),n.value=!1)}else h.value=o.src,n.value=!1},M=async()=>{if(d.value=!0,o.fetchToServer)await z(o.src,o.title);else if(o.isBlob)try{ea(o.src,o.title||"pdf_file.pdf")}catch(g){console.error(g)}else aa(o.src,o.title||"pdf_file.pdf");d.value=!1},L=()=>{x("on-close"),_.value=!1};return(g,f)=>(s(),m(se,{flat:""},{default:l(()=>[e(Ie,null,{default:l(()=>[g.title?(s(),m(pe,{key:0},{default:l(()=>[B(S(g.title),1)]),_:1})):b("",!0),e(P,{flat:"",round:"",dense:"",icon:i(qe),onClick:f[0]||(f[0]=C=>c.value=c.value>.25?c.value-.25:c.value)},{default:l(()=>[e(R,null,{default:l(()=>f[7]||(f[7]=[B(" Zoom-")])),_:1,__:[7]})]),_:1},8,["icon"]),y("span",null,S(c.value*100+"%"),1),e(P,{flat:"",round:"",dense:"",icon:i(Ee),onClick:f[1]||(f[1]=C=>c.value=c.value<2?c.value+.25:c.value)},{default:l(()=>[e(R,null,{default:l(()=>f[8]||(f[8]=[B(" Zoom+")])),_:1,__:[8]})]),_:1},8,["icon"]),e(re,{vertical:"",class:"q-mx-xs"}),e(P,{flat:"",dense:"",round:"",icon:i(he),onClick:f[2]||(f[2]=C=>v.value=v.value>1?v.value-1:v.value)},null,8,["icon"]),y("span",null,S(v.value)+" / "+S(k.value),1),e(P,{dense:"",flat:"",round:"",icon:i(ye),onClick:f[3]||(f[3]=C=>v.value=v.value<k.value?v.value+1:v.value)},null,8,["icon"]),e(be),g.showDownload&&!n.value?(s(),m(P,{key:1,dense:"",flat:"",round:"",icon:i(ke),onClick:M},{default:l(()=>[e(R,null,{default:l(()=>[B(S(i(D)("base.download")),1)]),_:1})]),_:1},8,["icon"])):b("",!0),g.closeable?(s(),m(P,{key:2,round:"",flat:"",dense:"",icon:i(Ce),onClick:L},{default:l(()=>[e(R,null,{default:l(()=>[B(S(i(D)("base.close")),1)]),_:1})]),_:1},8,["icon"])):b("",!0)]),_:1}),e(re),y("div",{class:le({"bg-black":i(V),"bg-grey-2":!i(V)})},[y("div",{style:j({minHeight:g.minHeight,minWidth:g.minWidth})},[d.value?(s(),m(Be,{key:0,query:"",color:"primary",class:"q-my-sm",style:{height:"5px"}})):b("",!0),n.value?(s(),I(Q,{key:1},[n.value?(s(),m(na,{key:0,height:100,"text-number":3,flat:"",show:""})):b("",!0)],64)):h.value?(s(),m(He,{key:2,style:j({height:g.scrollHeight})},{default:l(()=>[e(va,{scale:c.value,"onUpdate:scale":f[4]||(f[4]=C=>c.value=C),page:v.value,"onUpdate:page":f[5]||(f[5]=C=>v.value=C),pagess:k.value,"onUpdate:pagess":f[6]||(f[6]=C=>k.value=C),src:h.value},null,8,["scale","page","pagess","src"])]),_:1},8,["style"])):(s(),I(Q,{key:3},[B(" Error")],64))],4)],2)]),_:1}))}}),wa={class:"row"},pa={class:"col-12 col-md-6"},ha={class:"row"},ya={class:"col-12 col-md-6 q-px-md"},ba={class:"row"},ka={class:"row"},Ca=K({__name:"image-view",setup(o){const O=Y(()=>ee(()=>import("./BaseImageViewDialog-BOpTg9vm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),V=Y(()=>ee(()=>import("./BasePdfViewDialog-BHg1ZhI8.js"),__vite__mapDeps([23,24,1,2,4,5,6,7,3,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))),p=Y(()=>ee(()=>import("./BaseFileViewDialog-ygVBr2nw.js"),__vite__mapDeps([25,6,7,1,2,24,0,3,4,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),{t:z}=te(),{setTitle:x}=je();x(`Image View | ${z("app.name")}`);const{isDark:D}=Pe(),_=r(0),h=r(!1),n=r([...de]),d=r(!1),$=r(),T=r(),c=r([...fe]),v=r(!1),k=r(0),N=r([]),M=r(),L=r([...de,...fe]),g=async a=>{console.log("onImgPreviewClick",a),_.value=a,h.value=!0},f=async a=>{console.log("onPdfPreviewClick",a);const t=c.value[a];t&&($.value=t.filePath,T.value=t.fileName,d.value=!0)},C=()=>{_.value=0,h.value=!1},q=a=>{console.log("onDeleteImage",a)},E=()=>{$.value=void 0,T.value=void 0,d.value=!1},G=async a=>{console.log("onMixPreviewClick",a),v.value=!1,k.value=0,N.value=[];const t=L.value[a];t&&(t.isImage&&await J(t),M.value=t,v.value=!0)},H=we(()=>L.value.filter(a=>a.isImage)),J=a=>new Promise(t=>{const u=H.value.findIndex(w=>w.id==a.id);if(u>=0){const w=H.value;for(const oe of w)oe&&N.value.push(oe);k.value=u}t(!0)});return(a,t)=>(s(),m(Xe,{padding:""},{default:l(()=>[e(W,{title:"Image Only"},{end:l(()=>[e(ia,{href:"https://github.com/bekaku/quasar-starter-template/blob/main/src/pages/example/image-view.vue",target:"_blank",icon:i(Ue),flat:"",round:""},{default:l(()=>[e(R,null,{default:l(()=>t[4]||(t[4]=[B("View Source")])),_:1,__:[4]})]),_:1},8,["icon"])]),default:l(()=>[e(Z,null,{default:l(()=>[y("div",wa,[y("div",pa,[e(me,{header:""},{default:l(()=>t[5]||(t[5]=[B("Grid")])),_:1,__:[5]}),y("div",ha,[(s(!0),I(Q,null,A(n.value,(u,w)=>(s(),I("div",{class:"col-4 col-md-3 q-pa-xs",key:`img-${w}-${u.fileName}`},[e(ae,{style:{"border-radius":"10px"},item:u,index:w,"show-delete":!1,"show-tooltip":"","use-thumbnail":!1,"image-size":"100%","show-name":!1,"show-size":!1,onOnClick:g},null,8,["item","index"])]))),128))])]),y("div",ya,[e(me,{header:""},{default:l(()=>t[6]||(t[6]=[B("List")])),_:1,__:[6]}),e(We,{height:"310px"},{default:l(()=>[(s(!0),I(Q,null,A(n.value,(u,w)=>(s(),m(Ze,{key:`img-${w}-${u.fileName}`,item:u,index:w,clickable:"",dense:"","show-delete":!0,"show-name":"","show-size":"",onOnClick:g},null,8,["item","index"]))),128))]),_:1})])])]),_:1})]),_:1}),e(ce,{title:"Image Slide"}),e(W,null,{default:l(()=>[e(Z,null,{default:l(()=>[e(xe,null,{default:l(()=>[e(ma,{files:n.value,"selected-index":_.value,dark:i(D),"show-delete-image":!1,"show-arrow":"",height:"350px",closeable:!1},null,8,["files","selected-index","dark"])]),_:1})]),_:1})]),_:1}),e(W,{title:"Pdf View"},{default:l(()=>[e(Z,null,{default:l(()=>[t[7]||(t[7]=y("div",{class:"text-h6 q-mb-md"},"Pdf View",-1)),y("div",ba,[(s(!0),I(Q,null,A(c.value,(u,w)=>(s(),I("div",{class:"col-4 col-md-2 q-pa-xs",key:`impdfg-${w}-${u.id}`},[e(ae,{style:{"border-radius":"10px"},item:u,index:w,"show-delete":!1,"show-tooltip":"","show-name":"","show-size":"",onOnClick:f},null,8,["item","index"])]))),128))]),e(ce,{title:"Pdf inline display"}),e(se,{flat:"",bordered:""},{default:l(()=>[e(ga,{src:"https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf",closeable:!1,title:"compressed.tracemonkey-pldi-09.pdf"})]),_:1})]),_:1,__:[7]})]),_:1}),e(W,{title:"Mix item View"},{default:l(()=>[e(Z,null,{default:l(()=>[y("div",ka,[(s(!0),I(Q,null,A(L.value,(u,w)=>(s(),I("div",{class:"col-4 col-md-2 q-pa-xs",key:`impdfg-${w}-${u.fileName}`},[e(ae,{style:{"border-radius":"10px"},item:u,index:w,"show-delete":!1,"show-tooltip":"","show-name":"","show-size":"","image-size":"100%",linesName:2,onOnClick:G},null,8,["item","index"])]))),128))])]),_:1})]),_:1}),h.value?(s(),m(i(O),{key:0,modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=u=>h.value=u),files:n.value,"selected-index":_.value,"show-delete-image":!0,maximized:!1,"show-arrow":"",onOnDelete:q,onOnClose:C},null,8,["modelValue","files","selected-index"])):b("",!0),d.value&&$.value?(s(),m(i(V),{key:1,modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=u=>d.value=u),src:$.value,title:T.value,onOnClose:t[2]||(t[2]=()=>E)},null,8,["modelValue","src","title"])):b("",!0),v.value&&M.value?(s(),m(i(p),{key:2,item:M.value,"image-list":N.value,"select-index":k.value,title:"Images","show-arrow":!0,show:v.value,"onUpdate:show":t[3]||(t[3]=u=>v.value=u)},null,8,["item","image-list","select-index","show"])):b("",!0)]),_:1}))}}),Oa=Object.freeze(Object.defineProperty({__proto__:null,default:Ca},Symbol.toStringTag,{value:"Module"}));export{ma as B,ga as _,Oa as i};
