import{u as K}from"./useAppMeta-Det3xs35.js";import{l as V,ab as T,r as g,o as C,c as j,cu as ee,m as x,n as f,w as e,x as l,t as u,R as $,M as d,I as te,Q as B,L as v,J as h,bP as w,T as F,aM as le,af as k,fB as ae,ag as oe,Z as H,Y as z,U as se,aF as A,aH as J,bI as N,dx as re,O as G,v as E,p as W,q as X,aZ as ne,bo as ie,bY as M,dX as ue,X as ce,W as me,az as de,u as pe}from"./index-D2_s7zbP.js";import{_ as fe}from"./BasePage.vue_vue_type_script_setup_true_lang-wpeDAXDG.js";import{B as Y}from"./BaseButton-CvbVWVz2.js";import{B as q}from"./BaseCard-DIxBFYod.js";import{_ as Z,Q,s as ve}from"./QChatMessage-BuxC6jz8.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as U}from"./BaseInfiniteScroll.vue_vue_type_script_setup_true_lang-CNCQvdzM.js";/* empty css                             */import{_ as O}from"./BaseInput.vue_vue_type_script_setup_true_lang-DUX5V_hQ.js";import"./use-meta-DhCLVLMg.js";import"./BaseAvatar-Dd0BukBT.js";import"./FileManagerService-CwRtvFJO.js";import"./useAxios-DC4_ZzHn.js";const _e=["src"],ge={key:1},he=V({__name:"ExampleAutoScrollBottom",setup(R){const o=T("autoSCrollToBottomRef"),s=g(0),r=g(!1),c=g(Array.from({length:100},(n,a)=>({id:a,text:a%5===0?null:`Message #${a+1}`,image:a%5===0?`https://picsum.photos/seed/${a}/200/200`:null})));C(()=>{_(),setTimeout(()=>{r.value=!0},3e3)});const p=j(()=>c.value.filter(n=>n.image).length),_=async()=>{ee(()=>{p.value==0&&(console.log("no images"),setTimeout(()=>{i()},100))})},i=()=>{console.log("onAutoSCrollToBottom"),o.value&&o.value.onScrollToItem(c.value.length-1)},t=()=>{r.value||(s.value++,i())};return(n,a)=>(f(),x(q,{title:"Dynamic Scroller auto scroll botton on mount"},{end:e(()=>[l(Y,{href:"https://github.com/bekaku/quasar-starter-template/blob/main/src/components/example/virtual-scroller/ExampleDynamicScroller.vue",target:"_blank",icon:h(w),flat:"",round:""},{default:e(()=>[l(B,null,{default:e(()=>a[0]||(a[0]=[v("View Source")])),_:1,__:[0]})]),_:1},8,["icon"])]),default:e(()=>[l(Z,{ref_key:"autoSCrollToBottomRef",ref:o,class:"q-pa-sm","key-field":"id",items:c.value,"min-item-size":54,"scroll-area-height":"500px"},{default:e(({item:m,index:S})=>[u("div",{class:te(["chat-message",{image:m.image}])},[m.image?(f(),$("img",{key:0,src:m.image,alt:"chat image",onLoad:t},null,40,_e)):(f(),$("p",ge,d(S+" "+m.text),1))],2)]),_:1},8,["items"])]),_:1}))}}),be=D(he,[["__scopeId","data-v-d27da6e0"]]),ye={key:0},Se=V({__name:"ExampleDynamicScroller",setup(R){const o=g([]),s=g(),r=T("scrollerDynamicRef"),c=i=>{s.value=i},p=i=>{r.value&&r.value.onScrollToItem(i)},_=()=>{r.value&&r.value.onScrollToBottom()};return C(()=>{for(let i=0;i<1e4;i++)o.value.push({id:i+1,label:"Option "+(i+1)})}),(i,t)=>(f(),x(q,{title:"Dynamic Scroller"},{end:e(()=>[l(k,{href:"https://github.com/bekaku/quasar-starter-template/blob/main/src/components/example/virtual-scroller/ExampleDynamicScroller.vue",target:"_blank",icon:h(w),flat:"",round:""},{default:e(()=>[l(B,null,{default:e(()=>t[1]||(t[1]=[v("View Source")])),_:1,__:[1]})]),_:1},8,["icon"])]),default:e(()=>[l(A,{class:"q-gutter-y-lg"},{default:e(()=>[u("div",null,[s.value?(f(),$("p",ye," ("+d(`${s.value.viewStartIndex}-[${s.value.visibleStartIndex}-${s.value.visibleEndIndex}]-${s.value.viewEndIndex}`)+") ",1)):F("",!0)]),l(le,null,{default:e(()=>[l(k,{icon:h(ae),"no-caps":"",label:"Scroll to bottom",onClick:_},null,8,["icon"]),l(k,{icon:h(oe),"no-caps":"",label:"Scroll to top",onClick:t[0]||(t[0]=n=>p(0))},null,8,["icon"])]),_:1}),l(Z,{ref_key:"scrollerDynamicRef",ref:r,class:"q-pa-sm","key-field":"id",items:o.value,"min-item-size":24,"scroll-area-height":"200px",onOnUpdate:c},{slotBefore:e(()=>t[2]||(t[2]=[v(" Before Slot ")])),default:e(({item:n,index:a})=>[(f(),x(H,{key:a,dense:"",clickable:""},{default:e(()=>[l(z,null,{default:e(()=>[l(se,null,{default:e(()=>[v(" #"+d(a)+" - "+d(n.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))]),slotAfter:e(()=>t[3]||(t[3]=[v(" After Slot ")])),_:1},8,["items"])]),_:1})]),_:1}))}}),ke={class:"q-pa-md row justify-center"},xe={id:"virtual-scroll-target-holder",class:"scroll",style:{"max-height":"300px"}},Ie={class:"q-pa-md row justify-center"},Ve={style:{width:"100%"}},Re=V({__name:"ExampleQuasarScroller",setup(R){const o=g([]),s=T("virtualListRef"),r=g(0);C(()=>{});const c=()=>{s.value.scrollTo(r.value,"start-force")},p=({index:t})=>{r.value=t},_=()=>{s.value.scrollTo(o.value.length-1,"start-force")},i=(t,n)=>{console.log("onInfiniteVirtual",t),setTimeout(()=>{for(let a=0;a<30;a++)o.value.push({id:o.value.length+1,label:"Option "+(o.value.length+1)});n()},1e3)};return(t,n)=>(f(),x(q,{flat:"",bordered:"",title:"Quasar virtual Scroller"},{end:e(()=>[l(k,{href:"https://github.com/bekaku/quasar-starter-template/blob/main/src/components/example/virtual-scroller/ExampleQuasarScroller.vue",target:"_blank",icon:h(w),flat:"",round:""},{default:e(()=>[l(B,null,{default:e(()=>n[1]||(n[1]=[v("View Source")])),_:1,__:[1]})]),_:1},8,["icon"])]),default:e(()=>[l(A,{class:"q-gutter-y-lg"},{default:e(()=>[u("div",ke,[l(J,{modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=a=>r.value=a),modelModifiers:{number:!0},style:{"min-width":"10em"},type:"number",min:0,max:9999,label:"Scroll to index","input-class":"text-right",outlined:""},null,8,["modelValue"]),l(k,{class:"q-ml-sm",label:"Go","no-caps":"",color:"primary",onClick:c}),l(k,{class:"q-ml-sm",label:"To Bottom","no-caps":"",onClick:_})]),u("div",xe,[n[2]||(n[2]=u("p",null,"Top Area",-1)),l(N,{id:"q-scroll-target-id",ref_key:"virtualListRef",ref:s,"scroll-target":"#virtual-scroll-target-holder",items:o.value,separator:"",onVirtualScroll:p},{default:e(({item:a,index:m})=>[u("div",Ie,[u("div",Ve,[l(Q,{name:"me",avatar:"https://cdn.quasar.dev/img/avatar4.jpg",sent:"",stamp:"7 minutes ago"},{default:e(()=>[u("div",null,"#"+d(m)+" - "+d(a.label),1)]),_:2},1024),l(Q,{name:"Jane",avatar:"https://cdn.quasar.dev/img/avatar3.jpg",stamp:"4 minutes ago"},{default:e(()=>[u("div",null,"#"+d(m)+" - "+d(a.label),1)]),_:2},1024)])])]),_:1},8,["items"]),n[3]||(n[3]=u("p",null,"Bottom Area",-1)),l(U,{"scroll-target":"#virtual-scroll-target-holder",onOnInfinite:i})])]),_:1})]),_:1}))}}),Te={id:"virtual-scroll-chat-target-holder",class:"scroll",style:{"max-height":"300px"}},$e={class:"q-pa-md row justify-center"},Ce={style:{width:"100%"}},Be=V({__name:"ExampleQuasarScroller2",setup(R){const o=g([]),s=T("chatInfinityScrollRef"),r=T("virtualChatListRef"),c=g([]),p=g(!0),_=g(0);C(()=>{I(),t()});const i=({index:b})=>{_.value=b},t=async()=>{await n(),m(c.value.length-1),setTimeout(()=>{p.value=!1},1e3)},n=()=>new Promise(b=>{let y=c.value.length;for(let L=0;L<40;L++)y++,c.value.push({id:y,label:"Option "+y});b(!0)}),a=()=>new Promise(b=>{for(let y=0;y<10;y++)c.value.unshift({id:o.value.length+1,label:"Option "+(o.value.length+1)});b(!0)}),m=b=>{r.value&&r.value.scrollTo(b,"start-force")},S=(b,y)=>{console.log("onInfiniteChatVirtual",b),setTimeout(async()=>{await a(),y(),b==3&&I(),m(9)},1e3)},I=()=>{s.value&&(s.value.stop(),p.value=!0)};return(b,y)=>(f(),x(q,{flat:"",bordered:"",title:"Chat style virtual scroller"},{end:e(()=>[l(k,{href:"https://github.com/bekaku/quasar-starter-template/blob/main/src/components/example/virtual-scroller/ExampleQuasarScroller2.vue",target:"_blank",icon:h(w),flat:"",round:""},{default:e(()=>[l(B,null,{default:e(()=>y[0]||(y[0]=[v("View Source")])),_:1,__:[0]})]),_:1},8,["icon"])]),default:e(()=>[l(A,null,{default:e(()=>[u("div",Te,[l(U,{ref_key:"chatInfinityScrollRef",ref:s,"scroll-target":"#virtual-scroll-chat-target-holder",reverse:"",disable:p.value,onOnInfinite:S},null,8,["disable"]),l(N,{id:"q-scroll-target-id",ref_key:"virtualChatListRef",ref:r,"scroll-target":"#virtual-scroll-chat-target-holder",items:c.value,separator:"",onVirtualScroll:i},{default:e(({item:L,index:P})=>[u("div",$e,[u("div",Ce,[l(Q,{name:"me",avatar:"https://cdn.quasar.dev/img/avatar4.jpg",sent:"",stamp:"7 minutes ago"},{default:e(()=>[u("div",null,"#"+d(P)+" - "+d(L.label),1)]),_:2},1024),l(Q,{name:"Jane",avatar:"https://cdn.quasar.dev/img/avatar3.jpg",stamp:"4 minutes ago"},{default:e(()=>[u("div",null,"#"+d(P)+" - "+d(L.label),1)]),_:2},1024)])])]),_:1},8,["items"])])]),_:1})]),_:1}))}}),we=V({__name:"BaseVirtualScrollerRecycle",props:{minItemSize:{default:35},itemSize:{},buffer:{default:800},poolSize:{},emitUpdate:{type:Boolean,default:!0},pageMode:{type:Boolean,default:!1},pageModeFullPage:{type:Boolean},scrollAreaHeight:{default:"100%"},minHeight:{},keyField:{default:"id"},isInfiniteDisabled:{type:Boolean},infinitePosition:{},items:{}},emits:["on-update","scroll-start","scroll-end","on-infinite","on-refresh"],setup(R,{expose:o,emit:s}){re(t=>({"318a9ce5":t.scrollAreaHeight}));const r=T("appRecycleScrollerRef"),c=s,p=t=>{t!=null&&(console.log("onScrollToItem",t),r.value&&r.value.scrollToItem(t))},_=(t,n,a,m)=>{c("on-update",{viewStartIndex:t,viewEndIndex:n,visibleStartIndex:a,visibleEndIndex:m})},i=()=>{};return o({onScrollToItem:p}),(t,n)=>(f(),x(h(ve),G(t.$attrs,{ref_key:"appRecycleScrollerRef",ref:r,class:"scroller","key-field":t.keyField,items:t.items,"min-item-size":t.minItemSize,"emit-update":t.emitUpdate,"page-mode":t.pageMode,buffer:t.buffer,onResize:i,onUpdate:_}),{before:e(()=>[E(t.$slots,"slotBefore",{},void 0,!0)]),default:e(({item:a,index:m})=>[E(t.$slots,"default",W(X({item:a,index:m})),void 0,!0)]),after:e(()=>[E(t.$slots,"slotAfter",{},void 0,!0)]),_:3},16,["key-field","items","min-item-size","emit-update","page-mode","buffer"]))}}),qe=D(we,[["__scopeId","data-v-6134f107"]]),Le=V({__name:"ExampleRecycleScroller",setup(R){const o=T("scrollerRecycleRef"),s=g([]),r=g(10),c=()=>{let i=s.value.length;for(let t=0;t<40;t++)i++,s.value.push({id:i,label:"Option "+i})},p=()=>{o.value&&o.value.onScrollToItem(r.value||0)},_=(i,t)=>{setTimeout(()=>{c(),t()},500)};return C(()=>{c()}),(i,t)=>(f(),x(q,{title:"Recycle Scroller + infinite-scroll"},{end:e(()=>[l(k,{href:"https://github.com/bekaku/quasar-starter-template/blob/main/src/components/example/virtual-scroller/ExampleRecycleScroller.vue",target:"_blank",icon:h(w),flat:"",round:""},{default:e(()=>[l(B,null,{default:e(()=>t[1]||(t[1]=[v("View Source")])),_:1,__:[1]})]),_:1},8,["icon"])]),default:e(()=>[l(A,{class:"q-gutter-y-lg"},{default:e(()=>[u("div",null,[l(J,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=n=>r.value=n),label:"Scroll to",type:"number"},{append:e(()=>[l(k,{label:"Go",color:"primary",onClick:p})]),_:1},8,["modelValue"])]),l(qe,{id:"scroll-chat-target-id",ref_key:"scrollerRecycleRef",ref:o,style:{"padding-bottom":"65px"},items:s.value,"scroll-area-height":"200px","min-item-size":42},{slotBefore:e(()=>t[2]||(t[2]=[v(" Slot before ")])),default:e(({item:n,index:a})=>[l(H,{clickable:""},{default:e(()=>[l(z,{avatar:""},{default:e(()=>[l(ne,null,{default:e(()=>t[3]||(t[3]=[u("img",{src:"https://cdn.quasar.dev/img/avatar.png"},null,-1)])),_:1,__:[3]})]),_:1}),l(z,null,{default:e(()=>[v(d(n.label),1)]),_:2},1024),l(z,{side:""},{default:e(()=>[l(ie,null,{default:e(()=>[v(" #"+d(a),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),slotAfter:e(()=>t[4]||(t[4]=[v(" Slot after ")])),_:1},8,["items"]),l(U,{"scroll-target":"#scroll-chat-target-id",onOnInfinite:_})]),_:1})]),_:1}))}}),Ae={class:"row q-my-md"},ze={class:"col col-md-6"},Qe={class:"col col-md-6"},Ee={class:"chat-message"},De=["src"],Ue=V({__name:"ExampleVueUseScroller",setup(R){const o=M(),s=M(""),r=Array.from(Array.from({length:99999}).keys()).map(a=>({height:a%5===0?142:62,size:a%2===0?"small":"large",text:a%5===0?null:`Message #${a+1}`,image:a%5===0?`https://picsum.photos/seed/${a}/200/100`:null})),c=j(()=>r.filter(a=>a.size.startsWith(s.value.toLowerCase()))),{list:p,containerProps:_,wrapperProps:i,scrollTo:t}=ue(c,{itemHeight:a=>c.value[a]?c.value[a].height+8:20,overscan:10});function n(){o.value&&t(o.value)}return C(()=>{t(c.value.length-1)}),(a,m)=>(f(),x(q,{title:"Vue use virtual scroller"},{end:e(()=>[l(k,{href:"https://github.com/bekaku/quasar-starter-template/blob/main/src/components/example/virtual-scroller/ExampleVueUseScroller.vue",target:"_blank",icon:h(w),flat:"",round:""},{default:e(()=>[l(B,null,{default:e(()=>m[2]||(m[2]=[v("View Source")])),_:1,__:[2]})]),_:1},8,["icon"])]),default:e(()=>[l(A,null,{default:e(()=>[u("div",null,[u("div",Ae,[u("div",ze,[l(O,{label:"Jump to index",placeholder:"Index",type:"number",modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=S=>o.value=S)},{append:e(()=>[l(Y,{label:"Go",onClick:n})]),_:1},8,["modelValue"])]),u("div",Qe,[l(O,{label:"Filter list by size",placeholder:"e.g. small, medium, large",type:"search",modelValue:s.value,"onUpdate:modelValue":m[1]||(m[1]=S=>s.value=S)},null,8,["modelValue"])])]),u("div",G(h(_),{style:{height:"300px"},class:"h-300px overflow-auto p-2 bg-gray-500/5 rounded"}),[u("div",W(X(h(i))),[(f(!0),$(me,null,ce(h(p),({index:S,data:I})=>(f(),$("div",{key:S,class:"app-border q-mb-sm",style:de({height:`${I.height}px`})},[u("div",Ee,[v(" Row "+d(S)+" ",1),u("span",null,"("+d(I.size)+") "+d(I.text||"Image"),1),u("div",null,[I.image?(f(),$("img",{key:0,src:I.image},null,8,De)):F("",!0)])])],4))),128))],16)],16)])]),_:1})]),_:1}))}}),Pe=D(Ue,[["__scopeId","data-v-2b074b09"]]),tt=V({__name:"virtual-scroller",setup(R){const{t:o}=pe(),{setTitle:s}=K();return s(`Virtual scroller | ${o("app.name")}`),(r,c)=>(f(),x(fe,{full:!1},{default:e(()=>[l(be),l(Se),l(Le),l(Re),l(Be),l(Pe)]),_:1}))}});export{tt as default};
