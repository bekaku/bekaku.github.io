const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Paging-C9QgPggN.js","assets/Paging.vue_vue_type_script_setup_true_lang-CrZS2cwn.js","assets/index-CPWGwitb.js","assets/index-BgtrcqL_.css","assets/BaseSpinner-I2x3BGAp.js","assets/BaseSpinner.vue_vue_type_script_setup_true_lang-RV4ipJ8D.js","assets/BaseResult-zdWQij3s.js","assets/BaseResult.vue_vue_type_script_setup_true_lang-B_eDK7NF.js","assets/BaseLoadmore-DJy39QBR.js"])))=>i.map(i=>d[i]);
import{r as P,c as N,i as j,d as z,e as W,f as X,g as H,l as K,u as ee,o as ae,m as c,n as r,w as s,x as l,aF as O,R as b,J as a,cA as te,aG as S,W as y,bg as Q,X as M,Z,Y as D,U as $,L as m,M as E,bZ as se,aU as q,Q as F,bP as le,T as oe,aO as B}from"./index-CPWGwitb.js";import{_ as ne}from"./BaseScrollArea.vue_vue_type_script_setup_true_lang-dfnFduQu.js";import{u as re}from"./useAppMeta-k5JT6zDJ.js";import{u as ie}from"./usePaging-1NDTddI3.js";import{u as ue}from"./useSort-BcEtnp5j.js";import{u as de}from"./useAxios-NU667v5x.js";import fe from"./BaseAlert-Dz0R3YLX.js";import{B as T}from"./BaseButton-DENZZgD6.js";import{B as G}from"./BaseCard-Cq6rApTk.js";import{_ as ce}from"./BasePage.vue_vue_type_script_setup_true_lang-CqA8jxOV.js";import{_ as me}from"./BaseTooltip.vue_vue_type_script_setup_true_lang-ljSUUMBP.js";import"./use-meta-BBkCK9ZH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J=o=>{const{callAxios:I}=de(),{pages:n,resetPaging:L}=ie(o?.itemsPerPage?o.itemsPerPage:10),{sort:p}=ue(o?.defaultSort),i=P([]),d=P(!1),f=P(!1),g=P(!1),k=P(o.urlEndpoint),h=P(o?.additionalUri),A=N(()=>{let e=!1,t="";return(o.pageAble==null||o.pageAble)&&(t+=`page=${o.pageStartZero==null||o.pageStartZero?n.value.current>0?n.value.current-1:0:n.value.current}`,t+=`&size=${n.value.itemsPerPage}`,e=!0),(o.sortAble==null||o.sortAble)&&(e&&(t+="&"),t+=`${p.value.column&&p.value.mode?"sort="+p.value.column+","+p.value.mode:""}`,e=!0),h.value&&(e&&(t+="&"),t+=`${h.value}`),j(t)?void 0:t}),U=N(()=>`${k.value}${A.value?"?"+A.value:""}`),v=async()=>{g.value=!0;const e=await I({API:U.value,method:"GET"});let t=[];if(!z(e)&&!W(e)){if(X(e))o.reverseList?t=e.dataList.reverse():t=e.dataList,await C(t),e.totalPages!=null&&(n.value.totalPages=e.totalPages),e.totalElements!=null&&(n.value.totalElements=e.totalElements,(e.totalElements==0||e.totalElements<n.value.itemsPerPage)&&(d.value=!0)),e.last!=null&&(n.value.last=e.last,d.value=e.last);else if(e&&H(e)){const _=e;(_.length==0||_.length<n.value.itemsPerPage)&&(d.value=!0),o.reverseList?t=_.reverse():t=_,await C(t)}}return f.value||(f.value=!0),g.value=!1,new Promise(_=>{_(!0)})},C=e=>new Promise(t=>{n.value.current==1?i.value=e:o.concatList?o.addUnshift?i.value.unshift(...e):i.value.push(...e):i.value=e,t(!0)}),w=(e=!0)=>{e&&L(),i.value=[],f.value=!1,d.value=!1},R=async()=>(L(),o.preventResetListReload||(f.value=!1,i.value=[]),d.value=!1,await v(),new Promise(e=>e(!0))),V=async()=>(f.value&&(n.value.current++,await v()),new Promise(e=>e(!0))),x=async(e=!1)=>(w(e),await v(),new Promise(t=>t(!0)));return{isInfiniteDisabled:d,firstLoaded:f,loading:g,pages:n,sort:p,dataList:i,urlEndpoint:k,additionalUri:h,loadData:v,resetData:w,onPageChange:async e=>(await x(!1),new Promise(t=>t(!0))),onPerPageChange:async e=>(await x(!1),new Promise(t=>t(!0))),onNextPage:V,onReload:R}},Ce=K({__name:"use-pagefecth",setup(o){const I=S(()=>B(()=>import("./Paging-C9QgPggN.js"),__vite__mapDeps([0,1,2,3]))),n=S(()=>B(()=>import("./BaseSpinner-I2x3BGAp.js"),__vite__mapDeps([4,5,2,3]))),L=S(()=>B(()=>import("./BaseResult-zdWQij3s.js"),__vite__mapDeps([6,7,2,3]))),p=S(()=>B(()=>import("./BaseLoadmore-DJy39QBR.js"),__vite__mapDeps([8,2,3]))),{t:i}=ee(),{setTitle:d}=re();d(`Use pagefecth | ${i("app.name")}`);const{firstLoaded:f,pages:g,dataList:k,onPageChange:h,onPerPageChange:A,onReload:U}=J({urlEndpoint:"/api/permission",defaultSort:{column:"id",mode:"desc"},itemsPerPage:4}),{isInfiniteDisabled:v,loading:C,firstLoaded:w,dataList:R,onReload:V,onNextPage:x}=J({urlEndpoint:"/api/permission",defaultSort:{column:"id",mode:"desc"},itemsPerPage:4,concatList:!0});return ae(()=>{}),(Y,u)=>(r(),c(ce,null,{default:s(()=>[l(G,{title:"Paging"},{end:s(()=>[l(T,{flat:"",round:"",icon:a(q),onClick:a(U)},{default:s(()=>[l(F,null,{default:s(()=>u[1]||(u[1]=[m(" Reload data ")])),_:1,__:[1]})]),_:1},8,["icon","onClick"]),l(T,{href:"https://github.com/bekaku/quasar-starter-template/blob/main/src/pages/example/composables/use-pagefecth.vue",target:"_blank",icon:a(le),flat:"",round:""},{default:s(()=>[l(me,null,{default:s(()=>u[2]||(u[2]=[m("View Source")])),_:1,__:[2]})]),_:1},8,["icon"])]),default:s(()=>[l(O,null,{default:s(()=>[l(fe,{type:"is-warning",icon:a(te),message:"You need to work with your API, you can use my Java Springboot REST API from the link https://github.com/bekaku/java-spring-boot-starter",closeable:!1},null,8,["icon"]),a(f)?(r(),b(y,{key:1},[a(k).length===0?(r(),c(a(L),{key:0,status:"empty",description:a(i)("error.dataNotfound")},null,8,["description"])):(r(),b(y,{key:1},[l(Q,null,{default:s(()=>[(r(!0),b(y,null,M(a(k),(e,t)=>(r(),c(Z,{key:`${t}-${e.id}`},{default:s(()=>[l(D,null,{default:s(()=>[l($,null,{default:s(()=>[m(E(e.description),1)]),_:2},1024),l($,{caption:""},{default:s(()=>[m(E(e.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),l(a(I),{modelValue:a(g),"onUpdate:modelValue":u[0]||(u[0]=e=>se(g)?g.value=e:null),"boundary-numbers":!1,"onUpdate:current":a(h),"onUpdate:perPage":a(A)},null,8,["modelValue","onUpdate:current","onUpdate:perPage"])],64))],64)):(r(),c(a(n),{key:0}))]),_:1})]),_:1}),l(G,{title:"Loadmore"},{end:s(()=>[l(T,{flat:"",round:"",icon:a(q),onClick:a(V)},{default:s(()=>[l(F,null,{default:s(()=>u[3]||(u[3]=[m(" Reload data ")])),_:1,__:[3]})]),_:1},8,["icon","onClick"])]),default:s(()=>[l(O,null,{default:s(()=>[a(w)?(r(),b(y,{key:1},[a(R).length===0?(r(),c(a(L),{key:0,status:"empty",description:a(i)("error.dataNotfound")},null,8,["description"])):(r(),b(y,{key:1},[l(ne,{height:"250px"},{default:s(()=>[l(Q,null,{default:s(()=>[(r(!0),b(y,null,M(a(R),(e,t)=>(r(),c(Z,{key:`${t}-${e.id}`},{default:s(()=>[l(D,{side:""},{default:s(()=>[m(E(t+1),1)]),_:2},1024),l(D,null,{default:s(()=>[l($,null,{default:s(()=>[m(E(e.description),1)]),_:2},1024),l($,{caption:""},{default:s(()=>[m(E(e.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),a(v)?oe("",!0):(r(),c(a(p),{key:0,loading:a(C),"frist-loaded":a(w),"is-infinite-disabled":a(v),label:a(i)("base.loadMore"),onOnNextPage:a(x),button:"","show-icon":"","full-width":""},null,8,["loading","frist-loaded","is-infinite-disabled","label","onOnNextPage"]))],64))],64)):(r(),c(a(n),{key:0}))]),_:1})]),_:1})]),_:1}))}});export{Ce as default};
