const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PdfView-oCrXUtMk.js","assets/index-Dce6WYZc.js","assets/index-Dx9QcfFl.css","assets/BaseDialog.vue_vue_type_script_setup_true_lang-DLT9mTLF.js","assets/Ellipsis-B-5cwQGv.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/Ellipsis-D-gyw0_d.css","assets/FileManagerService-BFYoMsPO.js","assets/useAxios-GzNkkIuR.js","assets/_commonjsHelpers-D6-XlEtG.js","assets/index-xD7E-iT4.js","assets/SkeletonCard.vue_vue_type_script_setup_true_lang-SxkCFxU7.js","assets/BaseCard-D-ucc8ak.js","assets/BaseCard-jdQL2hgZ.css","assets/PhotoView-CmEwA9RJ.js","assets/ClosePopup-C1ZakuAd.js","assets/BaseAvatar-fsv0T6h6.js","assets/BaseImage-DVaE0Yxy.js","assets/BaseImage-BAIhGAoy.css","assets/BaseAvatar-DtUimqr1.css","assets/PhotoView-D_T9swLQ.css"])))=>i.map(i=>d[i]);
import{d as G,ai as R,aj as U,u as Q,k as s,b5 as J,Y as g,M as j,o as f,c as P,T as N,ak as V,at as D,j as Z,C as K,w as d,e as u,ad as A,a as x,a3 as O,W as E,Z as B,_ as k}from"./index-Dce6WYZc.js";import{_ as F}from"./FilesPreviewItem.vue_vue_type_script_setup_true_lang-ChB3fQMv.js";import{_ as X}from"./FilesPreviewItemAlt.vue_vue_type_script_setup_true_lang-aInk5iRZ.js";import{_ as ee}from"./BaseScrollArea.vue_vue_type_script_setup_true_lang-Bz1OW65Q.js";import{u as ie}from"./useAppMeta-CypY8g1w.js";import{F as ae,f as te,c as se,d as le,e as oe,h as fe,i as me}from"./FileManagerService-BFYoMsPO.js";import{_ as ne}from"./BasePage.vue_vue_type_script_setup_true_lang-id5ohpUP.js";import{B as H}from"./BaseCard-D-ucc8ak.js";import"./BaseImage-DVaE0Yxy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-meta-piHr_0Um.js";import"./useAxios-GzNkkIuR.js";import"./_commonjsHelpers-D6-XlEtG.js";const re={key:0},ue=G({__name:"FileView",props:R({title:{},item:{},imageList:{},selectIndex:{},fetch:{type:Boolean,default:!1},showArrow:{type:Boolean,default:!0},isBlob:{type:Boolean,default:!1}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:["update:show"],setup(T){const z=V(()=>D(()=>import("./PdfView-oCrXUtMk.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),C=V(()=>D(()=>import("./PhotoView-CmEwA9RJ.js"),__vite__mapDeps([14,1,2,15,7,8,9,16,17,5,18,19,20]))),t=T,S=U(T,"show"),{appLoading:I}=Q(),{downloadCdnData:M}=ae(),n=s(!1),r=s(void 0),p=s(),w=s([]),b=s(0);J(async()=>{if(I(),await _(),t.selectIndex!=null&&t.selectIndex>=0&&(b.value=t.selectIndex),r.value=="pdf"){if(t.item.file){const e=await te(t.item.file);e&&(p.value=e)}else p.value=t.item.filePath;n.value=!0}else r.value=="image"?(t.imageList&&t.imageList.length>0?w.value.push(...t.imageList):w.value.push(t.item),n.value=!0):(await v(),c());I(!1)});const v=async()=>{const e=t.item;if(!e||!e.filePath)return c(),new Promise(l=>l(!1));if(t.fetch)await M(e.filePath,e.fileName||t.title);else{const l=se(e.fileMime),h=oe(l);if(l&&h)if(t.isBlob)try{le(e.filePath,e.fileName||h)}catch(y){console.error(y)}else try{fe(e.filePath,e.fileName||h)}catch(y){console.error(y)}}return new Promise(l=>l(!0))},_=async()=>new Promise(e=>{const l=t.item;l||c(),r.value=me(l.fileMime),e(!0)}),c=()=>{S.value=!1};return(e,l)=>e.item&&r.value?(f(),g("div",re,[n.value&&r.value=="pdf"&&p.value?(f(),P(N(z),{key:0,src:p.value,"fetch-to-server":e.fetch||!1,show:n.value,"onUpdate:show":l[0]||(l[0]=h=>n.value=h),title:e.item.fileName||e.title||"",onOnClose:c},null,8,["src","fetch-to-server","show","title"])):r.value=="image"&&n.value?(f(),P(N(C),{key:1,"show-dialog":n.value,files:w.value,"selected-index":b.value,"show-delete-image":!1,maximized:!1,fetch:e.fetch||!1,showArrow:e.showArrow||!1,onOnClose:c},null,8,["show-dialog","files","selected-index","fetch","showArrow"])):j("",!0)])):j("",!0)}}),de={class:"row"},pe={class:"col-12 col-md-6"},ce={class:"row"},he={class:"col-12 col-md-6 q-px-md"},ge={class:"row"},we={class:"row"},De=G({__name:"image-view",setup(T){const z=V(()=>D(()=>import("./PhotoView-CmEwA9RJ.js"),__vite__mapDeps([14,1,2,15,7,8,9,16,17,5,18,19,20]))),C=V(()=>D(()=>import("./PdfView-oCrXUtMk.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),{t}=Z(),{setTitle:S}=ie();S(`Image View | ${t("app.name")}`);const I=s(0),M=s(!1),n=s([{id:1,fileMime:"image/jpeg",fileName:"Img001.jpg",filePath:"https://images.unsplash.com/photo-1741540420894-46bc55554fc3?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",fileThumbnailPath:"",fileSize:"2 MB",isImage:!0},{id:2,fileMime:"image/jpeg",fileName:"Img002.jpg",filePath:"https://images.unsplash.com/photo-1734983234384-5a3edcec48ce?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",fileThumbnailPath:"",fileSize:"2 MB",isImage:!0},{id:3,fileMime:"image/jpeg",fileName:"Img003.jpg",filePath:"https://images.unsplash.com/photo-1741531472824-b3fc55e2ff9c?q=80&w=1964&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",fileThumbnailPath:"",fileSize:"2 MB",isImage:!0},{id:4,fileMime:"image/jpeg",fileName:"Img004.jpg",filePath:"https://images.unsplash.com/photo-1741509541812-5d8f3e96df23?q=80&w=2127&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",fileThumbnailPath:"",fileSize:"2 MB",isImage:!0},{id:5,fileMime:"image/jpeg",fileName:"Img005.jpg",filePath:"https://images.unsplash.com/photo-1734630378523-c6735d798820?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",fileThumbnailPath:"",fileSize:"2 MB",isImage:!0},{id:6,fileMime:"image/jpeg",fileName:"Img006.jpg",filePath:"https://images.pexels.com/photos/21294005/pexels-photo-21294005/free-photo-of-portrait-of-woman-blowing-dandelion-flower.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",fileThumbnailPath:"",fileSize:"2 MB",isImage:!0},{id:7,fileMime:"image/jpeg",fileName:"Img007.jpg",filePath:"https://images.pexels.com/photos/27869817/pexels-photo-27869817/free-photo-of-two-women-sitting-on-a-couch-together.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",fileThumbnailPath:"",fileSize:"2 MB",isImage:!0},{id:8,fileMime:"image/jpeg",fileName:"Img008.jpg",filePath:"https://images.pexels.com/photos/28924817/pexels-photo-28924817/free-photo-of-hong-kong-island-dazzling-night-skyline.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",fileThumbnailPath:"",fileSize:"2 MB",isImage:!0},{id:9,fileMime:"image/jpeg",fileName:"Img009.jpg",filePath:"https://images.pexels.com/photos/29008754/pexels-photo-29008754/free-photo-of-scenic-desert-highway-at-sunrise-in-utah.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",fileThumbnailPath:"",fileSize:"2 MB",isImage:!0},{id:10,fileMime:"image/jpeg",fileName:"Img010.jpg",filePath:"https://images.pexels.com/photos/25244460/pexels-photo-25244460/free-photo-of-a-fashionable-young-woman-standing-on-a-meadow.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",fileThumbnailPath:"",fileSize:"2 MB",isImage:!0},{id:11,fileMime:"image/jpeg",fileName:"Img011.jpg",filePath:"https://images.pexels.com/photos/27467770/pexels-photo-27467770/free-photo-of-laptop-and-camera-on-desk.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",fileThumbnailPath:"",fileSize:"2 MB",isImage:!0},{id:12,fileMime:"image/jpeg",fileName:"Img011.jpg",filePath:"https://images.pexels.com/photos/28271613/pexels-photo-28271613/free-photo-of-a-car-mirror-is-shown-in-the-side-view-of-a-road.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",fileThumbnailPath:"",fileSize:"2 MB",isImage:!0}]),r=s(!1),p=s(),w=s(),b=s([{id:1,fileMime:"application/pdf",fileName:"Trace-based Just-in-Time Type Specialization for Dynamic Languages",filePath:"https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf",fileThumbnailPath:"",fileSize:"2 MB",isImage:!1}]),v=s(!1),_=s(0),c=s([]),e=s(),l=s(n.value.concat(b.value)),h=async m=>{console.log("onImgPreviewClick",m),I.value=m,M.value=!0},y=async m=>{console.log("onPdfPreviewClick",m);const i=b.value[m];i&&(p.value=i.filePath,w.value=i.fileName,r.value=!0)},q=()=>{p.value=void 0,w.value=void 0,r.value=!1},W=async m=>{console.log("onMixPreviewClick",m),v.value=!1,_.value=0,c.value=[];const i=l.value[m];i&&(i.isImage&&await Y(i),e.value=i,v.value=!0)},$=K(()=>l.value.filter(m=>m.isImage)),Y=m=>new Promise(i=>{const a=$.value.findIndex(o=>o.id==m.id);if(a>=0){const o=$.value;for(const L of o)L&&c.value.push(L);_.value=a}i(!0)});return(m,i)=>(f(),P(ne,{padding:""},{default:d(()=>[u(H,{title:"Image Only"},{default:d(()=>[u(A,null,{default:d(()=>[x("div",de,[x("div",pe,[u(O,{header:""},{default:d(()=>i[4]||(i[4]=[E("Grid")])),_:1}),x("div",ce,[(f(!0),g(B,null,k(n.value,(a,o)=>(f(),g("div",{class:"col-4 col-md-3 q-pa-xs",key:`img-${o}-${a.fileName}`},[u(F,{style:{"border-radius":"10px"},item:a,index:o,"show-delete":!1,"show-tooltip":"","use-thumbnail":!1,"image-size":"100%","show-name":!1,"show-size":!1,onOnClick:h},null,8,["item","index"])]))),128))])]),x("div",he,[u(O,{header:""},{default:d(()=>i[5]||(i[5]=[E("List")])),_:1}),u(ee,{height:"310px"},{default:d(()=>[(f(!0),g(B,null,k(n.value,(a,o)=>(f(),P(X,{key:`img-${o}-${a.fileName}`,item:a,index:o,clickable:"",dense:"","show-delete":!0,"show-name":"","show-size":"",onOnClick:h},null,8,["item","index"]))),128))]),_:1})])])]),_:1})]),_:1}),u(H,{title:"Pdf View"},{default:d(()=>[u(A,null,{default:d(()=>[i[6]||(i[6]=x("div",{class:"text-h6 q-mb-md"},"Pdf View",-1)),x("div",ge,[(f(!0),g(B,null,k(b.value,(a,o)=>(f(),g("div",{class:"col-4 col-md-2 q-pa-xs",key:`impdfg-${o}-${a.id}`},[u(F,{style:{"border-radius":"10px"},item:a,index:o,"show-delete":!1,"show-tooltip":"","show-name":"","show-size":"",onOnClick:y},null,8,["item","index"])]))),128))])]),_:1})]),_:1}),u(H,{title:"Mix item View"},{default:d(()=>[u(A,null,{default:d(()=>[x("div",we,[(f(!0),g(B,null,k(l.value,(a,o)=>(f(),g("div",{class:"col-4 col-md-2 q-pa-xs",key:`impdfg-${o}-${a.fileName}`},[u(F,{style:{"border-radius":"10px"},item:a,index:o,"show-delete":!1,"show-tooltip":"","show-name":"","show-size":"","image-size":"100%",linesName:2,onOnClick:W},null,8,["item","index"])]))),128))])]),_:1})]),_:1}),M.value?(f(),P(N(z),{key:0,"show-dialog":M.value,files:n.value,"selected-index":I.value,"show-delete-image":!1,maximized:!1,"show-arrow":"",onOnClose:i[0]||(i[0]=()=>M.value=!1)},null,8,["show-dialog","files","selected-index"])):j("",!0),r.value&&p.value?(f(),P(N(C),{key:1,src:p.value,show:r.value,"onUpdate:show":i[1]||(i[1]=a=>r.value=a),title:w.value,onOnClose:i[2]||(i[2]=()=>q)},null,8,["src","show","title"])):j("",!0),v.value&&e.value?(f(),P(ue,{key:2,item:e.value,"image-list":c.value,"select-index":_.value,title:"Images","show-arrow":!0,show:v.value,"onUpdate:show":i[3]||(i[3]=a=>v.value=a)},null,8,["item","image-list","select-index","show"])):j("",!0)]),_:1}))}});export{De as default};
