const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChangePasswordForm-DJ-URALk.js","assets/index-D_to5wmt.js","assets/index-DurpC8Fs.css","assets/QBar-PMjTcIWy.js","assets/useValidation-jNRx7Mqs.js","assets/UserService-BMcjQIdV.js","assets/useAxios-BVW2bjHp.js","assets/BaseResult-Dr8oinwm.js","assets/BaseResult.vue_vue_type_script_setup_true_lang-FrnM8Hl_.js","assets/BaseToggle-e5O9zh2Y.js","assets/BaseToggle.vue_vue_type_script_setup_true_lang-Sg3I7Jxh.js"])))=>i.map(i=>d[i]);
import{l as ce,c1 as pe,u as ve,a as _e,r as _,o as fe,c as ye,m as c,n as d,w as s,x as l,a0 as e,y as L,t as r,ac as f,X as y,aV as be,aB as R,au as i,B as Ae,aq as ge,a4 as p,cW as Ve,cP as E,$ as O,aA as P,bc as he,a3 as b,bq as ke,az as $,bh as we,aF as U,a2 as Ce,aJ as N,bd as z,af as J,aY as M,bJ as X,ar as K,as as A,at as W,cV as Y,ad as j,J as Re,V as Be,aI as Q}from"./index-D_to5wmt.js";import{Q as Pe}from"./QBanner--GI1Amz6.js";import{u as Qe,_ as xe}from"./useCrudForm-BGeX5g_z.js";import{u as Fe}from"./useAppMeta-B2j8xE5P.js";import{u as Se}from"./useValidation-jNRx7Mqs.js";import{u as qe}from"./useAxios-BVW2bjHp.js";import"./BaseButton-RINx7LWR.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-meta-Bp6Eaay9.js";const Te=()=>(qe(),{findAllBackendRole:async()=>new Promise(n=>{setTimeout(()=>{n(null)},500)}),findAllSystemFrontend:async()=>new Promise(n=>{setTimeout(()=>{n(null)},500)}),findAllByCompanyAndFrontend:async n=>new Promise(g=>{setTimeout(()=>{g(null)},500)}),findAllRoleByCompany:async()=>new Promise(n=>{setTimeout(()=>{n(null)},500)}),findAllByAuthAndFrontend:async()=>new Promise(n=>{setTimeout(()=>{n(null)},500)})}),De={class:"row"},Ie={key:0,class:"col-12 q-pa-md text-center"},Le=["src"],Ee={class:"col-12 col-md-6 q-pa-md"},Oe={class:"col-12 col-md-6 q-pa-md"},$e={key:1,class:"col-12 col-md-6 q-pa-md"},Ue={key:2,class:"col-12 col-md-6 q-pa-md"},Ne={class:"col-12 col-md-6 q-pa-md"},ze={class:"row"},Je={class:"col-12 col-md-6"},Me={class:"q-px-md"},Xe={class:"col-12 col-md-6"},Ke={class:"q-px-md"},nl=ce({__name:"view",setup(G){const x=P(()=>Q(()=>import("./ChangePasswordForm-DJ-URALk.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),F=P(()=>Q(()=>import("./BaseResult-Dr8oinwm.js"),__vite__mapDeps([7,8,1,2]))),S=P(()=>Q(()=>import("./BaseToggle-e5O9zh2Y.js"),__vite__mapDeps([9,10,1,2]))),{dark:q}=pe(),{t:n}=ve(),{required:g,requireEmail:H,requireUsername:Z}=Se(),{appLoading:T}=_e(),{findAllBackendRole:ee}=Te(),v=_([]),V=_(""),h=_(!1),{crudAction:k,onBack:le,loading:w,onSubmit:ae,crudEntity:m,onDelete:ne,preFectData:oe,crudName:se,crudId:te}=Qe({crudName:"user",apiEndpoint:"/api",fectchDataOnLoad:!1,backToPreviousPath:!0},{id:null,email:"",username:null,active:!0,password:null,userData:null,selectedRoles:[]}),t=_(m.value);T(),Fe({additionalTitle:n("crudAction."+k.value)}),fe(()=>{ue()});const ue=async()=>{const u=await ee();u&&(v.value=u),await oe(),t.value=m.value,T(!1)},D=ye(()=>{const u=v.value,a=V.value?V.value.toLowerCase().trim():null;return a?u.filter(o=>o.name&&o.name.toString().toLowerCase().includes(a)):u}),de=u=>{const a=v.value.find(o=>o.id===u);return a&&a.name?a.name:"unknown"},re=u=>{m.value&&m.value.selectedRoles&&m.value.selectedRoles.splice(u,1)},ie=()=>{me(h.value)},me=u=>{if(m.value.selectedRoles=[],u)for(let a=0;a<v.value.length;a++){const o=v.value[a];o&&m.value.selectedRoles.push(o.id)}},B=_(!1);return(u,a)=>(d(),c(Be,{padding:""},{default:s(()=>[l(xe,{icon:e(L),title:e(n)("model_user"),"crud-action":e(k),"crud-name":e(se),loading:e(w),onOnBack:e(le),onOnSubmit:e(ae),onOnDelete:e(ne)},{crudFromContent:s(()=>[r("div",De,[t.value.avatar?(d(),f("div",Ie,[l(be,{size:"125px",class:"shadow-5"},{default:s(()=>[r("img",{src:t.value.avatar.thumbnail,all:"user_img"},null,8,Le)]),_:1})])):y("",!0),r("div",Ee,[l(R,{readonly:e(w),outlined:"",counter:"",maxlength:"100",modelValue:t.value.email,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.email=o),label:e(n)("model_user_email"),rules:[e(g),e(H)]},{prepend:s(()=>[l(i,{name:e(Ae)},null,8,["name"])]),_:1},8,["readonly","modelValue","label","rules"])]),r("div",Oe,[l(R,{readonly:e(w),outlined:"",counter:"",maxlength:"20",modelValue:t.value.username,"onUpdate:modelValue":a[1]||(a[1]=o=>t.value.username=o),label:e(n)("model_user_username"),rules:[e(Z)]},{prepend:s(()=>[l(i,{name:e(L)},null,8,["name"])]),_:1},8,["readonly","modelValue","label","rules"]),l(Pe,{class:ge(["q-my-sm",e(q).isActive?"bg-grey-9":"bg-grey-3"]),dense:""},{avatar:s(()=>[l(i,{name:e(Ve),color:"primary"},null,8,["name"])]),default:s(()=>[r("p",null,p(`${e(n)("helper.username1")}, ${e(n)("helper.username2")}, ${e(n)("helper.username3")}, ${e(n)("helper.username4")}, ${e(n)("helper.username5")}`),1)]),_:1},8,["class"])]),e(k)!="view"?(d(),f("div",$e,[l(R,{readonly:e(w),outlined:"",type:"password",modelValue:t.value.password,"onUpdate:modelValue":a[2]||(a[2]=o=>t.value.password=o),label:e(n)("model_user_login_password"),rules:[e(g)]},{prepend:s(()=>[l(i,{name:e(E)},null,8,["name"])]),_:1},8,["readonly","modelValue","label","rules"])])):y("",!0),e(k)=="view"?(d(),f("div",Ue,[l(O,{onClick:a[3]||(a[3]=o=>B.value=!0),flat:"",color:"primary",icon:e(E),label:e(n)("base.changePassword")},null,8,["icon","label"])])):y("",!0),r("div",Ne,[l(e(S),{label:e(n)("base.enable"),modelValue:t.value.active,"onUpdate:modelValue":a[4]||(a[4]=o=>t.value.active=o)},null,8,["label","modelValue"])])]),l(he),r("div",ze,[r("div",Je,[r("div",Me,[l(i,{name:e(ke),size:"sm"},null,8,["name"]),b(" "+p(e(n)("model_role")),1)]),l($,null,{default:s(()=>[l(R,{rounded:"",filled:"",outlined:"",modelValue:V.value,"onUpdate:modelValue":a[6]||(a[6]=o=>V.value=o),label:e(n)("base.search")},{prepend:s(()=>[l(U,{modelValue:h.value,"onUpdate:modelValue":a[5]||(a[5]=o=>h.value=o),onClick:ie},{default:s(()=>[l(Ce,null,{default:s(()=>[b(p(h.value?e(n)("base.deselectAll"):e(n)("base.selectAll")),1)]),_:1})]),_:1},8,["modelValue"])]),append:s(()=>[l(i,{name:e(we)},null,8,["name"])]),_:1},8,["modelValue","label"]),l(N,{style:{height:"250px"}},{default:s(()=>[D.value.length>0?(d(),c(z,{key:0,dense:""},{default:s(()=>[(d(!0),f(J,null,M(D.value,(o,C)=>X((d(),c(K,{key:C,tag:"label"},{default:s(()=>[l(A,{avatar:""},{default:s(()=>[l(U,{modelValue:t.value.selectedRoles,"onUpdate:modelValue":a[7]||(a[7]=I=>t.value.selectedRoles=I),val:o.id},null,8,["modelValue","val"])]),_:2},1024),l(A,null,{default:s(()=>[l(W,null,{default:s(()=>[b(p(o.name?o.name:"unknown"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[Y]])),128))]),_:1})):y("",!0)]),_:1})]),_:1})]),r("div",Xe,[r("div",Ke,[l(i,{color:"positive",name:e(j),size:"sm"},null,8,["name"]),b(" "+p(e(n)("userRoleSelected")),1)]),t.value.selectedRoles?(d(),c($,{key:0},{default:s(()=>[l(N,{style:{height:"250px"}},{default:s(()=>[t.value.selectedRoles.length>0?(d(),c(z,{key:0,dense:""},{default:s(()=>[(d(!0),f(J,null,M(t.value.selectedRoles,(o,C)=>X((d(),c(K,{key:C},{default:s(()=>[l(A,{avatar:""},{default:s(()=>[l(i,{color:"primary",name:e(j)},null,8,["name"])]),_:1}),l(A,null,{default:s(()=>[l(W,null,{default:s(()=>[b(p(de(o)),1)]),_:2},1024)]),_:2},1024),l(A,{side:""},{default:s(()=>[l(O,{flat:"",round:"",color:"negative",onClick:I=>re(C),icon:e(Re)},null,8,["onClick","icon"])]),_:2},1024)]),_:2},1024)),[[Y]])),128))]),_:1})):(d(),c(e(F),{key:1,status:"empty",description:e(n)("userRoleNotFound")},null,8,["description"]))]),_:1})]),_:1})):y("",!0)])])]),_:1},8,["icon","title","crud-action","crud-name","loading","onOnBack","onOnSubmit","onOnDelete"]),l(e(x),{dialog:B.value,"user-id":e(te),onOnClose:a[8]||(a[8]=o=>B.value=!1)},null,8,["dialog","user-id"])]),_:1}))}});export{nl as default};
