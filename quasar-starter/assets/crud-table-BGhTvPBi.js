const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BaseResult-DcsXYtbk.js","assets/BaseResult.vue_vue_type_script_setup_true_lang-DkfpcqgX.js","assets/index-UTJsbmGU.js","assets/index-Dx9QcfFl.css","assets/BaseDatePicker-DOhhL_Qf.js","assets/BaseDatePicker.vue_vue_type_script_setup_true_lang-B4zvbaKT.js","assets/ClosePopup-CwsVPSEh.js","assets/BaseToggle-uwR2nOQO.js","assets/BaseToggle.vue_vue_type_script_setup_true_lang-Bsa2XRTA.js","assets/CrudApiListHeaderFilter-B7d7t0Bv.js"])))=>i.map(i=>d[i]);
import{u as Le}from"./useAppMeta-BXY7KmSo.js";import{d as ue,eD as Qe,j as ye,c,o as a,J as V,w as r,e as l,bo as Pe,aP as Me,a0 as le,R as d,Y as Fe,N as g,O as f,K as s,aO as re,S as v,T as D,bd as G,W as K,X as I,a as y,F as m,a1 as N,ah as be,M as C,eE as Oe,V as M,c0 as Ce,u as Ve,cs as ze,k as U,s as j,r as E,a6 as oe,d4 as qe,d5 as De,al as we,ae as Ae,aT as ae,ci as Te,ad as ne,d8 as Xe,da as Ee,as as xe,$ as We,bD as je,bE as Ge,ak as Ke,aA as Je,eF as Ye,aj as $e,eG as Ze,eH as He,n as et,g as tt,E as Se,a4 as ot,af as at,eI as nt,U as Be,eJ as st,ay as lt,av as fe,am as se,eK as rt,cG as ut,eL as it,eM as dt,eN as ct,eO as mt,eP as pt,a$ as ht,f as vt,eQ as ft}from"./index-UTJsbmGU.js";import{U as yt}from"./UserService-CReKf75O.js";import{_ as gt}from"./BasePage.vue_vue_type_script_setup_true_lang-BoDIjOxp.js";import{C as J}from"./ClosePopup-CwsVPSEh.js";import{u as Ne}from"./useSort-C6xh4vZz.js";import{_ as kt}from"./Paging.vue_vue_type_script_setup_true_lang-Yekb9_k7.js";import{B as bt}from"./BaseCard-DoN1hG9u.js";import{u as wt}from"./usePaging-Ba1kJfgC.js";import{_ as At}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-meta-BDBs0vT6.js";import"./useAxios-D87ZUWP6.js";const Tt=ue({__name:"BaseSort",props:{fields:{type:Array,default:()=>[]},sort:{type:Object,default:null},icon:{type:String,default:Qe},label:{type:String,default:void 0},width:{type:Number,default:200},listDense:{type:Boolean,default:!0},btnRound:{type:Boolean,default:!0}},emits:["on-sort-column","on-sort-mode"],setup(n,{emit:O}){const z=n,L=O,{t:X}=ye(),{sortMode:Y}=Ne(),w=k=>{k&&z.sort.column!==k&&L("on-sort-column",k)},p=k=>{k&&z.sort.mode!==k&&L("on-sort-mode",k)};return(k,$)=>(a(),c(V,{class:"q-mx-sm",flat:"",round:n.btnRound,icon:n.icon,label:n.label},{default:r(()=>[l(Pe,null,{default:r(()=>[l(Me,{style:le(`min-width: ${n.width}px`),dense:n.listDense},{default:r(()=>[l(Fe,{header:""},{default:r(()=>[g(f(s(X)("sort.sort")),1)]),_:1}),l(re),(a(!0),d(v,null,D(n.fields,(T,S)=>G((a(),c(K,{clickable:"",key:"sort-fields-"+S,onClick:B=>w(T.value)},{default:r(()=>[l(I,null,{default:r(()=>[y("span",null,[g(f(T.label),1),n.sort.column===T.value?(a(),c(N,{key:0,class:"q-ml-sm",name:s(be)},null,8,["name"])):m("",!0)])]),_:2},1024)]),_:2},1032,["onClick"])),[[J]])),128)),l(re),(a(!0),d(v,null,D(s(Y),(T,S)=>G((a(),c(K,{clickable:"",key:"sort-mode-"+S,onClick:B=>p(T.value)},{default:r(()=>[l(I,null,{default:r(()=>[y("span",null,[g(f(T.label)+" ",1),n.sort.mode===T.value?(a(),c(N,{key:0,class:"q-ml-sm",name:s(be)},null,8,["name"])):m("",!0)])]),_:2},1024)]),_:2},1032,["onClick"])),[[J]])),128))]),_:1},8,["style","dense"])]),_:1}),l(C,null,{default:r(()=>[g(f(s(X)("sort.sort")),1)]),_:1})]),_:1},8,["round","icon","label"]))}}),Et={class:"text-left",style:{width:"150px"}},$t={class:"text-right"},St={class:"text-right"},Bt={class:"text-right"},Pt={class:"text-right"},Mt={class:"text-right"},Ot={class:"text-left"},Vt={class:"text-right"},Nt={class:"text-right"},_t={class:"text-right"},It={class:"text-right"},Ut={class:"text-right"},Rt=ue({__name:"SkeletonTable",props:{no:{default:5},flat:{type:Boolean,default:!0}},setup(n){return(O,z)=>(a(),c(Oe,{flat:O.flat},{default:r(()=>[y("thead",null,[y("tr",null,[y("th",Et,[l(M,{animation:"blink",type:"text"})]),y("th",$t,[l(M,{animation:"blink",type:"text"})]),y("th",St,[l(M,{animation:"blink",type:"text"})]),y("th",Bt,[l(M,{animation:"blink",type:"text"})]),y("th",Pt,[l(M,{animation:"blink",type:"text"})]),y("th",Mt,[l(M,{animation:"blink",type:"text"})])])]),y("tbody",null,[(a(!0),d(v,null,D(O.no,L=>(a(),d("tr",{key:L},[y("td",Ot,[l(M,{animation:"blink",type:"text",width:"85px"})]),y("td",Vt,[l(M,{animation:"blink",type:"text",width:"50px"})]),y("td",Nt,[l(M,{animation:"blink",type:"text",width:"35px"})]),y("td",_t,[l(M,{animation:"blink",type:"text",width:"65px"})]),y("td",It,[l(M,{animation:"blink",type:"text",width:"25px"})]),y("td",Ut,[l(M,{animation:"blink",type:"text",width:"85px"})])]))),128))])]),_:1},8,["flat"]))}});var b=(n=>(n[n.TEXT=0]="TEXT",n[n.HTML=1]="HTML",n[n.IMAGE=2]="IMAGE",n[n.AVATAR=3]="AVATAR",n[n.STATUS=4]="STATUS",n[n.DATE=5]="DATE",n[n.DATE_TIME=6]="DATE_TIME",n[n.LINKABLE=7]="LINKABLE",n[n.BASE_TOOL=8]="BASE_TOOL",n[n.NUMBER_FORMAT=9]="NUMBER_FORMAT",n[n.ICON=10]="ICON",n[n.FUNCTION=11]="FUNCTION",n))(b||{}),R=(n=>(n[n.TEXT=0]="TEXT",n[n.NUMBER=1]="NUMBER",n[n.BOOLEAN=2]="BOOLEAN",n[n.DATE=3]="DATE",n[n.DATETIME=4]="DATETIME",n))(R||{});const Lt={class:"col"},Qt={class:"row items-center"},Ft={class:"text-h6"},Ct={class:"row"},zt={key:0,class:"col-12 col-md-4 q-pa-sm"},qt={class:"q-gutter-md row items-center"},Dt={key:0},Xt={key:0},xt={key:1},Wt={key:0,class:"text-center"},jt={key:0,class:"text-center"},Gt={key:0},Kt=["alt"],Jt=ue({__name:"CrudApiList",props:{crudName:{},viewPermission:{},managePermission:{},byPassPermission:{type:Boolean,default:!1},title:{},icon:{default:()=>Ce},list:{},headers:{},sort:{},pages:{},fristLoad:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},showPaging:{type:Boolean,default:!0},showCheckbox:{type:Boolean,default:!0},showNewBtn:{type:Boolean,default:!0},showSearchBtn:{type:Boolean,default:!0},showSearchTextBox:{type:Boolean,default:!1},showThreeDot:{type:Boolean,default:!0},showFilter:{type:Boolean,default:!0},showSort:{type:Boolean,default:!0},fullWidth:{type:Boolean,default:!0},tableSeperator:{default:"horizontal"},rowClickable:{type:Boolean,default:!0}},emits:["on-page-no-change","on-items-perpage-change","update-search","on-sort","on-sort-mode","on-item-copy","on-item-click","on-item-delete","on-new-form","on-reload","on-advance-search","on-keyword-search"],setup(n,{emit:O}){const z=ne(()=>se(()=>import("./BaseResult-DcsXYtbk.js"),__vite__mapDeps([0,1,2,3]))),L=ne(()=>se(()=>import("./BaseDatePicker-DOhhL_Qf.js"),__vite__mapDeps([4,5,2,3,6]))),X=ne(()=>se(()=>import("./BaseToggle-uwR2nOQO.js"),__vite__mapDeps([7,8,2,3]))),Y=ne(()=>se(()=>import("./CrudApiListHeaderFilter-B7d7t0Bv.js"),__vite__mapDeps([9,2,3]))),w=O,{t:p,locale:k}=ye(),{searchOperations:$,inputSanitizeHtml:T}=Ve(),S=ze(),B=U(n.pages),_=U(""),x=U(!1),Q=U(!1),F=U([]),ie=()=>{de(x.value)},de=t=>{if(F.value=[],t)for(let u=0;u<n.list.length;u++){const e=n.list[u];e&&F.value.push(e.id)}},ce=()=>{F.value.length>0&&ee(F.value,!1)},ee=(t,u)=>{w("on-item-delete",t,u)},te=t=>{const e=n.list[t];if(e)return e},A=(t,u)=>{const e=te(u);return!t||!e?null:t.split(".").length>1?rt(e,t):ut(e[t])?null:e[t]},me=(t,u)=>{if(!t)return!1;const e=A(t,u);return e?e===!0:!1},pe=j(()=>{const t=n.headers.filter(e=>e.options&&e.options.sortable===!0),u=[];for(const e of t)u.push({value:e.options.sortColunm?e.options.sortColunm:e.column,label:e.translateLabel==null||e.translateLabel?p(e.label):e.label});return u}),Z=j(()=>n.headers&&n.headers.length>0?n.headers.filter(t=>t.options&&t.options.fillable===!0):n.headers),i=j(()=>n.headers&&n.headers.length>0?n.headers.filter(t=>t.options&&t.options.searchable===!0):n.headers),q=()=>{ge(),w("on-reload")},ge=()=>{if(i.value.length>0)for(const t of i.value)t.options&&(t.type==b.STATUS?t.options.searchModel=!0:t.options.searchModel=null)},H=()=>{_.value="";let t="";if(i.value.length>0){for(const u of i.value)if(u.options){const e=u.options.searchOperation,h=u.options.searchModel,o=u.options.searchColunm?u.options.searchColunm:u.column;if(e!=null&&h!=null){let W=T(h);u.type==b.STATUS&&(W=h),t&&(t+=","),t+=`${o}${e}${W}`}}}w("on-advance-search",t)},he=()=>{_.value?.trim().length>=it&&w("on-keyword-search",T(_.value))},ve=j(()=>n.byPassPermission?!0:n.viewPermission?S.isHavePermission(n.viewPermission):n.crudName?S.isHavePermission([`${n.crudName}_view`]):!0),P=j(()=>n.byPassPermission?!0:n.managePermission?S.isHavePermission(n.managePermission):n.crudName?S.isHavePermission([`${n.crudName}_manage`]):!0),_e=(t,u=void 0)=>t?dt(t,u||ct,k.value):void 0,Ie=(t,u=void 0)=>t?mt(t,u||pt,k.value):void 0,Ue=async t=>{t&&B.value&&(B.value.current=t,w("on-page-no-change",t))},Re=async t=>{t&&B.value&&(B.value.itemsPerPage=t,w("on-items-perpage-change",t))};return(t,u)=>(a(),d("div",{class:Be(["row",{"content-limit":!t.fullWidth}])},[y("div",Lt,[l(bt,null,{default:r(()=>[E(t.$slots,"headerCard"),l(oe,null,{default:r(()=>[l(qe,null,{default:r(()=>[l(De,null,{default:r(()=>[E(t.$slots,"title",{},()=>[t.title?(a(),d(v,{key:0},[l(N,{name:t.icon},null,8,["name"]),g(" "+f(t.title),1)],64)):m("",!0)])]),_:3}),y("div",Qt,[t.showSearchTextBox&&!Q.value?(a(),c(we,{key:0,onSubmit:he},{default:r(()=>[l(Ae,{dense:"",outlined:"",rounded:"",clearable:"",style:{width:"350px"},modelValue:_.value,"onUpdate:modelValue":u[0]||(u[0]=e=>_.value=e),placeholder:s(p)("base.searchHelp3")},{prepend:r(()=>[l(N,{name:s(ae)},null,8,["name"])]),_:1},8,["modelValue","placeholder"])]),_:1})):m("",!0),E(t.$slots,"extraBeforeInnerToolbar"),P.value&&t.showNewBtn?(a(),c(V,{key:1,class:"q-ml-xs",flat:"",round:"",icon:s(Te),onClick:u[1]||(u[1]=e=>t.$emit("on-new-form"))},{default:r(()=>[l(C,null,{default:r(()=>[g(f(s(p)("base.addNew")),1)]),_:1})]),_:1},8,["icon"])):m("",!0),t.showSearchBtn?(a(),c(V,{key:2,class:"q-ml-xs",flat:"",round:"",icon:s(ae),onClick:u[2]||(u[2]=e=>Q.value=!Q.value)},{default:r(()=>[l(C,null,{default:r(()=>[g(f(s(p)("base.search")),1)]),_:1})]),_:1},8,["icon"])):m("",!0),t.showSort&&t.sort?(a(),c(Tt,{key:3,sort:t.sort,fields:pe.value,onOnSortColumn:u[3]||(u[3]=e=>t.$emit("on-sort",e)),onOnSortMode:u[4]||(u[4]=e=>t.$emit("on-sort-mode",e))},null,8,["sort","fields"])):m("",!0),t.showFilter?(a(),c(s(Y),{key:4,headers:t.headers},null,8,["headers"])):m("",!0),t.showThreeDot?(a(),c(V,{key:5,flat:"",round:"",dense:"",icon:s(Xe)},{default:r(()=>[l(Pe,null,{default:r(()=>[l(Me,{style:{"min-width":"200px"},dense:""},{default:r(()=>[P.value&&t.showNewBtn?G((a(),c(K,{key:0,clickable:"",onClick:u[5]||(u[5]=e=>t.$emit("on-new-form"))},{default:r(()=>[l(I,{avatar:""},{default:r(()=>[l(N,{name:s(Te)},null,8,["name"])]),_:1}),l(I,null,{default:r(()=>[g(f(s(p)("base.addNew")),1)]),_:1})]),_:1})),[[J]]):m("",!0),P.value&&t.showCheckbox?G((a(),c(K,{key:1,clickable:"",onClick:ce},{default:r(()=>[l(I,{avatar:""},{default:r(()=>[l(N,{name:s(Ee)},null,8,["name"])]),_:1}),l(I,null,{default:r(()=>[g(f(s(p)("base.deleteSeleted")),1)]),_:1})]),_:1})),[[J]]):m("",!0),t.showSearchBtn?G((a(),c(K,{key:2,clickable:"",onClick:u[6]||(u[6]=e=>Q.value=!0)},{default:r(()=>[l(I,{avatar:""},{default:r(()=>[l(N,{name:s(ae)},null,8,["name"])]),_:1}),l(I,null,{default:r(()=>[g(f(s(p)("base.searchAdvance")),1)]),_:1})]),_:1})),[[J]]):m("",!0),l(re),G((a(),c(K,{clickable:"",onClick:u[7]||(u[7]=e=>t.$emit("on-reload"))},{default:r(()=>[l(I,{avatar:""},{default:r(()=>[l(N,{name:s(xe)},null,8,["name"])]),_:1}),l(I,null,{default:r(()=>[g(f(s(p)("base.reload")),1)]),_:1})]),_:1})),[[J]])]),_:1})]),_:1})]),_:1},8,["icon"])):m("",!0),E(t.$slots,"extraInnerToolbar")])]),_:3}),E(t.$slots,"extraToolbar")]),_:3}),Q.value?(a(),c(oe,{key:0,class:"q-mb-lg"},{default:r(()=>[l(We,{flat:"",bordered:""},{default:r(()=>[l(oe,null,{default:r(()=>[y("div",Ft,f(s(p)("base.search")),1)]),_:1}),l(we,{onSubmit:H,class:"q-pa-md"},{default:r(()=>[E(t.$slots,"topSearchExtra"),i.value.length>0?(a(),d(v,{key:0},[y("div",Ct,[E(t.$slots,"topInnerSearchExtra"),(a(!0),d(v,null,D(i.value,(e,h)=>(a(),d(v,{key:`advance-search-${h}`},[e.options?(a(),d("div",zt,[y("div",qt,[e.options?.searchType==s(R).TEXT||e.options?.searchType==s(R).NUMBER?(a(),c(Ae,{key:0,outlined:"",dense:"",modelValue:e.options.searchModel,"onUpdate:modelValue":o=>e.options.searchModel=o,type:e.options?.searchType==s(R).TEXT?"text":"number",label:e.translateLabel==null||e.translateLabel?s(p)(e.label):e.label,clearable:"",style:{width:"100%"}},{before:r(()=>[e.options.searchOperationReadonly?m("",!0):(a(),c(je,{key:0,dense:"",filled:"",label:e.translateLabel==null||e.translateLabel?s(p)(e.label):e.label,class:"q-mx-lg",modelValue:e.options.searchOperation,"onUpdate:modelValue":o=>e.options.searchOperation=o,options:s($),"option-value":"value","option-label":"text","emit-value":"","map-options":"",readonly:e.options.searchOperationReadonly,style:{"min-width":"150px"},"dropdown-icon":s(Ge)},null,8,["label","modelValue","onUpdate:modelValue","options","readonly","dropdown-icon"]))]),_:2},1032,["modelValue","onUpdate:modelValue","type","label"])):e.options?.searchType==s(R).BOOLEAN?(a(),c(s(X),{key:1,"use-checkbox":"",useLabelTitle:"",label:e.translateLabel==null||e.translateLabel?s(p)(e.label):e.label,modelValue:e.options.searchModel,"onUpdate:modelValue":o=>e.options.searchModel=o},null,8,["label","modelValue","onUpdate:modelValue"])):e.options?.searchType==s(R).DATE?(a(),d(v,{key:2},[e.options.searchModel!=null?(a(),c(s(L),{key:0,dense:"",modelValue:e.options.searchModel,"onUpdate:modelValue":o=>e.options.searchModel=o,label:e.translateLabel==null||e.translateLabel?s(p)(e.label):e.label},null,8,["modelValue","onUpdate:modelValue","label"])):m("",!0)],64)):m("",!0)])])):m("",!0)],64))),128)),E(t.$slots,"belowInnerSearchExtra")]),E(t.$slots,"belowSearchExtra"),l(re),l(Ke,{align:"center"},{default:r(()=>[l(V,{type:"submit",flat:"",icon:s(ae),label:s(p)("base.okay")},null,8,["icon","label"]),l(V,{flat:"",icon:s(Je),onClick:u[8]||(u[8]=e=>Q.value=!1),label:s(p)("base.close")},null,8,["icon","label"]),l(V,{flat:"",icon:s(Ye),onClick:q,label:s(p)("base.clear")},null,8,["icon","label"])]),_:1})],64)):m("",!0)]),_:3})]),_:3})]),_:3})):m("",!0),!t.fristLoad||t.loading?(a(),c(Rt,{key:1})):E(t.$slots,"table",{key:2},()=>[t.list.length>0?(a(),c(Oe,{key:0,separator:t.tableSeperator,flat:"",bordered:""},{default:r(()=>[y("thead",null,[E(t.$slots,"theader",{},()=>[y("tr",null,[P.value&&t.showCheckbox?(a(),d("th",Dt,[l($e,{modelValue:x.value,"onUpdate:modelValue":u[9]||(u[9]=e=>x.value=e),onClick:ie},{default:r(()=>[l(C,null,{default:r(()=>[g(f(x.value?s(p)("base.deselectAll"):s(p)("base.selectAll")),1)]),_:1})]),_:1},8,["modelValue"])])):m("",!0),(a(!0),d(v,null,D(Z.value,(e,h)=>(a(),d(v,{key:`tblHeader-${h}`},[e.type===s(b).BASE_TOOL?(a(),d(v,{key:0},[P.value||ve.value?(a(),d("th",Xt,f(e.translateLabel==null||e.translateLabel?s(p)(e.label):e.label),1)):m("",!0)],64)):(a(),d("th",xt,[e.options&&e.options.sortable?(a(),c(V,{key:0,onClick:o=>t.$emit("on-sort",e.options.sortColunm?e.options.sortColunm:e.column),flat:""},{default:r(()=>[t.sort&&t.sort.column==e.options.sortColunm||t.sort&&t.sort.column==e.column?(a(),c(N,{key:0,name:t.sort.mode=="desc"?s(Ze):s(He)},null,8,["name"])):m("",!0),g(" "+f(e.translateLabel==null||e.translateLabel?s(p)(e.label):e.label),1)]),_:2},1032,["onClick"])):(a(),d(v,{key:1},[g(f(e.translateLabel==null||e.translateLabel?s(p)(e.label):e.label),1)],64))]))],64))),128))])])]),y("tbody",null,[E(t.$slots,"tbody",et(tt({list:t.list,fillableHeaders:Z.value})),()=>[(a(!0),d(v,null,D(t.list,(e,h)=>(a(),d("tr",{key:`item-tr-${h}`},[P.value&&t.showCheckbox?(a(),d("td",Wt,[l($e,{modelValue:F.value,"onUpdate:modelValue":u[10]||(u[10]=o=>F.value=o),val:e.id},null,8,["modelValue","val"])])):m("",!0),(a(!0),d(v,null,D(Z.value,(o,W)=>(a(),d(v,{key:`item-body-${W}`},[o.options?(a(),d(v,{key:0},[o.type===s(b).BASE_TOOL?(a(),d("td",jt,[E(t.$slots,"baseTool",Se({ref_for:!0},{item:e,index:h}),()=>[P.value||ve.value?(a(),d(v,{key:0},[o.options&&o.options.editButton?(a(),d(v,{key:0},[P.value||ve.value?(a(),c(V,{key:0,onClick:ke=>t.$emit("on-item-click",h),color:"primary",icon:P.value?s(ot):s(at),flat:"",round:""},{default:r(()=>[l(C,null,{default:r(()=>[g(f(P.value?s(p)("base.edit"):s(p)("base.view")),1)]),_:1})]),_:2},1032,["onClick","icon"])):m("",!0)],64)):m("",!0),o.options&&o.options.copyButton?(a(),d(v,{key:1},[P.value?(a(),c(V,{key:0,onClick:ke=>t.$emit("on-item-copy",h),color:"primary",class:"q-ml-sm",icon:s(nt),flat:"",round:""},{default:r(()=>[l(C,null,{default:r(()=>[g(f(s(p)("base.copy")),1)]),_:1})]),_:2},1032,["onClick","icon"])):m("",!0)],64)):m("",!0),o.options&&o.options.deleteButton?(a(),d(v,{key:2},[P.value?(a(),c(V,{key:0,onClick:ke=>ee(h,!0),color:"negative",class:"q-ml-sm",icon:s(Ee),flat:"",round:""},{default:r(()=>[l(C,{class:"bg-negative"},{default:r(()=>[g(f(s(p)("base.delete")),1)]),_:1})]),_:2},1032,["onClick","icon"])):m("",!0)],64)):m("",!0)],64)):m("",!0)]),E(t.$slots,"additionalBaseTool",Se({ref_for:!0},{item:e,index:h}))])):(a(),d("td",{key:1,class:Be({"text-center":o.options&&o.options.align=="center","text-left":o.options&&o.options.align=="left","text-right":o.options&&o.options.align=="right","long-text-break":o.options&&o.options.maxWidth}),style:le({maxWidth:o.options&&o.options.maxWidth?o.options.maxWidth:""})},[o.type===s(b).TEXT?(a(),d(v,{key:0},[o.options&&o.options.toolTip?(a(),d("span",Gt,[g(f(o.column?A(o.column,h):"")+" ",1),l(C,null,{default:r(()=>[g(f(o.column?A(o.column,h):""),1)]),_:2},1024)])):(a(),d(v,{key:1},[g(f(o.column?A(o.column,h):""),1)],64))],64)):o.type===s(b).FUNCTION&&o.options&&o.options.func?(a(),d(v,{key:1},[o.column&&A(o.column,h)!=null?(a(),d(v,{key:0},[g(f(o.options.func(A(o.column,h))),1)],64)):m("",!0)],64)):o.type===s(b).NUMBER_FORMAT?(a(),d(v,{key:2},[g(f(o.column?A(o.column,h).toLocaleString():""),1)],64)):o.type===s(b).DATE?(a(),d(v,{key:3},[g(f(o.column?_e(A(o.column,h)):""),1)],64)):o.type===s(b).DATE_TIME?(a(),d(v,{key:4},[g(f(o.column?Ie(A(o.column,h)):""),1)],64)):o.type===s(b).STATUS?(a(),c(N,{key:5,size:"sm",color:o.column&&me(o.column,h)?"positive":"grey-4",name:s(st)},null,8,["color","name"])):o.type===s(b).AVATAR?(a(),d(v,{key:6},[o.column&&A(o.column,h)?(a(),c(lt,{key:0,rounded:o.options.rounded,square:o.options.square,size:o.options.size?o.options.size:"36px"},{default:r(()=>[o.column&&A(o.column,h)?(a(),c(fe,{key:0,src:A(o.column,h),alt:"item-img-"+W,ratio:1},null,8,["src","alt"])):(a(),d("img",{key:1,src:"/avatar_default.png",alt:"item-img-"+W},null,8,Kt))]),_:2},1032,["rounded","square","size"])):m("",!0)],64)):o.type===s(b).IMAGE?(a(),d(v,{key:7},[o.column&&A(o.column,h)?(a(),c(fe,{key:0,src:A(o.column,h),"spinner-color":"white",class:"bg-grey-8",ratio:4/3,style:le(o.options.size?`width: ${o.options.size}; height: ${o.options.size}`:"width:55px;height:55px")},null,8,["src","style"])):(a(),c(fe,{key:1,src:"/images/no_picture_thumb.jpg","spinner-color":"white",class:"bg-grey-8",ratio:4/3,style:le(o.options.size?`width: ${o.options.size}; height: ${o.options.size}`:"width:55px;height:55px")},null,8,["style"]))],64)):o.type===s(b).ICON?(a(),d(v,{key:8},[o.column?(a(),c(N,{key:0,name:A(o.column,h)},null,8,["name"])):m("",!0)],64)):m("",!0)],6))],64)):m("",!0)],64))),128))]))),128))])])]),_:3},8,["separator"])):(a(),c(oe,{key:1,class:"text-center"},{default:r(()=>[l(s(z),{status:"empty",description:s(p)("error.dataNotfound")},null,8,["description"])]),_:1}))]),E(t.$slots,"paging",{},()=>[B.value&&t.showPaging&&B.value.totalPages>0?(a(),c(kt,{key:0,modelValue:B.value,"onUpdate:modelValue":u[11]||(u[11]=e=>B.value=e),"boundary-numbers":!1,"onUpdate:current":Ue,"onUpdate:perPage":Re},null,8,["modelValue"])):m("",!0)])]),_:3})])],2))}}),Yt=ue({__name:"crud-table",setup(n){const{t:O}=ye(),{setTitle:z}=Le();z(`Crud table | ${O("app.name")}`);const L=U([{label:"Image",translateLabel:!1,column:"avatar.thumbnail",type:b.AVATAR,options:{fillable:!0,align:"center",size:"55px"}},{label:"Email",translateLabel:!1,column:"email",type:b.TEXT,options:{searchable:!0,sortable:!0,fillable:!0,searchType:R.TEXT,searchModel:"",searchOperation:":"}},{label:"Username",translateLabel:!1,column:"username",type:b.TEXT,options:{fillable:!0,searchable:!0,sortable:!0,searchType:R.TEXT,searchModel:"",searchOperation:":"}},{label:"Active",translateLabel:!1,column:"active",type:b.STATUS,options:{fillable:!0,sortable:!0,searchable:!0,align:"center",searchType:R.BOOLEAN,searchModel:!0,searchOperation:"="}},{label:"Tools",translateLabel:!1,type:b.BASE_TOOL,options:{fillable:!0,editButton:!0,deleteButton:!0,copyButton:!0,align:"center"}}]),{findAll:X}=yt(),{appConfirm:Y}=Ve(),{pages:w,resetPaging:p}=wt(5),{sort:k}=Ne({column:"id",mode:"desc"}),$=U([]),T=U(!1),S=U(!1);ht(async()=>{_()});const B=j(()=>`?page=${w.value.current}&size=${w.value.itemsPerPage}&sort=${k.value.column},${k.value.mode}`),_=async()=>{S.value=!0;const i=await X(B.value);return console.log("findAll",i),i&&($.value=i.dataList,i.totalPages!=null&&(w.value.totalPages=i.totalPages),i.totalElements!=null&&(w.value.totalElements=i.totalElements),i.last!=null&&(w.value.last=i.last)),T.value||(T.value=!0),S.value=!1,new Promise(q=>q(!0))},x=async()=>{Q(),await _()},Q=()=>{p(),$.value=[],T.value=!1},F=i=>{console.log("onItemClick",i)},ie=i=>{console.log("onItemCopy",i)},de=async i=>{console.log("onPageNoChange",i),i!=null&&(w.value.current=i,await _())},ce=async i=>{console.log("onItemPerPageChange",i),i!=null&&(w.value.itemsPerPage=i,await _())},ee=async i=>{k.value.column===i?k.value.mode=k.value.mode==="asc"?"desc":"asc":k.value.column=i,console.log("onSort",k.value),te()},te=async()=>{$.value=await ft($.value,k.value.column,k.value.mode||"asc")},A=async i=>{console.log("onSortMode",i),k.value.mode=i,te()},me=async i=>{console.log("onAdvanceSearch",i)},pe=async(i,q)=>{await Y(O("app.monogram"),O("base.deleteConfirm"))&&(console.log("onItemDelete",{indexOrIds:i,isSingle:q}),q?$.value=$.value.filter((H,he)=>he!==i):Array.isArray(i)&&($.value=$.value.filter(H=>H.id&&!i.includes(H.id))))},Z=()=>{console.log("onNewForm")};return(i,q)=>(a(),c(gt,null,{default:r(()=>[l(Jt,{icon:s(vt),title:s(O)("model_user"),"crud-name":"user",loading:S.value,"frist-load":T.value,pages:s(w),headers:L.value,sort:s(k),list:$.value,onOnItemClick:F,onOnItemCopy:ie,onOnPageNoChange:de,onOnItemsPerpageChange:ce,onOnSort:ee,onOnSortMode:A,onOnReload:x,onOnAdvanceSearch:me,onOnItemDelete:pe,onOnNewForm:Z},null,8,["icon","title","loading","frist-load","pages","headers","sort","list"])]),_:1}))}}),co=At(Yt,[["__scopeId","data-v-a00404c6"]]);export{co as default};
