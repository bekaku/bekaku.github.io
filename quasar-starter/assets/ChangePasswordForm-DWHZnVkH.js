import{l as U,u as A,a as h,r as m,a5 as k,m as I,n as F,w as a,x as e,ay as L,t as w,aA as b,J as s,d8 as N,M as v,bb as q,af as y,a1 as D,Q as K,L as M,aF as p,aN as T,aH as z,aK as E,aL as H,bf as J,aM as O,ba as R}from"./index--rRessbS.js";import{Q as X}from"./QBar-BE9uMyvF.js";import{u as j}from"./useValidation-BxN1Wqxq.js";import{U as G}from"./UserService-DGTXp1-_.js";import"./useAxios-BBYX69-N.js";const ae=U({__name:"ChangePasswordForm",props:{dialog:{type:Boolean,default:!1},isFromCompanyAdmin:{type:Boolean,default:!1},title:{type:String,default:void 0},userId:{type:Number,default:void 0}},emits:["on-close","on-okay"],setup(g,{emit:Q}){const n=g,V=Q,{t:o}=A(),{appLoading:c}=h(),i=m(!1),d=m(""),u=m(!0),{validatePasswordStrongV2:C,required:_}=j(),{updateUserPassword:P,updateUserPasswordByAdmin:x}=G(),f=()=>{V("on-close")},B=()=>{S({userChangePasswordRequest:{password:d.value,logoutAllDevice:u.value}})},S=async r=>{n.userId&&(c(),n.isFromCompanyAdmin?await x(r,n.userId):await P(r,n.userId),c(!1),f(),d.value="",u.value=!0)};return k(()=>n.dialog,r=>{i.value=r}),(r,t)=>(F(),I(R,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=l=>i.value=l),persistent:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:a(()=>[e(L,{style:{"max-width":"480px"},flat:"",bordered:""},{default:a(()=>[e(X,{class:"bg-transparent q-my-sm"},{default:a(()=>[e(b,{name:s(N)},null,8,["name"]),w("div",null,v(s(o)("base.changePassword")),1),e(q),e(y,{dense:"",flat:"",icon:s(D),size:"md",onClick:f},{default:a(()=>[e(K,null,{default:a(()=>[M(v(s(o)("base.close")),1)]),_:1})]),_:1},8,["icon"])]),_:1}),e(p,null,{default:a(()=>[e(T,{onSubmit:B,class:"q-px-sm"},{default:a(()=>[e(p,null,{default:a(()=>[e(z,{class:"q-pt-md",outlined:"",dense:"",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),type:"password",label:s(o)("authen.newPassword"),rules:[s(_),l=>s(C)(l)||s(o)("error.passwordStrongError")]},{prepend:a(()=>[e(b,{name:s(E),color:"grey-9"},null,8,["name"])]),_:1},8,["modelValue","label","rules"])]),_:1}),e(p,null,{default:a(()=>[w("div",null,[e(H,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=l=>u.value=l),label:s(o)("authen.logoutAll")},null,8,["modelValue","label"])])]),_:1}),e(J),e(O,{align:"center"},{default:a(()=>[e(y,{unelevated:"",color:"primary",label:s(o)("updatePassword"),type:"submit"},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});export{ae as default};
