const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Paging-BknRaX1P.js","assets/Paging.vue_vue_type_script_setup_true_lang-_IK8hpwA.js","assets/index-D_pQv8pS.js","assets/index-ZrKcW1Mk.css","assets/BaseSpinner-B5Sl19Gi.js","assets/BaseSpinner.vue_vue_type_script_setup_true_lang-CsE-PVKw.js","assets/BaseResult-BJvdw1jW.js","assets/BaseResult.vue_vue_type_script_setup_true_lang-PpqeFt5W.js","assets/BaseLoadmore-wwwD9mEW.js"])))=>i.map(i=>d[i]);
import{r as _,c as U,i as z,d as G,e as W,f as X,g as H,l as K,u as ee,o as ae,m as f,n as r,w as s,x as l,aE as V,R as y,J as t,cx as te,aF as S,W as L,bf as Q,X as O,Z as M,Y as N,U as $,L as v,M as k,bT as se,aT as F,Q as Z,T as le,aN as B}from"./index-D_pQv8pS.js";import{u as ne}from"./useAppMeta-DJRwSYxv.js";import{u as oe}from"./usePaging-Bmlf8ltY.js";import{u as re}from"./useSort-yXftNjjB.js";import{u as ie}from"./useAxios-QRQbEkIG.js";import{_ as ue}from"./BaseScrollArea.vue_vue_type_script_setup_true_lang-BXg_Y2-y.js";import{_ as de}from"./BasePage.vue_vue_type_script_setup_true_lang-zpTuv89f.js";import{B as q}from"./BaseCard-BjH6c4uf.js";import{B as J}from"./BaseButton-Dqt7G8pG.js";import fe from"./BaseAlert-DK5g6h7d.js";import"./use-meta-Dcq-KTPt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y=n=>{const{callAxios:I}=ie(),{pages:o,resetPaging:E}=oe(n?.itemsPerPage?n.itemsPerPage:10),{sort:c}=re(n?.defaultSort),i=_([]),u=_(!1),d=_(!1),m=_(!1),b=_(n.urlEndpoint),w=_(n?.additionalUri),A=U(()=>{let e=!1,a="";return(n.pageAble==null||n.pageAble)&&(a+=`page=${n.pageStartZero==null||n.pageStartZero?o.value.current>0?o.value.current-1:0:o.value.current}`,a+=`&size=${o.value.itemsPerPage}`,e=!0),(n.sortAble==null||n.sortAble)&&(e&&(a+="&"),a+=`${c.value.column&&c.value.mode?"sort="+c.value.column+","+c.value.mode:""}`,e=!0),w.value&&(e&&(a+="&"),a+=`${w.value}`),z(a)?void 0:a}),T=U(()=>`${b.value}${A.value?"?"+A.value:""}`),g=async()=>{m.value=!0;const e=await I({API:T.value,method:"GET"});let a=[];if(!G(e)&&!W(e)){if(X(e))n.reverseList?a=e.dataList.reverse():a=e.dataList,await C(a),e.totalPages!=null&&(o.value.totalPages=e.totalPages),e.totalElements!=null&&(o.value.totalElements=e.totalElements,(e.totalElements==0||e.totalElements<o.value.itemsPerPage)&&(u.value=!0)),e.last!=null&&(o.value.last=e.last,u.value=e.last);else if(e&&H(e)){const P=e;(P.length==0||P.length<o.value.itemsPerPage)&&(u.value=!0),n.reverseList?a=P.reverse():a=P,await C(a)}}return d.value||(d.value=!0),m.value=!1,new Promise(P=>{P(!0)})},C=e=>new Promise(a=>{o.value.current==1?i.value=e:n.concatList?n.addUnshift?i.value.unshift(...e):i.value.push(...e):i.value=e,a(!0)}),h=(e=!0)=>{e&&E(),i.value=[],d.value=!1,u.value=!1},R=async()=>(E(),n.preventResetListReload||(d.value=!1,i.value=[]),u.value=!1,await g(),new Promise(e=>e(!0))),D=async()=>(d.value&&(o.value.current++,await g()),new Promise(e=>e(!0))),x=async(e=!1)=>(h(e),await g(),new Promise(a=>a(!0)));return{isInfiniteDisabled:u,firstLoaded:d,loading:m,pages:o,sort:c,dataList:i,urlEndpoint:b,additionalUri:w,loadData:g,resetData:h,onPageChange:async e=>(await x(!1),new Promise(a=>a(!0))),onPerPageChange:async e=>(await x(!1),new Promise(a=>a(!0))),onNextPage:D,onReload:R}},he=K({__name:"use-pagefecth",setup(n){const I=S(()=>B(()=>import("./Paging-BknRaX1P.js"),__vite__mapDeps([0,1,2,3]))),o=S(()=>B(()=>import("./BaseSpinner-B5Sl19Gi.js"),__vite__mapDeps([4,5,2,3]))),E=S(()=>B(()=>import("./BaseResult-BJvdw1jW.js"),__vite__mapDeps([6,7,2,3]))),c=S(()=>B(()=>import("./BaseLoadmore-wwwD9mEW.js"),__vite__mapDeps([8,2,3]))),{t:i}=ee(),{setTitle:u}=ne();u(`Use pagefecth | ${i("app.name")}`);const{firstLoaded:d,pages:m,dataList:b,onPageChange:w,onPerPageChange:A,onReload:T}=Y({urlEndpoint:"/api/permission",defaultSort:{column:"id",mode:"desc"},itemsPerPage:4}),{isInfiniteDisabled:g,loading:C,firstLoaded:h,dataList:R,onReload:D,onNextPage:x}=Y({urlEndpoint:"/api/permission",defaultSort:{column:"id",mode:"desc"},itemsPerPage:4,concatList:!0});return ae(()=>{}),(j,p)=>(r(),f(de,null,{default:s(()=>[l(q,{title:"Paging"},{end:s(()=>[l(J,{flat:"",round:"",icon:t(F),onClick:t(T)},{default:s(()=>[l(Z,null,{default:s(()=>p[1]||(p[1]=[v(" Reload data ")])),_:1})]),_:1},8,["icon","onClick"])]),default:s(()=>[l(V,null,{default:s(()=>[l(fe,{type:"is-warning",icon:t(te),message:"You need to work with your API, you can use my Java Springboot REST API from the link https://github.com/bekaku/java-spring-boot-starter",closeable:!1},null,8,["icon"]),t(d)?(r(),y(L,{key:1},[t(b).length===0?(r(),f(t(E),{key:0,status:"empty",description:t(i)("error.dataNotfound")},null,8,["description"])):(r(),y(L,{key:1},[l(Q,null,{default:s(()=>[(r(!0),y(L,null,O(t(b),(e,a)=>(r(),f(M,{key:`${a}-${e.id}`},{default:s(()=>[l(N,null,{default:s(()=>[l($,null,{default:s(()=>[v(k(e.description),1)]),_:2},1024),l($,{caption:""},{default:s(()=>[v(k(e.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),l(t(I),{modelValue:t(m),"onUpdate:modelValue":p[0]||(p[0]=e=>se(m)?m.value=e:null),"boundary-numbers":!1,"onUpdate:current":t(w),"onUpdate:perPage":t(A)},null,8,["modelValue","onUpdate:current","onUpdate:perPage"])],64))],64)):(r(),f(t(o),{key:0}))]),_:1})]),_:1}),l(q,{title:"Loadmore"},{end:s(()=>[l(J,{flat:"",round:"",icon:t(F),onClick:t(D)},{default:s(()=>[l(Z,null,{default:s(()=>p[2]||(p[2]=[v(" Reload data ")])),_:1})]),_:1},8,["icon","onClick"])]),default:s(()=>[l(V,null,{default:s(()=>[t(h)?(r(),y(L,{key:1},[t(R).length===0?(r(),f(t(E),{key:0,status:"empty",description:t(i)("error.dataNotfound")},null,8,["description"])):(r(),y(L,{key:1},[l(ue,{height:"250px"},{default:s(()=>[l(Q,null,{default:s(()=>[(r(!0),y(L,null,O(t(R),(e,a)=>(r(),f(M,{key:`${a}-${e.id}`},{default:s(()=>[l(N,{side:""},{default:s(()=>[v(k(a+1),1)]),_:2},1024),l(N,null,{default:s(()=>[l($,null,{default:s(()=>[v(k(e.description),1)]),_:2},1024),l($,{caption:""},{default:s(()=>[v(k(e.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(g)?le("",!0):(r(),f(t(c),{key:0,loading:t(C),"frist-loaded":t(h),"is-infinite-disabled":t(g),label:t(i)("base.loadMore"),onOnNextPage:t(x),button:"","show-icon":"","full-width":""},null,8,["loading","frist-loaded","is-infinite-disabled","label","onOnNextPage"]))],64))],64)):(r(),f(t(o),{key:0}))]),_:1})]),_:1})]),_:1}))}});export{he as default};
