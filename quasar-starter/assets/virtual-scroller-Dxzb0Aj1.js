import{l as j,dy as le,ab as h,m as L,n as B,J as T,O as ae,w as l,v as $,p as oe,q as se,u as re,r as v,o as ie,x as t,bP as ne,Q as ue,L as f,aF as I,t as r,R as ce,T as de,M as n,aM as fe,af as S,et as me,ag as pe,Z as D,Y as R,U as ve,aH as M,aZ as ge,bo as he,bI as U}from"./index-CPWGwitb.js";import{s as _e,_ as ye,Q as C}from"./BaseVirtualScrollerDynamic.vue_vue_type_script_setup_true_lang-CO-Pc9xy.js";import{u as be}from"./useAppMeta-k5JT6zDJ.js";import{_ as Se}from"./BasePage.vue_vue_type_script_setup_true_lang-CqA8jxOV.js";import{_ as Ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as A}from"./BaseInfiniteScroll.vue_vue_type_script_setup_true_lang-DGZnl9u1.js";import{a as Re,B as k}from"./BaseCard-Cq6rApTk.js";import{B as Ce}from"./BaseButton-DENZZgD6.js";import"./use-meta-BBkCK9ZH.js";const ke=j({__name:"BaseVirtualScrollerRecycle",props:{minItemSize:{default:35},itemSize:{},buffer:{default:800},poolSize:{},emitUpdate:{type:Boolean,default:!0},pageMode:{type:Boolean,default:!1},pageModeFullPage:{type:Boolean},scrollAreaHeight:{default:"100%"},minHeight:{},keyField:{default:"id"},isInfiniteDisabled:{type:Boolean},infinitePosition:{},items:{}},emits:["on-update","scroll-start","scroll-end","on-infinite","on-refresh"],setup(F,{expose:V,emit:q}){le(o=>({"318a9ce5":o.scrollAreaHeight}));const i=h("appRecycleScrollerRef"),c=q,m=o=>{o!=null&&(console.log("onScrollToItem",o),i.value&&i.value.scrollToItem(o))},_=(o,g,p,d)=>{c("on-update",{viewStartIndex:o,viewEndIndex:g,visibleStartIndex:p,visibleEndIndex:d})},y=()=>{};return V({onScrollToItem:m}),(o,g)=>(B(),L(T(_e),ae(o.$attrs,{ref_key:"appRecycleScrollerRef",ref:i,class:"scroller","key-field":o.keyField,items:o.items,"min-item-size":o.minItemSize,"emit-update":o.emitUpdate,"page-mode":o.pageMode,buffer:o.buffer,onResize:y,onUpdate:_}),{before:l(()=>[$(o.$slots,"slotBefore",{},void 0,!0)]),default:l(({item:p,index:d})=>[$(o.$slots,"default",oe(se({item:p,index:d})),void 0,!0)]),after:l(()=>[$(o.$slots,"slotAfter",{},void 0,!0)]),_:3},16,["key-field","items","min-item-size","emit-update","page-mode","buffer"]))}}),Be=Ie(ke,[["__scopeId","data-v-6134f107"]]),Te={key:0},Ve={class:"q-pa-md row justify-center"},qe={id:"virtual-scroll-target-holder",class:"scroll",style:{"max-height":"300px"}},we={class:"q-pa-md row justify-center"},Qe={style:{width:"100%"}},$e={id:"virtual-scroll-chat-target-holder",class:"scroll",style:{"max-height":"300px"}},Ae={class:"q-pa-md row justify-center"},Le={style:{width:"100%"}},xe=1e4,Ne=j({__name:"virtual-scroller",setup(F){const{t:V}=re(),{setTitle:q}=be();q(`Virtual scroller | ${V("app.name")}`);const i=v([]),c=v(),m=h("scrollerDynamicRef"),_=h("scrollerRecycleRef"),y=h("chatInfinityScrollRef"),o=v([]),g=v(10),p=h("virtualListRef"),d=v(0),w=h("virtualChatListRef"),b=v([]),Q=v(!0);ie(()=>{P();for(let a=0;a<xe;a++)i.value.push({id:a+1,label:"Option "+(a+1)});x(),W()});const H=a=>{c.value=a},N=a=>{m.value&&m.value.onScrollToItem(a)},E=()=>{m.value&&m.value.onScrollToBottom()},x=()=>{let a=o.value.length;for(let e=0;e<40;e++)a++,o.value.push({id:a,label:"Option "+a})},J=()=>{_.value&&_.value.onScrollToItem(g.value||0)},G=(a,e)=>{setTimeout(()=>{x(),e()},500)},Z=()=>{p.value.scrollTo(d.value,"start-force")},z=({index:a})=>{d.value=a},Y=()=>{p.value.scrollTo(i.value.length-1,"start-force")},K=(a,e)=>{console.log("onInfiniteVirtual",a),setTimeout(()=>{for(let s=0;s<30;s++)i.value.push({id:i.value.length+1,label:"Option "+(i.value.length+1)});e()},1e3)},W=async()=>{await X(),O(b.value.length-1),setTimeout(()=>{Q.value=!1},1e3)},X=()=>new Promise(a=>{let e=b.value.length;for(let s=0;s<40;s++)e++,b.value.push({id:e,label:"Option "+e});a(!0)}),ee=()=>new Promise(a=>{for(let e=0;e<10;e++)b.value.unshift({id:i.value.length+1,label:"Option "+(i.value.length+1)});a(!0)}),O=a=>{w.value&&w.value.scrollTo(a,"start-force")},te=(a,e)=>{console.log("onInfiniteChatVirtual",a),setTimeout(async()=>{await ee(),e(),a==3&&P(),O(9)},1e3)},P=()=>{y.value&&(y.value.stop(),Q.value=!0)};return(a,e)=>(B(),L(Se,{full:!1},{default:l(()=>[t(Re,{title:"Charts"},{end:l(()=>[t(Ce,{href:"https://github.com/bekaku/quasar-starter-template/blob/main/src/pages/example/virtual-scroller.vue",target:"_blank",icon:T(ne),flat:"",round:""},{default:l(()=>[t(ue,null,{default:l(()=>e[3]||(e[3]=[f("View Source")])),_:1,__:[3]})]),_:1},8,["icon"])]),_:1}),t(k,{title:"Dynamic Scroller"},{default:l(()=>[t(I,{class:"q-gutter-y-lg"},{default:l(()=>[r("div",null,[c.value?(B(),ce("p",Te," ("+n(`${c.value.viewStartIndex}-[${c.value.visibleStartIndex}-${c.value.visibleEndIndex}]-${c.value.viewEndIndex}`)+") ",1)):de("",!0)]),t(fe,null,{default:l(()=>[t(S,{icon:T(me),"no-caps":"",label:"Scroll to bottom",onClick:E},null,8,["icon"]),t(S,{icon:T(pe),"no-caps":"",label:"Scroll to top",onClick:e[0]||(e[0]=s=>N(0))},null,8,["icon"])]),_:1}),t(ye,{ref_key:"scrollerDynamicRef",ref:m,class:"q-pa-sm","key-field":"id",items:i.value,"min-item-size":24,"scroll-area-height":"200px",onOnUpdate:H},{slotBefore:l(()=>e[4]||(e[4]=[f(" Before Slot ")])),default:l(({item:s,index:u})=>[(B(),L(D,{key:u,dense:"",clickable:""},{default:l(()=>[t(R,null,{default:l(()=>[t(ve,null,{default:l(()=>[f(" #"+n(u)+" - "+n(s.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))]),slotAfter:l(()=>e[5]||(e[5]=[f(" After Slot ")])),_:1},8,["items"])]),_:1})]),_:1}),t(k,{title:"Recycle Scroller + infinite-scroll"},{default:l(()=>[t(I,{class:"q-gutter-y-lg"},{default:l(()=>[r("div",null,[t(M,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=s=>g.value=s),label:"Scroll to",type:"number"},{append:l(()=>[t(S,{label:"Go",color:"primary",onClick:J})]),_:1},8,["modelValue"])]),t(Be,{id:"scroll-chat-target-id",ref_key:"scrollerRecycleRef",ref:_,style:{"padding-bottom":"65px"},items:o.value,"scroll-area-height":"200px","min-item-size":42},{slotBefore:l(()=>e[6]||(e[6]=[f(" Slot before ")])),default:l(({item:s,index:u})=>[t(D,{clickable:""},{default:l(()=>[t(R,{avatar:""},{default:l(()=>[t(ge,null,{default:l(()=>e[7]||(e[7]=[r("img",{src:"https://cdn.quasar.dev/img/avatar.png"},null,-1)])),_:1,__:[7]})]),_:1}),t(R,null,{default:l(()=>[f(n(s.label),1)]),_:2},1024),t(R,{side:""},{default:l(()=>[t(he,null,{default:l(()=>[f(" #"+n(u),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),slotAfter:l(()=>e[8]||(e[8]=[f(" Slot after ")])),_:1},8,["items"]),t(A,{"scroll-target":"#scroll-chat-target-id",onOnInfinite:G})]),_:1})]),_:1}),t(k,{flat:"",bordered:"",title:"Quasar virtual Scroller"},{default:l(()=>[t(I,{class:"q-gutter-y-lg"},{default:l(()=>[r("div",Ve,[t(M,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=s=>d.value=s),modelModifiers:{number:!0},style:{"min-width":"10em"},type:"number",min:0,max:9999,label:"Scroll to index","input-class":"text-right",outlined:""},null,8,["modelValue"]),t(S,{class:"q-ml-sm",label:"Go","no-caps":"",color:"primary",onClick:Z}),t(S,{class:"q-ml-sm",label:"To Bottom","no-caps":"",onClick:Y})]),r("div",qe,[e[9]||(e[9]=r("p",null,"Top Area",-1)),t(U,{id:"q-scroll-target-id",ref_key:"virtualListRef",ref:p,"scroll-target":"#virtual-scroll-target-holder",items:i.value,separator:"",onVirtualScroll:z},{default:l(({item:s,index:u})=>[r("div",we,[r("div",Qe,[t(C,{name:"me",avatar:"https://cdn.quasar.dev/img/avatar4.jpg",sent:"",stamp:"7 minutes ago"},{default:l(()=>[r("div",null,"#"+n(u)+" - "+n(s.label),1)]),_:2},1024),t(C,{name:"Jane",avatar:"https://cdn.quasar.dev/img/avatar3.jpg",stamp:"4 minutes ago"},{default:l(()=>[r("div",null,"#"+n(u)+" - "+n(s.label),1)]),_:2},1024)])])]),_:1},8,["items"]),e[10]||(e[10]=r("p",null,"Bottom Area",-1)),t(A,{"scroll-target":"#virtual-scroll-target-holder",onOnInfinite:K})])]),_:1})]),_:1}),t(k,{flat:"",bordered:"",title:"Chat style virtual scroller"},{default:l(()=>[t(I,null,{default:l(()=>[r("div",$e,[t(A,{ref_key:"chatInfinityScrollRef",ref:y,"scroll-target":"#virtual-scroll-chat-target-holder",reverse:"",disable:Q.value,onOnInfinite:te},null,8,["disable"]),t(U,{id:"q-scroll-target-id",ref_key:"virtualChatListRef",ref:w,"scroll-target":"#virtual-scroll-chat-target-holder",items:b.value,separator:"",onVirtualScroll:z},{default:l(({item:s,index:u})=>[r("div",Ae,[r("div",Le,[t(C,{name:"me",avatar:"https://cdn.quasar.dev/img/avatar4.jpg",sent:"",stamp:"7 minutes ago"},{default:l(()=>[r("div",null,"#"+n(u)+" - "+n(s.label),1)]),_:2},1024),t(C,{name:"Jane",avatar:"https://cdn.quasar.dev/img/avatar3.jpg",stamp:"4 minutes ago"},{default:l(()=>[r("div",null,"#"+n(u)+" - "+n(s.label),1)]),_:2},1024)])])]),_:1},8,["items"])])]),_:1})]),_:1})]),_:1}))}});export{Ne as default};
