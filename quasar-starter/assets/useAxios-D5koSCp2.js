const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-X6oVgKr1.js","assets/index-DUGrkwAr.js","assets/index-Dx9QcfFl.css"])))=>i.map(i=>d[i]);
import{dU as te,am as ne,a$ as ae,bS as G,dV as Z,t as I,dW as oe,k as x,dX as se,bM as ie,dY as re,dZ as ce,bb as ue,s as Q,d_ as E,K as le,d$ as fe,e0 as _,e1 as Y,e2 as de,e3 as ye,bm as pe,bl as ve,A as q,bk as me,e4 as he,e5 as Se,e6 as ge,dE as $,e7 as V,e8 as be,e9 as U,ea as we,u as Ae,j as Te,P as Ce,eb as T,cH as z,ec as De,cI as Fe,aA as H,ed as J}from"./index-DUGrkwAr.js";const k=te("Device",{web:()=>ne(()=>import("./web-X6oVgKr1.js"),__vite__mapDeps([0,1,2])).then(e=>new e.DeviceWeb)});function Ee(e){return re()?(ce(e),!0):!1}const Ke=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Le=Object.prototype.toString,Oe=e=>Le.call(e)==="[object Object]",Pe=()=>{};function Ne(...e){if(e.length!==1)return oe(...e);const n=e[0];return typeof n=="function"?Z(se(()=>({get:n,set:Pe}))):x(n)}function ke(e,n){function o(...f){return new Promise((d,m)=>{Promise.resolve(e(()=>n.apply(this,f),{fn:n,thisArg:this,args:f})).then(d).catch(m)})}return o}const ee=e=>e();function Me(e=ee,n={}){const{initialState:o="active"}=n,f=Ne(o==="active");function d(){f.value=!1}function m(){f.value=!0}const b=(...c)=>{f.value&&e(...c)};return{isActive:Z(f),pause:d,resume:m,eventFilter:b}}function M(e){return Array.isArray(e)?e:[e]}function Re(e){return ie()}function Ie(e,n,o={}){const{eventFilter:f=ee,...d}=o;return I(e,ke(f,n),d)}function xe(e,n,o={}){const{eventFilter:f,initialState:d="active",...m}=o,{eventFilter:b,pause:c,resume:s,isActive:r}=Me(f,{initialState:d});return{stop:Ie(e,n,{...m,eventFilter:b}),pause:c,resume:s,isActive:r}}function je(e,n=!0,o){Re()?ae(e,o):n?e():G(e)}function We(e,n,o){return I(e,n,{...o,immediate:!0})}const R=Ke?window:void 0;function _e(e){var n;const o=E(e);return(n=o?.$el)!=null?n:o}function B(...e){const n=[],o=()=>{n.forEach(c=>c()),n.length=0},f=(c,s,r,y)=>(c.addEventListener(s,r,y),()=>c.removeEventListener(s,r,y)),d=Q(()=>{const c=M(E(e[0])).filter(s=>s!=null);return c.every(s=>typeof s!="string")?c:void 0}),m=We(()=>{var c,s;return[(s=(c=d.value)==null?void 0:c.map(r=>_e(r)))!=null?s:[R].filter(r=>r!=null),M(E(d.value?e[1]:e[0])),M(le(d.value?e[2]:e[1])),E(d.value?e[3]:e[2])]},([c,s,r,y])=>{if(o(),!c?.length||!s?.length||!r?.length)return;const v=Oe(y)?{...y}:y;n.push(...c.flatMap(C=>s.flatMap(a=>r.map(p=>f(C,a,p,v)))))},{flush:"post"}),b=()=>{m(),o()};return Ee(o),b}const L=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O="__vueuse_ssr_handlers__",Ye=$e();function $e(){return O in L||(L[O]=L[O]||{}),L[O]}function Ve(e,n){return Ye[e]||n}function Ue(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const ze={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},X="vueuse-storage";function A(e,n,o,f={}){var d;const{flush:m="pre",deep:b=!0,listenToStorageChanges:c=!0,writeDefaults:s=!0,mergeDefaults:r=!1,shallow:y,window:v=R,eventFilter:C,onError:a=t=>{console.error(t)},initOnMounted:p}=f,h=(y?ue:x)(typeof n=="function"?n():n),l=Q(()=>E(e));if(!o)try{o=Ve("getDefaultStorage",()=>{var t;return(t=R)==null?void 0:t.localStorage})()}catch(t){a(t)}if(!o)return h;const S=E(n),g=Ue(S),D=(d=f.serializer)!=null?d:ze[g],{pause:P,resume:K}=xe(h,()=>j(h.value),{flush:m,deep:b,eventFilter:C});I(l,()=>F(),{flush:m}),v&&c&&je(()=>{o instanceof Storage?B(v,"storage",F,{passive:!0}):B(v,X,i),p&&F()}),p||F();function N(t,u){if(v){const w={key:l.value,oldValue:t,newValue:u,storageArea:o};v.dispatchEvent(o instanceof Storage?new StorageEvent("storage",w):new CustomEvent(X,{detail:w}))}}function j(t){try{const u=o.getItem(l.value);if(t==null)N(u,null),o.removeItem(l.value);else{const w=D.write(t);u!==w&&(o.setItem(l.value,w),N(u,w))}}catch(u){a(u)}}function W(t){const u=t?t.newValue:o.getItem(l.value);if(u==null)return s&&S!=null&&o.setItem(l.value,D.write(S)),S;if(!t&&r){const w=D.read(u);return typeof r=="function"?r(w,S):g==="object"&&!Array.isArray(w)?{...S,...w}:w}else return typeof u!="string"?u:D.read(u)}function F(t){if(!(t&&t.storageArea!==o)){if(t&&t.key==null){h.value=S;return}if(!(t&&t.key!==l.value)){P();try{t?.newValue!==D.write(h.value)&&(h.value=W(t))}catch(u){a(u)}finally{t?G(K):K()}}}}function i(t){F(t.detail)}return h}const He=()=>{const e=A(de,[]),n=A(be,[]),o=A(ge.YEAR_AVAILABLE,[]),f=A(fe,0),d=A(Se,!0),m=A(he,null),b=A(me,null),c=A(q,null),s=A(ve,null),r=A(pe,null),y=A(ye,{}),v=i=>{if(n.value&&n.value.length>0)return n.value.find(t=>t.key==i)},C=i=>n.value?n.value.findIndex(t=>t.key==i):-1,a=i=>{const t=C(i);t>=0&&n.value.splice(t,1)},p=i=>{const t=v(i);if(n.value||(n.value=[]),!t){const u=V();n.value.push({key:i,date:u.toLocaleDateString()})}},h=(i,t="DAY")=>{a(i),t=="DAY"?p(i):t=="MONTH"?g(i):t=="YEAR"&&P(i)},l=i=>{const t=v(i);if(!t)return!0;const u=V();return t.date!=u.toLocaleDateString()},S=i=>{const t=v(i);if(!t)return!0;const u=Y();return t.date!=u},g=i=>{v(i)||n.value.push({key:i,date:Y()})},D=i=>{const t=v(i);if(!t)return!0;const u=$();return t.date!=u},P=i=>{v(i)||n.value.push({key:i,date:$()})},K=()=>{n.value=null,o.value=null};return{findByKey:v,onAddNewKey:p,onUpdateKey:h,destroyCache:K,canFecthToServerToday:l,canFecthToServerYear:D,cacheYearAvailables:o,fcmSetting:d,fcmToken:m,refeshTokenKey:b,authTokenKey:c,authTokenExpireKey:s,authTokenCreatedKey:r,cacheNotifyCount:y,logoutClear:()=>{y.value=null,K()},SearchHistoryList:e,fetchFromCacheToday:(i,t)=>!l(i)&&t&&!_(t),fetchFromCacheList:(i,t)=>!i&&t&&t.length>0,canFecthToServerMonth:S,fetchFromCacheMonth:(i,t)=>!S(i)&&t&&!_(t),latestSyncActiveStatus:f}},Je=()=>{const e=x(),{latestSyncActiveStatus:n}=He(),o=async()=>{const s=await k.getInfo();return new Promise(r=>{r(s)})};return{getDeviceInfo:o,isWeb:async()=>{const s=await k.getInfo();return new Promise(r=>{r(s.platform=="web")})},getDeviceId:async()=>{const s=await k.getId();return new Promise(r=>{e.value=s?s.identifier:void 0,r(s?s.identifier:void 0)})},deviceId:e,canSyncActiveStatusToServer:()=>new Promise(s=>{const r=U();let y;n.value>0?y=we(n.value,r):(n.value=r,s(!0)),y!=null&&y>=5&&(n.value=r,s(!0)),s(!1)}),setSysncActiveStatus:()=>{n.value=U()},isMobileOrTablet:async()=>{const s=await o();return new Promise(r=>{r(s.operatingSystem=="android"||s.operatingSystem=="ios")})}}},Xe=()=>{const{canSyncActiveStatusToServer:e}=Je(),{appToast:n,appLoading:o,isDevMode:f}=Ae(),{locale:d}=Te(),m=Ce,b=a=>a?z(a)||De(a)?new Promise(p=>{p(null)}):new Promise(p=>{p(a)}):new Promise(p=>{p(null)}),c=a=>{o(!1),n(`<strong>${a.message}</strong><br> ${a.errors?.join("<br>")}`,{multiLine:!0,html:!0,type:"negative",timeout:0,position:"bottom-left",caption:J(a.timestamp,d.value)||"",actions:[{icon:H,color:"white"}]})},s=a=>{a.message&&(o(!1),n(a.message,{multiLine:!0,html:!0,type:a.status=="OK"||a.status=="CREATED"?"positive":"negative",timeout:a.status=="OK"||a.status=="CREATED"?3*1e3:10*1e3,position:"bottom-left",caption:J(a.timestamp,d.value)||"",actions:[{icon:H,color:"white"}]}))},r=async a=>new Promise(async(p,h)=>{C(a).then(async l=>{l.status!=401&&l.status!=403&&y(l);const S=await b(l.data);p(S)}).catch(l=>{h(l)})}),y=a=>{a&&a.data&&(z(a.data)?c(a.data):Fe(a.data)&&s(a.data))},v=async a=>new Promise(async(p,h)=>{C(a,!1).then(l=>{p(l)}).catch(l=>{h(l)})}),C=async(a,p=!0)=>{const h=await e();return new Promise((l,S)=>{T.defaults.headers.Authorization=`Bearer ${m.get(q)}`,a.baseURL!=null?T.defaults.baseURL=a.baseURL:T.defaults.baseURL="https://api.yourdomain.com",a.contentType?T.defaults.headers["Content-Type"]=a.contentType:T.defaults.headers["Content-Type"]="application/json",a.responseType?T.defaults.responseType=a.responseType:T.defaults.responseType="json",T.defaults.headers["X-Sync-Active"]=h?"1":"0",T({method:a.method,url:a.API,data:a.body?a.body:void 0}).then(g=>{f()&&p&&console.log(`api ${T.defaults.baseURL}${a.API}`,g),l(g)}).catch(g=>{o(!1),g?.response&&g.response.status!=401&&g.response.status!=403&&g?.response?.data&&y(g?.response),S(g)})})};return{callAxios:r,validateServerResponse:b,callAxiosFile:v,callAxiosProcess:C}};export{He as a,Je as b,Xe as u};
