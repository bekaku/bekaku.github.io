import{l as x,a as T,c as N,e3 as I,m as p,n as u,a5 as q,w as A,t as D,a0 as z,dg as O,u as V,r as c,o as R,h as F,e4 as J,e5 as Q,$ as E,a3 as m,v as $,b8 as j,b9 as G,I as B,J as L,i as K}from"./index-CLKqN-vN.js";import{B as W}from"./BaseButton-B0k9Tcp5.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Y=["innerHTML"],Z=x({__name:"ContentHtml",props:{content:{},isEscapeHtml:{type:Boolean,default:!1},highLightText:{}},emits:["on-press"],setup(s,{emit:e}){const{inputSanitizeHtml:i}=T(),f=e,h=a=>{f("on-press",a)},r=N(()=>{if(!s.content)return"";const a=s.isEscapeHtml?i(I(s.content)):i(s.content);return s.highLightText?a.replaceAll(s.highLightText,`<span class='text-weight-bold text-blue'>${s.highLightText}</span>`):a});return(a,l)=>(u(),p(q,null,{default:A(()=>[D("div",z(a.$attrs,{innerHTML:r.value,onClick:l[0]||(l[0]=d=>h(d))}),null,16,Y)]),_:1}))}}),_=["id"],tt=x({__name:"ContentItem",props:{contentId:{default:"content-id"},content:{},wrapText:{type:Boolean,default:!0},to:{},openPage:{type:Boolean,default:!0},showCopyText:{type:Boolean,default:!0},showMore:{type:Boolean,default:!0},showBackground:{type:Boolean,default:!1},canUrlify:{type:Boolean,default:!0},hashtagUrlify:{type:Boolean,default:!1},limit:{default:4},fitContent:{type:Boolean,default:!1},linkStyle:{default:"app-text-link"},textStyle:{default:"q-text-black"},isEscapeHtml:{type:Boolean,default:!1},highLightText:{}},setup(s){O(t=>({"3aba2cae":t.limit}));const e=s,{appNavigateTo:i}=T(),{t:f}=V(),h=c(0),r=c(!1),a=c(!1),l=c(),d=c(!1);R(()=>{H()});const H=()=>{l.value=setTimeout(()=>{S(),e.canUrlify&&w(),d.value=!0},50)},w=()=>{document.querySelectorAll(`.content-href-${e.contentId}`).forEach(n=>{n.addEventListener("click",g)}),e.hashtagUrlify&&document.querySelectorAll(`.hashtag-href-${e.contentId}`).forEach(o=>{o.addEventListener("click",y)})},C=()=>{document.querySelectorAll(`.content-href-${e.contentId}`).forEach(o=>{o.removeEventListener("click",g)}),document.querySelectorAll(`.hashtag-href-${e.contentId}`).forEach(o=>{o.removeEventListener("click",y)})};F(()=>{l.value&&(clearTimeout(l.value),l.value=null),C(),a.value=!1});const g=t=>{if(t.target.classList.contains(`content-href-${e.contentId}`)){if(t.srcElement&&t.srcElement.href){const n=t.srcElement.href;J(n,t)}t.stopPropagation(),t.preventDefault()}},y=t=>{if(t.target.classList.contains(`hashtag-href-${e.contentId}`)){if(t.srcElement&&t.srcElement.innerText){const n=t.srcElement.innerText;n&&i(`/hashtag/${n.replace("#","")}`)}t.stopPropagation(),t.preventDefault()}},S=()=>{if(e.wrapText){const t=document.getElementById(e.contentId);if(t){const o=t.offsetHeight/20;h.value=Q(o,0),h.value>e.limit&&(r.value=!0)}}},b=(t,n=void 0)=>{const o=e.isEscapeHtml?I(t):t;if(e.canUrlify){const U=/(https?:\/\/\S+)/g,v=o.replace(U,k=>`<a class="content-href-${e.contentId} ${e.linkStyle} ${n||""}" href="${k}">${k}</a>`);return e.hashtagUrlify?v.replace(/#([\p{L}\p{N}_\u0E00-\u0E7F]+)/gu,`<a class="hashtag-href-${e.contentId} ${e.linkStyle} ${n||""}">#$1</a>`):v}return o},M=t=>{e.to&&i(e.to),t.stopImmediatePropagation()},P=async()=>{a.value=!0};return(t,n)=>t.content?(u(),E("div",{key:0,style:{overflow:"hidden"},class:B({"text-holder-fitcontent":!L(K)(t.content)&&t.fitContent})},[$(t.$slots,"top",{},void 0,!0),j((u(),E("div",{id:t.contentId||"content-id",class:B([{"word-limit":r.value&&!a.value,"cursor-pointer":t.to},"app-auto-newline dont-break-out text-holder"])},[t.content!=null?(u(),p(Z,{key:0,content:b(t.content,"text-primary"),"high-light-text":t.highLightText,onOnPress:n[0]||(n[0]=o=>M(o))},null,8,["content","high-light-text"])):m("",!0)],10,_)),[[G]]),r.value&&!a.value?(u(),p(W,{key:0,flat:"",dense:"",label:L(f)("base.seeMore"),onClick:P},null,8,["label"])):m("",!0),$(t.$slots,"bottom",{},void 0,!0)],2)):m("",!0)}}),at=X(tt,[["__scopeId","data-v-01873d17"]]);export{at as C};
