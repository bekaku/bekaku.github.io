const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BaseEmojiPicker-BVmq-1ys.js","assets/BaseEmojiPicker.vue_vue_type_script_setup_true_lang-D0Mzlen6.js","assets/index-B0LpE6d9.js","assets/index-Fr33gqm_.css","assets/BaseSpinner.vue_vue_type_script_setup_true_lang-Cho6L0Ja.js","assets/BaseMapPreview-dJmrWvDX.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/BaseMapPreview-KhQNB2ht.css","assets/ChatMessageFile-hC8I5n-W.js","assets/ChatMessageFile.vue_vue_type_script_setup_true_lang-WJ-HaqdA.js","assets/BaseFilesPreviewItem.vue_vue_type_script_setup_true_lang-OY0sRwlr.js","assets/BaseAvatar-CT0Z7LEF.js","assets/FileManagerService-DIOn4ymq.js","assets/useAxios-CpWvacFy.js","assets/BaseAvatar-BJnla1kf.css","assets/BaseFilesPreviewItemAlt.vue_vue_type_script_setup_true_lang-C6D4Yeua.js","assets/ChatMessageEngage-CdIU6-6Z.js","assets/ChatMessageEngage-DdctgRtk.css","assets/ChatMessageReply-DsqhG25_.js","assets/BaseVirtualScrollerDynamic.vue_vue_type_script_setup_true_lang-aTyT2QhS.js","assets/BaseVirtualScrollerDynamic-BCw0uU-l.css","assets/BaseFilePicker-7pR7FX1I.js","assets/BaseButton-B1pFtzoC.js","assets/BaseButton-CVVJuEEX.css","assets/BaseFilePicker-Dq96Uecd.css","assets/BaseTooltip.vue_vue_type_script_setup_true_lang-3d9e3MGe.js","assets/ContentItem-BL1x6kSy.js","assets/ContentItem-CLJYYNU6.css","assets/OpenGraphItemAlt.vue_vue_type_script_setup_true_lang--zzAjURr.js","assets/BaseRippleItem.vue_vue_type_script_setup_true_lang-DbjJfmIp.js","assets/BaseDropdownMenu-CclU0JRu.js","assets/BaseLabelValueItem.vue_vue_type_script_setup_true_lang-DIRlBvyy.js","assets/BaseDropdownMenu-BnwUGWvJ.css","assets/BaseCard-Bm1Lpw60.js","assets/BaseCard-IC8sCSUl.css","assets/BaseInfiniteScroll.vue_vue_type_script_setup_true_lang-C3Nex_OU.js","assets/ClosePopup-DtxLueY-.js","assets/BaseLink.vue_vue_type_script_setup_true_lang-BHZP5LKJ.js","assets/useAppMeta-COwviB9Q.js","assets/use-meta-BNn8jLC_.js","assets/BaseResult.vue_vue_type_script_setup_true_lang-ClkNRJF1.js","assets/SkeletonItem.vue_vue_type_script_setup_true_lang-D3n49ZFv.js","assets/ChatMessageReply-DZy6Cfbo.css","assets/ChatReplyItem-Dchl1twq.js","assets/ChatLeft-BDyyNAiy.js","assets/BaseInput.vue_vue_type_script_setup_true_lang-C9GUFqBk.js","assets/BaseScrollArea.vue_vue_type_script_setup_true_lang-BHDcBNax.js","assets/BaseTabs-2TV5JyU0.js","assets/BaseTabs-DJuRc6HI.css","assets/ChatLeft-zhWpNxHR.css","assets/ChatRight-DLpwfelz.js"])))=>i.map(i=>d[i]);
import{l as X,u as ge,r as d,bM as Ze,a1 as be,o as ke,c as V,h as gt,$,n as i,p as Ee,q as Le,a3 as y,m as h,t as O,x as a,w as e,a7 as F,J as l,bP as Ae,Q as fe,L as z,M as P,R as vt,aC as ue,ai as H,a_ as ht,at as oe,I as te,gd as De,bR as We,a5 as pt,bS as Oe,fj as yt,au as K,av as ae,aD as Xe,a0 as Je,ge as Ve,dx as Ct,bO as Ye,aK as re,em as bt,fE as kt,aw as ie,dK as Mt,gf as Tt,dL as wt,gg as St,dI as It,gh as $t,dH as Rt,gi as zt,dJ as Pt,gj as Et,a as Me,d4 as Lt,fG as Ot,cv as Bt,bx as At,gk as Dt,cB as Vt,bN as xe,U as _e,_ as Ft,gl as Nt,as as Se,ca as Ut,v as he,dS as Pe,aX as Ie,gm as Fe,aV as qt,bg as jt,b8 as me,dC as Ht,aJ as Gt,bk as Qt,eb as Kt,d2 as Zt,ae as Ne,H as Wt,af as Xt,gn as Jt,Y as Yt,bf as xt,bV as _t,aM as Ue,el as ea,cF as qe,go as je,dF as ta,gp as aa,gq as na,N as sa,a9 as la,ew as oa,gr as ia,ar as $e,gs as He,ex as ua,ba as Ge,a2 as ra}from"./index-B0LpE6d9.js";import{Q as ve,_ as ma}from"./BaseVirtualScrollerDynamic.vue_vue_type_script_setup_true_lang-aTyT2QhS.js";import{B as pe}from"./BaseAvatar-CT0Z7LEF.js";import{B as da}from"./BaseFilePicker-7pR7FX1I.js";import{a as ca}from"./FileManagerService-DIOn4ymq.js";import{B as Qe}from"./BaseButton-B1pFtzoC.js";import{_ as fa}from"./BaseFilesPreviewItem.vue_vue_type_script_setup_true_lang-OY0sRwlr.js";import{_ as Re}from"./BaseTooltip.vue_vue_type_script_setup_true_lang-3d9e3MGe.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as ga}from"./ContentItem-BL1x6kSy.js";import{_ as va}from"./OpenGraphItemAlt.vue_vue_type_script_setup_true_lang--zzAjURr.js";import{_ as ha}from"./BaseRippleItem.vue_vue_type_script_setup_true_lang-DbjJfmIp.js";import{B as pa}from"./BaseDropdownMenu-CclU0JRu.js";import{B as ya}from"./BaseCard-Bm1Lpw60.js";import{_ as Ca}from"./BaseInfiniteScroll.vue_vue_type_script_setup_true_lang-C3Nex_OU.js";import{C as ce}from"./ClosePopup-DtxLueY-.js";import{_ as ba}from"./BaseLink.vue_vue_type_script_setup_true_lang-BHZP5LKJ.js";import{u as ka}from"./useAppMeta-COwviB9Q.js";import{_ as Ma}from"./BaseResult.vue_vue_type_script_setup_true_lang-ClkNRJF1.js";import{_ as Ta}from"./BaseSpinner.vue_vue_type_script_setup_true_lang-Cho6L0Ja.js";import{_ as ze}from"./SkeletonItem.vue_vue_type_script_setup_true_lang-D3n49ZFv.js";const wa={key:0,class:"row"},Sa={class:"col"},Ia={key:1,class:"row q-py-sm"},$a={class:"row"},Ra=X({__name:"ChatInput",props:{inputId:{},emojiPickerId:{default:"chat-emoji"},loading:{type:Boolean,default:!1},inputDense:{type:Boolean,default:!0},inputAvata:{type:Boolean,default:!0},miniChat:{type:Boolean,default:!1}},emits:["on-submit","on-blur","on-input-update"],setup(n,{expose:b,emit:S}){const M=ue(()=>re(()=>import("./BaseEmojiPicker-BVmq-1ys.js"),__vite__mapDeps([0,1,2,3,4]))),c=ue(()=>re(()=>import("./BaseMapPreview-dJmrWvDX.js"),__vite__mapDeps([5,2,3,6,7]))),T=S,{t:k}=ge(),p=d(),w=Ze(),m=d(),s=d([]),u=d(),r=d([]),B=d(),A=d(!1),q=be("chatInputRef");ke(()=>{de(),_()});const de=()=>{document.addEventListener("paste",ne)},G=()=>{document.removeEventListener("paste",ne)},ne=async f=>{const L=f.clipboardData.items;for(let E=0;E<L.length;E++){const le=L[E];if(le.type.includes("image")){const j=le.getAsFile(),W=await ca(j);r.value.push({id:null,fileMime:j.type,fileName:j.name,filePath:W||"",fileThumbnailPath:W||"",fileSize:j.size,file:j,isImage:!0})}}},se=f=>{r.value.length>0&&r.value.splice(f,1)},J=V(()=>!!(p.value&&p.value.trim().length>0||s.value.length>0||r.value.length>0||B.value)),N=f=>{if(f&&f.shiftKey)return;const L=p.value&&p.value.trim().length>0?p.value.trim():void 0;if(!(!L&&s.value.length==0&&r.value.length==0)){if(r.value.length>0)for(const E of r.value)E.file&&s.value.push(E.file);D(L,s.value),Y()}},D=(f,L,E=void 0)=>{T("on-submit",f,L,E)},Q=async f=>{f&&f.length>0&&(D(void 0,f),u.value=setTimeout(()=>{Y()},350))},U=async()=>{B.value&&(D(void 0,void 0,B.value),Y())},Z=()=>{B.value=void 0,A.value=!1},Y=()=>{p.value=void 0,B.value=void 0,s.value=[],r.value=[],A.value=!1},x=f=>{p.value||(p.value=""),p.value+=f},_=()=>{q.value&&q.value.focus()},C=f=>{T("on-input-update",f)},v=f=>{T("on-blur",f)};return gt(()=>{u.value&&(clearTimeout(u.value),u.value=void 0),G()}),b({onInputFocus:_}),(f,L)=>(i(),$("div",Ee(Le(f.$attrs)),[A.value?(i(),$("div",wa,[O("div",Sa,[a(l(c),{modelValue:B.value,"onUpdate:modelValue":L[0]||(L[0]=E=>B.value=E),title:l(k)("chats.shareLocation")},{side:e(()=>[a(F,{disable:f.loading||!J.value,onClick:U,flat:"",round:"",icon:l(Ae),color:"primary"},{default:e(()=>[a(fe,null,{default:e(()=>[z(P(l(k)("chats.send")),1)]),_:1})]),_:1},8,["disable","icon"]),a(F,{onClick:Z,flat:"",round:"",icon:l(vt)},{default:e(()=>[a(fe,null,{default:e(()=>[z(P(l(k)("base.close")),1)]),_:1})]),_:1},8,["icon"])]),_:1},8,["modelValue","title"])])])):y("",!0),r.value&&r.value.length>0?(i(),$("div",Ia,[(i(!0),$(H,null,ht(r.value,(E,le)=>(i(),$("div",{class:"col-3",key:`clipboardfile-${le}`},[a(fa,{item:E,index:le,fetch:!1,dense:"","image-size":"100px","show-delete":!0,"show-size":!1,"show-name":!1,onOnRemove:se},null,8,["item","index"])]))),128))])):y("",!0),A.value?y("",!0):(i(),h(oe,{key:2,dense:"",class:te(["q-mt-md",{"q-pa-none":!f.miniChat}])},{default:e(()=>[a(K,{side:""},{default:e(()=>[O("div",$a,[a(da,{ref_key:"filePickerRef",ref:m,multiple:"",modelValue:s.value,"onUpdate:modelValue":L[1]||(L[1]=E=>s.value=E),wildcard:"",icon:l(De),"show-preview":!1,onOnFileAdd:Q},{default:e(()=>[a(Qe,{disable:f.loading,dense:"",flat:"",round:"",icon:l(De),size:"sm",class:"text-capitalize"},{default:e(()=>[a(Re,null,{default:e(()=>[z(P(l(k)("base.chooseFile")),1)]),_:1})]),_:1},8,["disable","icon"])]),_:1},8,["modelValue","icon"]),a(F,{disable:f.loading,dense:"",flat:"",round:"",icon:l(We),size:"sm"},{default:e(()=>[a(pt,null,{default:e(()=>[a(Oe,null,{default:e(()=>[a(l(M),{"picker-id":f.emojiPickerId,"onOn:emojiClick":x},null,8,["picker-id"])]),_:1})]),_:1})]),_:1},8,["disable","icon"]),a(Qe,{disable:f.loading,dense:"",flat:"",round:"",icon:l(yt),size:"sm",onClick:L[2]||(L[2]=E=>A.value=!0)},{default:e(()=>[a(Re,null,{default:e(()=>[z(P(l(k)("chats.shareLocation")),1)]),_:1})]),_:1},8,["disable","icon"])])]),_:1}),a(K,null,{default:e(()=>[a(ae,null,{default:e(()=>[a(Xe,Je({ref_key:"chatInputRef",ref:q,readonly:f.loading,tabindex:"1"},f.$attrs,{outlined:"",modelValue:p.value,"onUpdate:modelValue":[L[4]||(L[4]=E=>p.value=E),C],type:"textarea",autogrow:"",dense:f.inputDense,label:l(k)("chats.typeMessage"),class:"input-emoji",onKeyup:[Ve(N,["enter"]),Ve(Ct(N,["shift"]),["enter"])],onBlur:v}),Ye({after:e(()=>[a(F,{disable:f.loading||!J.value,onClick:L[3]||(L[3]=E=>N(E)),flat:"",round:"",icon:l(Ae),size:f.miniChat?"sm":"md",color:"primary"},{default:e(()=>[a(Re,null,{default:e(()=>[z(P(l(k)("chats.send")),1)]),_:1})]),_:1},8,["disable","icon","size"])]),_:2},[f.inputAvata?{name:"prepend",fn:e(()=>[l(w)?.auth?.avatar?.thumbnail?(i(),h(pe,{key:0,src:l(w)?.auth?.avatar?.thumbnail},null,8,["src"])):y("",!0)]),key:"0"}:void 0]),1040,["readonly","modelValue","dense","label","onKeyup"])]),_:1})]),_:1})]),_:1},8,["class"]))],16))}}),za=ye(Ra,[["__scopeId","data-v-d7c904b0"]]),Be=bt("chatStore",()=>{const n=d(!1),b=d(),S=d(),M=d(!1),c=d(),T=d(),k=d(0),p=d(),w=d(!1),m=d(),s=d(!1);return{removeChat:n,chatId:b,totalNewChat:k,toggleChatSetting:M,chatSettingType:c,clearSetting:()=>{b.value=void 0,c.value=void 0,M.value=!1,T.value=void 0},currentDateForShow:p,requestItem:T,messageIdFocus:S,onCloseMiniChatPage:()=>{w.value=!1,m.value=void 0,s.value=!1},openMiniChatPage:w,miniChatGroupId:m,miniChatMinimize:s,isCurrentOpenMiniChatByGroupId:A=>A?w.value&&m.value&&m.value==A:!1}}),Pa={class:"row justify-center q-pa-sm q-gutter-sm"},Ea={key:"btn-1",class:"btn-holder"},La={key:"btn-2",class:"btn-holder"},Oa={key:"btn-3",class:"btn-holder"},Ba={key:"btn-4",class:"btn-holder"},Aa={key:"btn-5",class:"btn-holder"},Da=X({__name:"AppReactionMenu",props:{iconSize:{default:"40px"},iconZoomSize:{default:"55px"}},emits:["on:like"],setup(n,{emit:b}){const S=b,M=d(!1),c=d(!1),T=d(!1),k=d(!1),p=d(!1),w=m=>{S("on:like",m)};return(m,s)=>(i(),$("div",Pa,[a(kt,{appear:"","enter-active-class":"animated lightSpeedInLeft"},{default:e(()=>[O("div",Ea,[a(F,{round:"",dense:"",flat:"",color:"primary",onMouseover:s[0]||(s[0]=u=>M.value=!0),onMouseleave:s[1]||(s[1]=u=>M.value=!1),onClick:s[2]||(s[2]=u=>w("LIKE"))},{default:e(()=>[a(ie,{name:M.value?l(Mt):l(Tt),size:M.value?m.iconZoomSize:m.iconSize},null,8,["name","size"]),a(fe,{class:"bg-primary",anchor:"top middle",self:"center middle"},{default:e(()=>s[15]||(s[15]=[z(" Like ")])),_:1})]),_:1})]),O("div",La,[a(F,{round:"",dense:"",flat:"",color:"green",onMouseover:s[3]||(s[3]=u=>c.value=!0),onMouseleave:s[4]||(s[4]=u=>c.value=!1),onClick:s[5]||(s[5]=u=>w("FIGHTING"))},{default:e(()=>[a(ie,{name:c.value?l(wt):l(St),size:c.value?m.iconZoomSize:m.iconSize},null,8,["name","size"]),a(fe,{class:"bg-green",anchor:"top middle",self:"center middle"},{default:e(()=>s[16]||(s[16]=[z(" Give going ")])),_:1})]),_:1})]),O("div",Oa,[a(F,{round:"",dense:"",flat:"",color:"orange",onMouseover:s[6]||(s[6]=u=>T.value=!0),onMouseleave:s[7]||(s[7]=u=>T.value=!1),onClick:s[8]||(s[8]=u=>w("LAUGH"))},{default:e(()=>[a(ie,{name:T.value?l(It):l($t),size:T.value?m.iconZoomSize:m.iconSize},null,8,["name","size"]),a(fe,{class:"bg-orange",anchor:"top middle",self:"center middle"},{default:e(()=>s[17]||(s[17]=[z(" LOL ")])),_:1})]),_:1})]),O("div",Ba,[a(F,{round:"",dense:"",flat:"",color:"pink",onMouseover:s[9]||(s[9]=u=>k.value=!0),onMouseleave:s[10]||(s[10]=u=>k.value=!1),onClick:s[11]||(s[11]=u=>w("CARE"))},{default:e(()=>[a(ie,{name:k.value?l(Rt):l(zt),size:k.value?m.iconZoomSize:m.iconSize},null,8,["name","size"]),a(fe,{class:"bg-pink",anchor:"top middle",self:"center middle"},{default:e(()=>s[18]||(s[18]=[z(" Care ")])),_:1})]),_:1})]),O("div",Aa,[a(F,{round:"",dense:"",flat:"",color:"deep-purple",onMouseover:s[12]||(s[12]=u=>p.value=!0),onMouseleave:s[13]||(s[13]=u=>p.value=!1),onClick:s[14]||(s[14]=u=>w("SAD"))},{default:e(()=>[a(ie,{name:p.value?l(Pt):l(Et),size:p.value?m.iconZoomSize:m.iconSize},null,8,["name","size"]),a(fe,{class:"bg-deep-purple",anchor:"top middle",self:"center middle"},{default:e(()=>s[19]||(s[19]=[z(" Sad ")])),_:1})]),_:1})])]),_:1})]))}}),Va=ye(Da,[["__scopeId","data-v-0806a157"]]),Fa=X({__name:"ChatMessageMenu",props:{chatId:{},sent:{type:Boolean},showCopy:{type:Boolean,default:!0},messageType:{}},emits:["message-delete","message-unsend","message-copy","on-hide","message-reply","message-share","on-share-post","on-share-action"],setup(n,{emit:b}){const S=b,{appConfirm:M}=Me(),{t:c}=ge(),T=[{label:c("chats.reply"),value:1,icon:Lt,onHandle(){m()}},{label:c("chats.share"),value:2,icon:Ot,onHandle(){s()}},{label:c("base.copy"),value:3,icon:Bt,onHandle(){w()}},{label:c("base.delete"),value:4,icon:At,onHandle(){k()}},{label:c("chats.unsendMessage"),value:5,icon:Dt,onHandle(){p()}}];ke(()=>{n.showCopy||T.splice(2,1),n.sent||T.splice(4,1)});const k=async()=>{await M(c("app.monogram"),c("chats.deleteChatConfirm"))&&S("message-delete")},p=async()=>{await M(c("app.monogram"),c("chats.unsendMessageConfirm"))&&S("message-unsend")},w=async()=>{S("message-copy")},m=()=>{S("message-reply")},s=()=>{S("message-share")};return(u,r)=>(i(),h(pa,{items:T,onOnHide:r[0]||(r[0]=B=>u.$emit("on-hide"))},{default:e(()=>[a(F,{flat:"",round:"",dense:"",size:"sm",icon:l(Vt),class:"text-muted",style:{opacity:"0.5"}},null,8,["icon"])]),_:1}))}}),Na=["id"],Ua={class:"col-12"},qa={class:"text-muted"},ja={class:"text-muted"},Ha={class:"text-muted"},Ga={key:0,class:"text-muted text-caption"},Qa={class:"row items-center",style:{"z-index":"99999"}},Ka=X({__name:"ChatMessageItem",props:{item:{},chatType:{},index:{},showSenderAvatar:{type:Boolean,default:!1},showSenderName:{type:Boolean,default:!1},label:{},haveReply:{type:Boolean,default:!1},miniChat:{type:Boolean,default:!1},highLightText:{}},emits:["message-reaction","message-delete","message-unsend","message-reply","on-open-seen-dialog","message-share"],setup(n,{emit:b}){const S=ue(()=>re(()=>import("./ChatMessageFile-hC8I5n-W.js"),__vite__mapDeps([8,9,2,3,10,11,12,13,6,14,15]))),M=ue(()=>re(()=>import("./ChatMessageEngage-CdIU6-6Z.js"),__vite__mapDeps([16,2,3,6,17]))),c=ue(()=>re(()=>import("./BaseMapPreview-dJmrWvDX.js"),__vite__mapDeps([5,2,3,6,7]))),T=b,k=Be(),{screen:p,dark:w}=xe(),{t:m}=ge(),{appFormatDateTimeAuto:s,writeToClipboard:u}=Me();d(!1);const r=d(!1),B=d(null),A=V(()=>n.item.sent?"absolute-bottom-left q-text-black":"absolute-bottom-right q-text-black"),q=V(()=>n.item.sent?"left: -55px;":"right: -50px;"),de=V(()=>n.item.sent?"absolute-bottom-right":"absolute-bottom-left"),G=V(()=>n.item.sent?n.item.chatMsg?"bottom:-25px":"bottom:-15px":n.item.chatMsg?"bottom:-55px":"bottom:-25px"),ne=V(()=>n.item.sent?n.showSenderName?m("base.you"):"":n.item.sendUser?.name),se=V(()=>!n.item?.files||n.item.files.length==0?[]:n.item.files.filter(t=>t.fileManager&&t.fileManager.image)),J=V(()=>n.item.files?n.item.files.filter(t=>t.fileManager&&!t.fileManager.image):[]),N=V(()=>n.item.unsend||n.item.chatMessageType=="LEAVE"||n.item.chatMessageType=="INVITE"),D=V(()=>se.value.length>0&&!n.item.chatMsg&&J.value.length==0),Q=V(()=>N.value?"message-unsend":D.value?"message-transparent":n.item.sent?"message-sent":"message-received"),U=V(()=>n.item.sent?"#":`user/${n.item.sendUser?.id}`),Z=V(()=>n.item.reactionEngage&&n.item.reactionEngage.length>0?"q-mb-xl":"q-mb-sm"),Y=V(()=>{if(N.value||!n.item.files)return;if(n.item.chatMessageType=="LOCATION")return n.miniChat?"10":"9";const t=se.value.length,ee=J.value.length;if(n.miniChat&&(t>0||ee>0))return"10";if(p.gt.xs){if(t==1||t==2)return"4";if(t>0)return"6"}else if(t>0)return"8"}),x=V(()=>N.value?w.isActive?"grey-4":"grey-7":n.item.sent?"grey-10":w.isActive?"white":"black"),_=async()=>{n.item.id&&T("message-delete",n.item.id)},C=async()=>{n.item.id&&T("message-unsend",n.item.id)},v=async()=>{n.item.id&&T("message-reply",n.item.id)},f=async()=>{n.item.id&&T("message-share",n.item.id)},L=async()=>{console.log("onCopy"),n.item.chatMsg&&await u(n.item.chatMsg)},E=async t=>{n.item.id&&T("message-reaction",t,n.item.id)},le=()=>{!n.item.id||!n.item?.readCount||n.item.readCount==0||!n.item.sent||n.chatType=="PERSONAL"||T("on-open-seen-dialog",n.item.id,n.item.readCount)},j=t=>new Promise(ee=>{B.value=setTimeout(()=>{r.value=t,ee(!0)},500)}),W=async()=>{r.value=!0,await j(!1),await j(!0),await j(!1),await j(!0),await j(!1),clearTimeout(B.value),B.value=null,k.messageIdFocus=void 0},Te=t=>{console.log("onReactionClick",t)};return _e(k,t=>{n.item&&n.item.id&&t&&t.messageIdFocus&&t.messageIdFocus==n.item.id&&W()}),(t,ee)=>{const Ce=Ft("router-link");return t.item&&t.index!=null?(i(),$("div",Je({key:0},t.$attrs,{class:["row",{"holder-recive":!t.item.sent&&t.miniChat,"holder-sent":t.item.sent&&t.miniChat}],id:`${l(Nt)}-${t.item.id}`}),[O("div",Ua,[t.item.onlyLabel?(i(),$(H,{key:0},[t.item.chatMsg?(i(),h(ve,{key:0},{label:e(()=>[O("span",qa,P(t.item.chatMsg),1)]),_:1})):y("",!0)],64)):(i(),$(H,{key:1},[t.label?(i(),h(ve,{key:0},{label:e(()=>[O("span",ja,P(t.label),1)]),_:1})):y("",!0),t.item?(i(),h(ve,{key:1,"text-color":x.value,"bg-color":Q.value,class:te(Z.value),size:Y.value,sent:t.item.sent},Ye({name:e(()=>[O("div",Ha,[!t.item.sent&&t.chatType!="PERSONAL"&&(!t.haveReply||t.item.unsend)?(i(),$(H,{key:0},[U.value?(i(),h(Ce,{key:0,to:U.value},{default:e(()=>[z(P(ne.value),1)]),_:1},8,["to"])):y("",!0)],64)):y("",!0)])]),stamp:e(()=>[O("span",{class:te(["text-caption",{"text-muted":l(w).isActive&&D.value}])},P(l(s)(t.item.msgDateTime)),3)]),default:e(()=>[O("div",{class:te({"message-focus":r.value})},[!t.item.sent&&t.chatType!="PERSONAL"&&t.haveReply&&!t.item.unsend?(i(),$("div",Ga,P(ne.value),1)):y("",!0),N.value?t.item.chatMsg?(i(),$(H,{key:2},[z(P(t.item.chatMsg),1)],64)):(i(),$(H,{key:3},[z(P(l(m)("chats.unsend")),1)],64)):(i(),$(H,{key:1},[t.item.chatMessageType!="LOCATION"?(i(),$(H,{key:0},[t.item.chatMsg?(i(),h(ga,{key:0,class:te([l(p).gt.xs?"text-div-web":"text-div-mobile","q-pa-xs"]),"wrap-text":!0,limit:20,"is-escape-html":"","high-light-text":t.highLightText||"",content:t.item.chatMsg,"hashtag-urlify":!1,"content-id":`chat-message-${t.item.id}-${t.index}-content`,"link-style":(t.item.sent,"app-text-link"),"text-style":"text-black"},null,8,["class","high-light-text","content","content-id","link-style"])):y("",!0),t.item.chatMsg?(i(),h(va,{key:1,class:"q-pa-sm",style:Se({maxWidth:l(p).xs?"60vw":t.miniChat?"13vw":"25vw"}),content:t.item.chatMsg,short:!t.miniChat,"image-max-height":t.miniChat?"120px":"150px","image-size":t.miniChat?"50px":"120px","show-bg":!1},null,8,["style","content","short","image-max-height","image-size"])):y("",!0),t.item.files&&t.item.files.length>0&&t.item.id?(i(),h(l(S),{key:2,class:"q-mt-sm","mini-chat":t.miniChat,"chat-id":t.item.id,files:t.item.files,sent:t.item.sent},null,8,["mini-chat","chat-id","files","sent"])):y("",!0)],64)):(i(),h(l(c),{key:1,"preview-src":t.item.chatMsg,preview:"",height:t.miniChat?140:150,zoom:2},null,8,["preview-src","height"])),t.item.reactionEngage&&t.item.reactionEngage.length>0?(i(),$("div",{key:2,class:te(de.value),style:Se([G.value,{width:"175px"}])},[t.item.reactionEngage&&t.item.reactionEngage.length>0&&t.item.id?(i(),h(l(M),{key:0,"chat-id":t.item.id,class:te(t.item.sent?"float-right":"float-left"),items:t.item.reactionEngage,onOnClick:Te},null,8,["chat-id","class","items"])):y("",!0)],6)):y("",!0),t.item.sent&&t.item.readCount>0?(i(),h(ha,{key:3,class:"absolute-bottom-left text-muted text-weight-light text-caption app-border-radius q-px-xs","cursor-pointer":t.chatType!="PERSONAL",style:{left:"-50px",bottom:"25px"},onClick:le},{default:e(()=>[z(P(`${l(m)("chats.read")} ${t.chatType=="GROUP"?l(Ut)(t.item.readCount):""}`),1)]),_:1},8,["cursor-pointer"])):y("",!0),t.item.id?(i(),$("div",{key:4,class:te(A.value),style:Se(q.value)},[O("div",Qa,[a(Fa,{"chat-id":t.item.id,sent:t.item.sent,"show-copy":t.item.chatMsg!=null&&!0&&t.item.chatMsg.length>0,"message-type":t.item.chatMessageType,onMessageCopy:L,onMessageDelete:_,onMessageUnsend:C,onMessageReply:v,onMessageShare:f},null,8,["chat-id","sent","show-copy","message-type"]),a(F,{flat:"",round:"",dense:"",size:"sm",icon:l(We),class:te(t.item.liked?"text-amber-9":"text-muted")},{default:e(()=>[a(Oe,{"auto-close":"",anchor:"top end",self:"bottom middle",style:{height:"65px",width:"265px"}},{default:e(()=>[a(Va,{"onOn:like":E})]),_:1})]),_:1},8,["icon","class"])])],6)):y("",!0)],64))],2)]),_:2},[!t.item.sent||t.showSenderAvatar?{name:"avatar",fn:e(()=>[U.value&&t.item.sendUser?.avatar?.thumbnail?(i(),h(Ce,{key:0,to:U.value},{default:e(()=>[a(pe,{class:"q-mr-xs",src:t.item.sendUser?.avatar?.thumbnail,"fetch-image":""},null,8,["src"])]),_:1},8,["to"])):y("",!0)]),key:"0"}:void 0]),1032,["text-color","bg-color","class","size","sent"])):y("",!0)],64))])],16,Na)):y("",!0)}}}),Za=ye(Ka,[["__scopeId","data-v-7c08e8f0"]]),Wa=X({__name:"ChatMessage",props:{item:{},chatType:{},index:{},showSenderAvatar:{type:Boolean,default:!1},showSenderName:{type:Boolean,default:!1},miniChat:{type:Boolean,default:!1},label:{},highLightText:{}},emits:["message-reaction","message-delete","message-unsend","message-reply","on-open-seen-dialog","message-share","on-focus-message-reply"],setup(n,{emit:b}){const S=ue(()=>re(()=>import("./ChatMessageReply-DsqhG25_.js"),__vite__mapDeps([18,2,3,11,12,13,6,14,19,20,21,22,23,15,10,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,4,41,42]))),M=b,c=async u=>{n.item.id&&M("message-reaction",u,n.item.id)},T=async()=>{n.item.id&&M("message-delete",n.item.id)},k=async()=>{n.item.id&&M("message-unsend",n.item.id)},p=async()=>{n.item.id&&M("message-reply",n.item.id)},w=async()=>{n.item.id&&M("message-share",n.item.id)},m=(u,r)=>{M("on-open-seen-dialog",u,r)},s=u=>{M("on-focus-message-reply",u)};return(u,r)=>(i(),$(H,null,[u.item.dtoReplyTo&&!u.item.unsend?(i(),h(l(S),{key:0,item:u.item.dtoReplyTo,sent:u.item.sent,onOnClick:s,"mini-chat":u.miniChat},null,8,["item","sent","mini-chat"])):y("",!0),a(Za,{item:u.item,index:u.index,"chat-type":u.chatType,"have-reply":u.item.dtoReplyTo!=null,"mini-chat":u.miniChat,"high-light-text":u.highLightText,"show-sender-avatar":u.showSenderAvatar,"show-sender-name":u.showSenderName,onMessageDelete:T,onMessageUnsend:k,onMessageReply:p,onMessageReaction:c,onOnOpenSeenDialog:m,onMessageShare:w},null,8,["item","index","chat-type","have-reply","mini-chat","high-light-text","show-sender-avatar","show-sender-name"])],64))}}),Xa={key:0},Ja=X({__name:"ChatGroupAvatar",props:{item:{},avatarSize:{default:"40px"},rounded:{type:Boolean,default:!1},showPin:{type:Boolean,default:!0}},setup(n){return(b,S)=>b.item?(i(),$("div",Xa,[b.item.dtoAvatar?(i(),h(pe,{key:0,"fetch-image":"",rounded:b.rounded,src:b.item.dtoAvatar.thumbnail,size:b.avatarSize},{extra:e(()=>[he(b.$slots,"extra",{},()=>[b.item.online?(i(),h(Pe,{key:0,floating:"",color:"positive",rounded:"",transparent:"",class:"absolute"})):y("",!0),b.showPin&&b.item.pin?(i(),h(Ie,{key:1,class:"absolute",color:"primary",size:"18px",style:{top:"25px",left:"25px"}},{default:e(()=>[a(ie,{color:"white",name:l(Fe)},null,8,["name"])]),_:1})):y("",!0)])]),_:3},8,["rounded","src","size"])):(i(),h(Ie,{key:1,size:`${b.avatarSize}px`,rounded:b.rounded},{default:e(()=>[a(qt,{alt:"avatar",src:"images/ninja.png"}),he(b.$slots,"extra",{},()=>[b.item.online?(i(),h(Pe,{key:0,floating:"",color:"positive",rounded:"",transparent:"",class:"absolute"})):y("",!0),b.showPin&&b.item.pin?(i(),h(Ie,{key:1,class:"absolute",color:"primary",size:"18px",style:{top:"25px",left:"25px"}},{default:e(()=>[a(ie,{color:"white",name:l(Fe)},null,8,["name"])]),_:1})):y("",!0)])]),_:3},8,["size","rounded"]))])):y("",!0)}}),Ya=X({__name:"ChatMenu",props:{chatId:{},pin:{type:Boolean},favorite:{type:Boolean},muteNotify:{type:Boolean},chatType:{}},emits:["toggle-mute","toggle-pin","toggle-fav","toggle-chat","delete-chat","leave-group","invite-people","on-close"],setup(n,{emit:b}){const S=b,{appConfirm:M}=Me(),{t:c}=ge(),T=()=>{n.chatId&&S("on-close",n.chatId)},k=()=>{n.chatId&&S("toggle-mute",n.chatId)},p=()=>{n.chatId&&S("toggle-pin",n.chatId)},w=()=>{n.chatId&&S("toggle-fav",n.chatId)},m=()=>{n.chatId&&S("invite-people",n.chatId)},s=async()=>{if(!n.chatId)return;await M(c("app.monogram"),c("chats.deleteChatConfirm"))&&S("delete-chat",n.chatId)},u=async()=>{if(!n.chatId)return;await M(c("app.monogram"),c("chats.leaveGroupConfirm"))&&S("leave-group",n.chatId)};return(r,B)=>(i(),h(Oe,Ee(Le(r.$attrs)),{default:e(()=>[a(jt,{dense:""},{default:e(()=>[me((i(),h(oe,{clickable:"",onClick:k},{default:e(()=>[a(K,null,{default:e(()=>[a(ae,null,{default:e(()=>[z(P(r.muteNotify?l(c)("chats.unmuteNotify"):l(c)("chats.muteNotify")),1)]),_:1})]),_:1})]),_:1})),[[ce]]),me((i(),h(oe,{clickable:"",onClick:p},{default:e(()=>[a(K,null,{default:e(()=>[a(ae,null,{default:e(()=>[z(P(r.pin?l(c)("chats.unpin"):l(c)("chats.pin")),1)]),_:1})]),_:1})]),_:1})),[[ce]]),me((i(),h(oe,{clickable:"",onClick:w},{default:e(()=>[a(K,null,{default:e(()=>[a(ae,null,{default:e(()=>[z(P(r.favorite?l(c)("chats.unfavorite"):l(c)("chats.favorite")),1)]),_:1})]),_:1})]),_:1})),[[ce]]),r.chatType=="GROUP"?me((i(),h(oe,{key:0,clickable:"",onClick:m},{default:e(()=>[a(K,null,{default:e(()=>[a(ae,null,{default:e(()=>[z(P(l(c)("chats.invite")),1)]),_:1})]),_:1})]),_:1})),[[ce]]):y("",!0),me((i(),h(oe,{clickable:"",onClick:s},{default:e(()=>[a(K,null,{default:e(()=>[a(ae,{class:"text-negative"},{default:e(()=>[z(P(l(c)("base.delete")),1)]),_:1})]),_:1})]),_:1})),[[ce]]),r.chatType=="GROUP"?me((i(),h(oe,{key:1,clickable:"",onClick:u},{default:e(()=>[a(K,null,{default:e(()=>[a(ae,{class:"text-negative"},{default:e(()=>[z(P(l(c)("chats.leaveGroup")),1)]),_:1})]),_:1})]),_:1})),[[ce]]):y("",!0),me((i(),h(oe,{clickable:"",onClick:T},{default:e(()=>[a(K,null,{default:e(()=>[a(ae,null,{default:e(()=>[z(P(l(c)("base.close")),1)]),_:1})]),_:1})]),_:1})),[[ce]])]),_:1})]),_:1},16))}}),xa={class:"row"},_a=X({__name:"ChatContentHeader",props:{miniChat:{type:Boolean,default:!1},miniminze:{type:Boolean,default:!1},item:{},chatWith:{}},emits:["toggle-mute","toggle-pin","toggle-fav","toggle-chat","delete-chat","leave-group","invite-people","on-close"],setup(n){const b=d(0),{t:S}=ge(),M=d(!1),c=d(""),T=V(()=>n.chatWith?`/user/${n.chatWith.id}`:"#"),k=()=>{c.value=""},p=()=>{M.value=!M.value,M.value||k()},w=()=>{const m=c.value?c.value.trim():void 0;m||(!m||m.length==0)&&k()};return(m,s)=>(i(),h(oe,{class:"card-top-bg"},{default:e(()=>[m.miniChat&&m.miniminze&&b.value>0?(i(),h(Pe,{key:0,color:"negative",floating:""},{default:e(()=>[z(P(b.value),1)]),_:1})):y("",!0),a(K,{avatar:""},{default:e(()=>[a(Ja,{item:m.item},null,8,["item"])]),_:1}),a(K,null,{default:e(()=>[a(ae,{lines:"2"},{default:e(()=>[a(ba,{to:T.value},{default:e(()=>[z(P(m.item.groupName),1)]),_:1},8,["to"]),m.item.favorite?(i(),h(ie,{key:0,color:"amber-8",size:"14px",class:"q-ml-xs q-mb-xs",name:l(Ht)},null,8,["name"])):y("",!0)]),_:1}),a(ae,{caption:"",lines:"1"},{default:e(()=>[z(P(m.item.chatType=="PERSONAL"?"Software engineer":"Group"),1)]),_:1})]),_:1}),a(K,{side:""},{default:e(()=>[O("div",xa,[he(m.$slots,"headerRight",{},()=>[m.miniChat?y("",!0):(i(),$(H,{key:0},[a(Gt,{onSubmit:w},{default:e(()=>[M.value?(i(),h(Xe,{key:0,modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=u=>c.value=u),outlined:"",dense:"",clearable:"",onClear:k,placeholder:l(S)("chats.searchMessage")},null,8,["modelValue","placeholder"])):y("",!0)]),_:1}),a(F,{onClick:p,flat:"",round:"",icon:l(Qt),size:"sm"},null,8,["icon"])],64)),m.item.id?(i(),h(F,{key:1,flat:"",round:"",icon:m.miniChat?l(Zt):l(Kt),size:"sm"},{default:e(()=>[a(Ya,{"chat-id":m.item.id,"chat-type":m.item.chatType,pin:m.item.pin,"mute-notify":m.item.muteNotify,favorite:m.item.favorite,"mini-chat":m.miniChat,onTogglePin:s[1]||(s[1]=u=>m.$emit("toggle-pin",u)),onToggleMute:s[2]||(s[2]=u=>m.$emit("toggle-mute",u)),onToggleFav:s[3]||(s[3]=u=>m.$emit("toggle-fav",u)),onDeleteChat:s[4]||(s[4]=u=>m.$emit("delete-chat",u)),onLeaveGroup:s[5]||(s[5]=u=>m.$emit("leave-group",u)),onInvitePeople:s[6]||(s[6]=u=>m.$emit("invite-people",u)),onOnClose:s[7]||(s[7]=u=>m.$emit("on-close",u))},null,8,["chat-id","chat-type","pin","mute-notify","favorite","mini-chat"])]),_:1},8,["icon"])):y("",!0)],!0)])]),_:3})]),_:3}))}}),en=ye(_a,[["__scopeId","data-v-1ae1ed4e"]]),tn={class:"text-center"},an={key:1,class:"row justify-center absolute full-width",style:{bottom:"50px"}},nn=X({__name:"ChatContent",props:Ne({showHeader:{type:Boolean,default:!0},square:{type:Boolean,default:!1},inputDense:{type:Boolean},inputAvata:{type:Boolean,default:!0},scrollAreaHeight:{default:"65vh"},miniChat:{type:Boolean,default:!1},miniminze:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:Ne(["toggle-mute","toggle-pin","toggle-fav","toggle-chat","delete-chat","leave-group","on-close"],["update:modelValue"]),setup(n,{emit:b}){const S=ue(()=>re(()=>import("./ChatReplyItem-Dchl1twq.js"),__vite__mapDeps([43,2,3,11,12,13,6,14]))),{t:M}=ge(),{isDark:c}=Wt();Be();const T=Ze(),k=Xt(n,"modelValue"),p=d([...Jt.dataList]),w=be("chatInfinityScrollRef"),m=d(""),s=d({chatMsg:null,fileIds:[],chatMessageType:null}),u=d(!1),r=d(),B=d(!1),A=d(),q=d(!1),de=d(0),G=d(!0),ne=d(),se=be("chatContentInputRef"),J=d(!1);d(0);const N=d(),D=be("scrollerChatRef"),Q=d(!0),U=d(!1),Z=d(0),Y=d(0),x=d(1e3),_=d(!1),C=d(null),v=d(null);ke(async()=>{f()});const f=async()=>{C.value=setTimeout(()=>{W(),C.value=setTimeout(()=>{Q.value=!1},1e3)},1500)},L=(o,g)=>{console.log("onInfiniteChatVirtual",o),setTimeout(async()=>{g(),E()},1e3)},E=()=>{w.value&&(w.value.stop(),Q.value=!0)},le=()=>{w.value&&(w.value.resume(),Q.value=!1)},j=o=>{o&&(_.value=o.visibleEndIndex!=o.viewEndIndex)},W=()=>{_.value=!1,D.value&&D.value.onScrollToBottom()},Te=o=>{o!=null&&D.value&&D.value.onScrollToItem(o)},t=o=>{console.log("invitePeople",o)},ee=o=>new Promise(g=>{const I=p.value.findIndex(R=>R.id==o);g(I)}),Ce=async o=>new Promise(g=>{const I=p.value.find(R=>R.id==o);g(I)}),we=o=>p.value[o],et=o=>new Promise(g=>{o>=0&&p.value.splice(o,1),g(!0)}),tt=async o=>{console.log("messageDelete",o),E();const g=await ee(o);g>=0&&await et(g),W(),le()},at=async(o,g=!0)=>{if(console.log("messageUnsend",{messageId:o,unsendToServer:g}),!o)return;const I=await ee(o);if(I>=0){const R=we(I);R&&(R.unsend=!0,R.chatMsg=void 0,R.files=[],R.reactionEngage=[])}},nt=async(o,g)=>{console.log("messageReaction",{l:o,messageId:g});const I=await ee(g);if(I>=0){const R=we(I);R&&(R.liked?R.liked&&R.emojiType==o?(R.liked=!1,R.emojiType=null):R.emojiType=o:(R.liked=!0,R.emojiType=o),R.reactionEngage||(R.reactionEngage=[]),R.reactionEngage.find(ft=>ft.emojiType==o)||R.reactionEngage.push({emojiType:o,total:1}))}},st=async o=>{console.log("messageReply",o),G.value=!1,ne.value=setTimeout(()=>{G.value=!0},100);const g=await ee(o);if(g>=0){const I=we(g);I&&(r.value=I)}},lt=()=>{r.value=void 0},ot=(o,g)=>{console.log("onOpenSeenDialog",{messageId:o,readCount:g}),o&&(A.value=o,de.value=g,q.value=!0)},it=async o=>{if(!o)return;const g=await ee(o);g>=0?Te(g):(A.value=o,B.value=!0)},ut=async o=>{if(console.log("onShare",o),!o)return;const g=await Ce(o);g&&(N.value=g,J.value=!0)},rt=async(o,g,I)=>{!k.value||!k.value?.id||!o&&!g&&!I||(U.value=!0,console.log("onSendMessage",{message:o,files:g,mapLatlong:I}),o&&(s.value.chatMsg=o),I&&(s.value.chatMsg=I,s.value.chatMessageType="LOCATION"),r.value&&r.value?.id&&(s.value.replyToId=r.value.id),g&&g.length>0,W(),await mt(),W(),await dt(),W(),ct())},mt=()=>{if(!s.value)return new Promise(g=>g(!0));x.value++;const o={id:x.value,chatMsg:s.value.chatMsg,msgDateTime:qe(je),groupId:17,readCount:10,unsend:!1,sent:!0,sendUser:T.auth,files:[],liked:!1,emojiType:null,reactionEngage:[],dtoReplyTo:r.value||null,chatMessageType:"TEXT"};return new Promise(g=>{v.value=setTimeout(()=>{U.value=!1,p.value.push(o),g(!0)},1e3)})},dt=()=>{u.value=!0,x.value++;const o={id:x.value,chatMsg:"Doing fine, how r you?",msgDateTime:qe(je),groupId:17,readCount:10,unsend:!1,sent:!1,sendUser:ta[aa(0,15)],files:[],liked:!1,emojiType:null,reactionEngage:[],dtoReplyTo:r.value||null,chatMessageType:"TEXT"};return new Promise(g=>{v.value=setTimeout(()=>{u.value=!1,p.value.push(o),g(!0)},1e3)})},ct=()=>{s.value.fileIds=[],s.value.chatMsg=null,s.value.replyToId=null,s.value.chatMessageType=void 0,r.value=void 0,Z.value=0,Y.value=0};return Yt(()=>{C.value&&(clearTimeout(C.value),C.value=null),v.value&&(clearTimeout(v.value),v.value=null)}),(o,g)=>(i(),$("div",Ee(Le(o.$attrs)),[k.value?(i(),h(ya,{key:0,flat:"",bordered:!o.square,class:te(["card-bg",{"card-minipage-style":o.miniChat}]),square:o.square},{default:e(()=>[o.showHeader?(i(),$(H,{key:0},[a(en,{item:k.value,"mini-chat":o.miniChat,miniminze:o.miniminze,onTogglePin:g[0]||(g[0]=I=>o.$emit("toggle-pin",I)),onToggleMute:g[1]||(g[1]=I=>o.$emit("toggle-mute",I)),onToggleFav:g[2]||(g[2]=I=>o.$emit("toggle-fav",I)),onDeleteChat:g[3]||(g[3]=I=>o.$emit("delete-chat",I)),onLeaveGroup:g[4]||(g[4]=I=>o.$emit("leave-group",I)),onInvitePeople:t,onOnClose:g[5]||(g[5]=I=>o.$emit("on-close",I))},null,8,["item","mini-chat","miniminze"]),a(xt)],64)):y("",!0),me(O("div",null,[a(ma,{id:"scroll-chat-target-id",ref_key:"scrollerChatRef",ref:D,class:"q-pa-sm","key-field":"id",items:p.value,"min-item-size":24,"scroll-area-height":o.scrollAreaHeight,onOnUpdate:j},{slotBefore:e(()=>[a(Ca,{ref_key:"chatInfinityScrollRef",ref:w,"scroll-target":"#scroll-chat-target-id",reverse:"",disable:Q.value,offset:0,onOnInfinite:L},null,8,["disable"])]),default:e(({item:I,index:R})=>[(i(),h(Wa,{key:`message-${I.id}-${R}`,item:I,index:R,"chat-type":k.value.chatType,"mini-chat":o.miniChat,"high-light-text":m.value,onMessageReaction:nt,onMessageDelete:tt,onMessageUnsend:at,onMessageReply:st,onOnOpenSeenDialog:ot,onOnFocusMessageReply:it,onMessageShare:ut},null,8,["item","index","chat-type","mini-chat","high-light-text"]))]),slotAfter:e(()=>[U.value?(i(),h(ve,{key:0,name:l(M)("base.you"),"bg-color":"message-sent",sent:""},{avatar:e(()=>[l(T)?.auth?.avatar?.thumbnail?(i(),h(pe,{key:0,class:"q-message-avatar q-message-avatar--sent",src:l(T)?.auth?.avatar?.thumbnail},null,8,["src"])):y("",!0)]),default:e(()=>[O("div",null,[Z.value>0?(i(),$(H,{key:0},[z(P(l(M)("chats.sendFileFmt",{success:Y.value,total:Z.value})),1)],64)):(i(),$(H,{key:1},[z(P(l(M)("chats.sendingMessage")),1)],64)),a(Ue,{class:"q-ml-sm",size:"2rem"})])]),_:1},8,["name"])):y("",!0),u.value?(i(),h(ve,{key:1,"bg-color":"message-received",sent:!1},{avatar:e(()=>[a(pe,{class:"q-mr-xs",src:"https://cdn.quasar.dev/img/avatar4.jpg"})]),default:e(()=>[O("div",tn,[a(Ue,{size:"2rem",color:"primary"})])]),_:1})):y("",!0)]),_:1},8,["items","scroll-area-height"])],512),[[_t,!o.miniminze]]),_.value&&!o.miniminze?(i(),$("div",an,[a(F,{round:"",color:l(c)?"black":"white","text-color":l(c)?"white":"black",onClick:W,icon:l(ea)},null,8,["color","text-color","icon"])])):y("",!0)]),_:1},8,["bordered","class","square"])):y("",!0),r.value?(i(),h(l(S),{key:1,item:r.value,onOnClose:lt},null,8,["item"])):y("",!0),!o.miniminze&&k.value&&k.value.id&&G.value?(i(),h(za,{key:2,ref_key:"chatContentInputRef",ref:se,"input-id":k.value.id,"mini-chat":o.miniChat,"emoji-picker-id":`chat-message-emoji-${k.value.id}`,loading:U.value,onOnSubmit:rt,"input-dense":!0,"input-avata":o.inputAvata},null,8,["input-id","mini-chat","emoji-picker-id","loading","input-avata"])):y("",!0)],16))}}),sn=ye(nn,[["__scopeId","data-v-8e996434"]]),ln={class:"text-center"},Ke=X({__name:"BaseSuspense",setup(n){return(b,S)=>(i(),h(na,null,{default:e(()=>[he(b.$slots,"default")]),fallback:e(()=>[he(b.$slots,"fallback",{},()=>[O("div",ln,[a(Ta)])])]),_:3}))}}),on={class:"row"},un={key:0,class:"col-12 col-md-3 col-sm-4 q-pa-sm"},rn={key:1,class:"col-12"},mn={class:"col-12 col-md-6 col-sm-8 q-pa-md"},dn={key:2,style:{height:"50vh"},class:"row items-center flex-center"},cn={key:2,class:"col-12 col-md-3 q-pa-sm"},fn=X({__name:"index",setup(n){const b=ue(()=>re(()=>import("./ChatLeft-BDyyNAiy.js"),__vite__mapDeps([44,2,3,36,6,22,23,33,34,30,31,11,12,13,14,25,32,45,40,46,47,48,19,20,21,15,10,24,26,27,28,29,35,37,38,39,4,41,49]))),S=ue(()=>re(()=>import("./ChatRight-DLpwfelz.js"),__vite__mapDeps([50,2,3,11,12,13,6,14,33,34,22,23,46,47,48,37,19,20,21,15,10,24,25,26,27,28,29,30,31,32,35,36,38,39,40,4,41]))),{t:M}=ge(),{screen:c}=xe(),{setTitle:T}=ka();T(`${M("chats.chats")} | ${M("app.name")}`);const{getParamNumber:k,appNavigateTo:p}=Me(),w=Be(),{isSmallScreen:m,isMobileOrTablet:s}=sa(),u=la(),r=d(),B=V(()=>k("groupId")||0),A=d(!1),q=d(!1),de=d(!1),G=d(!0),ne=d([...oa.dataList]);ke(async()=>{s().then(C=>{C&&(A.value=!0)}),await J(),de.value=!0});const se=C=>{C&&p(`/example/chats/g/${C.id}`)},J=async()=>{if(G.value=!0,await N(),!B.value)return G.value=!1,new Promise(v=>v(!1));const C=ne.value.find(v=>v.id==B.value);return console.log("onFetchGroupData, id ",B.value,C),C&&(r.value=ia(C)),G.value=!1,new Promise(v=>{v(!0)})},N=()=>(r.value=void 0,new Promise(C=>{setTimeout(()=>{C(!0)},500)})),D=(C,v)=>{w.toggleChatSetting=!0,w.chatId=v,w.chatSettingType=C},Q=async(C,v=!0)=>{C&&(v&&r.value&&(console.log("toggleMute",C),r.value.muteNotify=!r.value.muteNotify),D("NOTIFICATION",C))},U=async(C,v=!0)=>{C&&(v&&r.value&&(r.value.pin=!r.value.pin),D("PIN",C))},Z=async(C,v=!0)=>{C&&(v&&r.value&&(r.value.favorite=!r.value.favorite),D("FAVORITE",C))},Y=async(C,v=!0)=>{C&&(D("LEAVE",C),v&&(N(),p("/example/chats/g/0",!0)))},x=async(C,v=!0)=>{C&&(D("LEAVE",C),v&&(N(),p("/example/chats/g/0",!0)))},_=C=>{console.log("onCloseChat",C),N(),p("/example/chats/g/0",!0)};return _e(()=>u.params.groupId,()=>{J()}),(C,v)=>(i(),h(ra,null,{default:e(()=>[a($e,{flat:"",square:"",style:{"min-height":"91vh"}},{default:e(()=>[O("div",on,[l(c).gt.xs?(i(),$("div",un,[a(Ke,null,{default:e(()=>[a(l(b),{class:"content-limit720",onOnItemClick:se,"group-item":r.value},null,8,["group-item"])]),fallback:e(()=>[a(ze,{no:5})]),_:1})])):(i(),$("div",rn,[a(F,{icon:l(He),flat:"",round:"",onClick:v[0]||(v[0]=f=>A.value=!0)},null,8,["icon"]),a(F,{icon:l(He),flat:"",round:"",onClick:v[1]||(v[1]=f=>q.value=!0),class:"float-right"},null,8,["icon"])])),O("div",mn,[G.value?(i(),h(ze,{key:0,"show-header":"",no:8})):r.value?(i(),h(sn,{key:1,modelValue:r.value,"onUpdate:modelValue":v[2]||(v[2]=f=>r.value=f),class:"content-limit",onToggleMute:Q,onTogglePin:U,onToggleFav:Z,onDeleteChat:Y,onLeaveGroup:x,onOnClose:_},null,8,["modelValue"])):(i(),$("div",dn,[a(Ma,{status:"empty",description:l(M)("chats.chatContentEmpty"),"show-icon":!1},{extra:e(()=>[a(ie,{name:l(ua),size:"120px",class:"text-muted"},null,8,["name"])]),_:1},8,["description"])]))]),l(c).gt.xs&&l(c).gt.sm?(i(),$("div",cn,[a(Ke,null,{default:e(()=>[r.value?(i(),h(l(S),{key:0,modelValue:r.value,"onUpdate:modelValue":v[3]||(v[3]=f=>r.value=f),onToggleMute:Q,onTogglePin:U,onToggleFav:Z,"show-close":l(m),onOnClose:v[4]||(v[4]=f=>q.value=!1),class:"content-limit720"},null,8,["modelValue","show-close"])):y("",!0)]),fallback:e(()=>[a(ze,{no:5})]),_:1})])):y("",!0)])]),_:1}),a(Ge,{modelValue:A.value,"onUpdate:modelValue":v[6]||(v[6]=f=>A.value=f),position:"left"},{default:e(()=>[a($e,{style:{"max-width":"350px","min-width":"90vw","min-height":"100vh"}},{default:e(()=>[a(l(b),{"auto-detect":!1,onOnItemClick:se,"show-close":"",onOnClose:v[5]||(v[5]=f=>A.value=!1),"group-item":r.value},null,8,["group-item"])]),_:1})]),_:1},8,["modelValue"]),q.value&&r.value?(i(),h(Ge,{key:0,modelValue:q.value,"onUpdate:modelValue":v[9]||(v[9]=f=>q.value=f),position:"right"},{default:e(()=>[a($e,{style:{"max-width":"350px","min-height":"100vh"}},{default:e(()=>[a(l(S),{modelValue:r.value,"onUpdate:modelValue":v[7]||(v[7]=f=>r.value=f),onToggleMute:Q,onTogglePin:U,onToggleFav:Z,"show-close":"",onOnClose:v[8]||(v[8]=f=>q.value=!1),class:"content-limit720"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])):y("",!0)]),_:1}))}}),Dn=Object.freeze(Object.defineProperty({__proto__:null,default:fn},Symbol.toStringTag,{value:"Module"}));export{Ja as _,Dn as i,Be as u};
