const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BaseEmojiPicker-Dl5voDQU.js","assets/BaseEmojiPicker.vue_vue_type_script_setup_true_lang-B-hPDP5c.js","assets/index-NsS699ic.js","assets/index-Fr33gqm_.css","assets/BaseSpinner.vue_vue_type_script_setup_true_lang-CvvY_8LO.js","assets/BaseMapPreview-VHVZ5P_O.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/BaseMapPreview-KhQNB2ht.css","assets/ChatMessageFile-CSiNQ9gL.js","assets/ChatMessageFile.vue_vue_type_script_setup_true_lang-D0XbGyjF.js","assets/BaseFilesPreviewItem.vue_vue_type_script_setup_true_lang-Bg2tRRak.js","assets/BaseAvatar-BQeHAjpV.js","assets/FileManagerService-B7wPTwmI.js","assets/useAxios-DXOj_sxf.js","assets/BaseAvatar-BJnla1kf.css","assets/BaseFilesPreviewItemAlt.vue_vue_type_script_setup_true_lang-BWvnFiDn.js","assets/ChatMessageEngage-BQQmMqPP.js","assets/ChatMessageEngage-DdctgRtk.css","assets/ChatMessageReply-mrcqkBYU.js","assets/BaseVirtualScrollerDynamic.vue_vue_type_script_setup_true_lang-JF16gBQ6.js","assets/BaseVirtualScrollerDynamic-BCw0uU-l.css","assets/BaseFilePicker-3U2PbQT8.js","assets/BaseButton-CNa-6ezi.js","assets/BaseButton-CVVJuEEX.css","assets/BaseFilePicker-Dq96Uecd.css","assets/BaseTooltip.vue_vue_type_script_setup_true_lang-0n8BzHf-.js","assets/ContentItem-BmyMunci.js","assets/ContentItem-CLJYYNU6.css","assets/OpenGraphItemAlt.vue_vue_type_script_setup_true_lang-C8TSaNRS.js","assets/BaseRippleItem.vue_vue_type_script_setup_true_lang-C_27dFVh.js","assets/BaseDropdownMenu-C_9VHNzN.js","assets/BaseLabelValueItem.vue_vue_type_script_setup_true_lang-Dfw6DCnw.js","assets/BaseDropdownMenu-BnwUGWvJ.css","assets/BaseCard-BMNG8w40.js","assets/BaseCard-IC8sCSUl.css","assets/BaseInfiniteScroll.vue_vue_type_script_setup_true_lang-yQHkOpn0.js","assets/ClosePopup-Cpcsb2lW.js","assets/BaseLink.vue_vue_type_script_setup_true_lang-D4-jGcxu.js","assets/useAppMeta-BnJy7cDZ.js","assets/use-meta-CnOYxtXy.js","assets/BaseResult.vue_vue_type_script_setup_true_lang-BQdvhquR.js","assets/SkeletonItem.vue_vue_type_script_setup_true_lang-DfMHObPi.js","assets/ChatMessageReply-DZy6Cfbo.css","assets/ChatReplyItem-GZ5utWDj.js","assets/ChatLeft-Cnv7R7gr.js","assets/BaseInput.vue_vue_type_script_setup_true_lang-Bcpp5Ear.js","assets/BaseScrollArea.vue_vue_type_script_setup_true_lang-B_07lZJw.js","assets/BaseTabs-DVQlu_2H.js","assets/BaseTabs-DJuRc6HI.css","assets/ChatLeft-zhWpNxHR.css","assets/ChatRight-DhF3IY27.js"])))=>i.map(i=>d[i]);
import{l as J,u as ge,r as c,bM as Ze,a1 as be,o as ke,c as V,h as pt,$ as R,n as i,p as Ee,q as Le,a3 as C,m as h,t as O,x as a,w as e,a7 as F,J as o,bP as Ae,Q as fe,L as P,M as z,R as yt,aC as ue,ai as G,a_ as Ct,at as oe,I as te,gd as De,bR as We,a5 as bt,bS as Oe,fj as kt,au as Z,av as ae,aD as Xe,a0 as Je,ge as Ve,dx as Mt,bO as Ye,aK as re,em as wt,fE as Tt,aw as ie,dK as It,gf as St,dL as $t,gg as Rt,dI as Pt,gh as zt,dH as Et,gi as Lt,dJ as Ot,gj as Bt,a as Me,d4 as At,fG as Dt,cv as Vt,bx as Ft,gk as Nt,cB as Ut,bN as xe,U as _e,_ as qt,gl as jt,as as Ie,ca as Ht,v as he,dS as ze,aX as Se,gm as Fe,aV as Gt,bg as Qt,b8 as me,dC as Kt,aJ as Zt,bk as Wt,eb as Xt,d2 as Jt,ae as Ne,H as Yt,af as xt,gn as _t,Y as ea,bf as ta,bV as aa,aM as Ue,el as na,cF as qe,go as je,dF as sa,gp as la,gq as oa,N as ia,a9 as ua,ew as ra,gr as ma,ar as $e,gs as He,ex as da,ba as Ge,a2 as ca}from"./index-NsS699ic.js";import{Q as ve,_ as fa}from"./BaseVirtualScrollerDynamic.vue_vue_type_script_setup_true_lang-JF16gBQ6.js";import{B as pe}from"./BaseAvatar-BQeHAjpV.js";import{B as ga}from"./BaseFilePicker-3U2PbQT8.js";import{a as et,j as va}from"./FileManagerService-B7wPTwmI.js";import{B as Qe}from"./BaseButton-CNa-6ezi.js";import{_ as ha}from"./BaseFilesPreviewItem.vue_vue_type_script_setup_true_lang-Bg2tRRak.js";import{_ as Re}from"./BaseTooltip.vue_vue_type_script_setup_true_lang-0n8BzHf-.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as pa}from"./ContentItem-BmyMunci.js";import{_ as ya}from"./OpenGraphItemAlt.vue_vue_type_script_setup_true_lang-C8TSaNRS.js";import{_ as Ca}from"./BaseRippleItem.vue_vue_type_script_setup_true_lang-C_27dFVh.js";import{B as ba}from"./BaseDropdownMenu-C_9VHNzN.js";import{B as ka}from"./BaseCard-BMNG8w40.js";import{_ as Ma}from"./BaseInfiniteScroll.vue_vue_type_script_setup_true_lang-yQHkOpn0.js";import{C as ce}from"./ClosePopup-Cpcsb2lW.js";import{_ as wa}from"./BaseLink.vue_vue_type_script_setup_true_lang-D4-jGcxu.js";import{u as Ta}from"./useAppMeta-BnJy7cDZ.js";import{_ as Ia}from"./BaseResult.vue_vue_type_script_setup_true_lang-BQdvhquR.js";import{_ as Sa}from"./BaseSpinner.vue_vue_type_script_setup_true_lang-CvvY_8LO.js";import{_ as Pe}from"./SkeletonItem.vue_vue_type_script_setup_true_lang-DfMHObPi.js";const $a={key:0,class:"row"},Ra={class:"col"},Pa={key:1,class:"row q-py-sm"},za={class:"row"},Ea=J({__name:"ChatInput",props:{inputId:{},emojiPickerId:{default:"chat-emoji"},loading:{type:Boolean,default:!1},inputDense:{type:Boolean,default:!0},inputAvata:{type:Boolean,default:!0},miniChat:{type:Boolean,default:!1}},emits:["on-submit","on-blur","on-input-update"],setup(n,{expose:k,emit:$}){const w=ue(()=>re(()=>import("./BaseEmojiPicker-Dl5voDQU.js"),__vite__mapDeps([0,1,2,3,4]))),f=ue(()=>re(()=>import("./BaseMapPreview-VHVZ5P_O.js"),__vite__mapDeps([5,2,3,6,7]))),I=$,{t:M}=ge(),y=c(),S=Ze(),m=c(),s=c([]),u=c(),r=c([]),B=c(),A=c(!1),q=be("chatInputRef");ke(()=>{de(),_()});const de=()=>{document.addEventListener("paste",ne)},Q=()=>{document.removeEventListener("paste",ne)},ne=async g=>{const L=g.clipboardData.items;for(let E=0;E<L.length;E++){const le=L[E];if(le.type.includes("image")){const H=le.getAsFile(),X=await et(H);r.value.push({id:null,fileMime:H.type,fileName:H.name,filePath:X||"",fileThumbnailPath:X||"",fileSize:H.size,file:H,isImage:!0})}}},se=g=>{r.value.length>0&&r.value.splice(g,1)},Y=V(()=>!!(y.value&&y.value.trim().length>0||s.value.length>0||r.value.length>0||B.value)),N=g=>{if(g&&g.shiftKey)return;const L=y.value&&y.value.trim().length>0?y.value.trim():void 0;if(!(!L&&s.value.length==0&&r.value.length==0)){if(r.value.length>0)for(const E of r.value)E.file&&s.value.push(E.file);D(L,s.value),x()}},D=(g,L,E=void 0)=>{I("on-submit",g,L,E)},K=async g=>{g&&g.length>0&&(D(void 0,g),u.value=setTimeout(()=>{x()},350))},U=async()=>{B.value&&(D(void 0,void 0,B.value),x())},W=()=>{B.value=void 0,A.value=!1},x=()=>{y.value=void 0,B.value=void 0,s.value=[],r.value=[],A.value=!1},j=g=>{y.value||(y.value=""),y.value+=g},_=()=>{q.value&&q.value.focus()},b=g=>{I("on-input-update",g)},v=g=>{I("on-blur",g)};return pt(()=>{u.value&&(clearTimeout(u.value),u.value=void 0),Q()}),k({onInputFocus:_}),(g,L)=>(i(),R("div",Ee(Le(g.$attrs)),[A.value?(i(),R("div",$a,[O("div",Ra,[a(o(f),{modelValue:B.value,"onUpdate:modelValue":L[0]||(L[0]=E=>B.value=E),title:o(M)("chats.shareLocation")},{side:e(()=>[a(F,{disable:g.loading||!Y.value,onClick:U,flat:"",round:"",icon:o(Ae),color:"primary"},{default:e(()=>[a(fe,null,{default:e(()=>[P(z(o(M)("chats.send")),1)]),_:1})]),_:1},8,["disable","icon"]),a(F,{onClick:W,flat:"",round:"",icon:o(yt)},{default:e(()=>[a(fe,null,{default:e(()=>[P(z(o(M)("base.close")),1)]),_:1})]),_:1},8,["icon"])]),_:1},8,["modelValue","title"])])])):C("",!0),r.value&&r.value.length>0?(i(),R("div",Pa,[(i(!0),R(G,null,Ct(r.value,(E,le)=>(i(),R("div",{class:"col-3",key:`clipboardfile-${le}`},[a(ha,{item:E,index:le,fetch:!1,dense:"","image-size":"100px","show-delete":!0,"show-size":!1,"show-name":!1,onOnRemove:se},null,8,["item","index"])]))),128))])):C("",!0),A.value?C("",!0):(i(),h(oe,{key:2,dense:"",class:te(["q-mt-md",{"q-pa-none":!g.miniChat}])},{default:e(()=>[a(Z,{side:""},{default:e(()=>[O("div",za,[a(ga,{ref_key:"filePickerRef",ref:m,multiple:"",modelValue:s.value,"onUpdate:modelValue":L[1]||(L[1]=E=>s.value=E),wildcard:"",icon:o(De),"show-preview":!1,onOnFileAdd:K},{default:e(()=>[a(Qe,{disable:g.loading,dense:"",flat:"",round:"",icon:o(De),size:"sm",class:"text-capitalize"},{default:e(()=>[a(Re,null,{default:e(()=>[P(z(o(M)("base.chooseFile")),1)]),_:1})]),_:1},8,["disable","icon"])]),_:1},8,["modelValue","icon"]),a(F,{disable:g.loading,dense:"",flat:"",round:"",icon:o(We),size:"sm"},{default:e(()=>[a(bt,null,{default:e(()=>[a(Oe,null,{default:e(()=>[a(o(w),{"picker-id":g.emojiPickerId,"onOn:emojiClick":j},null,8,["picker-id"])]),_:1})]),_:1})]),_:1},8,["disable","icon"]),a(Qe,{disable:g.loading,dense:"",flat:"",round:"",icon:o(kt),size:"sm",onClick:L[2]||(L[2]=E=>A.value=!0)},{default:e(()=>[a(Re,null,{default:e(()=>[P(z(o(M)("chats.shareLocation")),1)]),_:1})]),_:1},8,["disable","icon"])])]),_:1}),a(Z,null,{default:e(()=>[a(ae,null,{default:e(()=>[a(Xe,Je({ref_key:"chatInputRef",ref:q,readonly:g.loading,tabindex:"1"},g.$attrs,{outlined:"",modelValue:y.value,"onUpdate:modelValue":[L[4]||(L[4]=E=>y.value=E),b],type:"textarea",autogrow:"",dense:g.inputDense,label:o(M)("chats.typeMessage"),class:"input-emoji",onKeyup:[Ve(N,["enter"]),Ve(Mt(N,["shift"]),["enter"])],onBlur:v}),Ye({after:e(()=>[a(F,{disable:g.loading||!Y.value,onClick:L[3]||(L[3]=E=>N(E)),flat:"",round:"",icon:o(Ae),size:g.miniChat?"sm":"md",color:"primary"},{default:e(()=>[a(Re,null,{default:e(()=>[P(z(o(M)("chats.send")),1)]),_:1})]),_:1},8,["disable","icon","size"])]),_:2},[g.inputAvata?{name:"prepend",fn:e(()=>[o(S)?.auth?.avatar?.thumbnail?(i(),h(pe,{key:0,src:o(S)?.auth?.avatar?.thumbnail},null,8,["src"])):C("",!0)]),key:"0"}:void 0]),1040,["readonly","modelValue","dense","label","onKeyup"])]),_:1})]),_:1})]),_:1},8,["class"]))],16))}}),La=ye(Ea,[["__scopeId","data-v-d7c904b0"]]),Be=wt("chatStore",()=>{const n=c(!1),k=c(),$=c(),w=c(!1),f=c(),I=c(),M=c(0),y=c(),S=c(!1),m=c(),s=c(!1);return{removeChat:n,chatId:k,totalNewChat:M,toggleChatSetting:w,chatSettingType:f,clearSetting:()=>{k.value=void 0,f.value=void 0,w.value=!1,I.value=void 0},currentDateForShow:y,requestItem:I,messageIdFocus:$,onCloseMiniChatPage:()=>{S.value=!1,m.value=void 0,s.value=!1},openMiniChatPage:S,miniChatGroupId:m,miniChatMinimize:s,isCurrentOpenMiniChatByGroupId:A=>A?S.value&&m.value&&m.value==A:!1}}),Oa={class:"row justify-center q-pa-sm q-gutter-sm"},Ba={key:"btn-1",class:"btn-holder"},Aa={key:"btn-2",class:"btn-holder"},Da={key:"btn-3",class:"btn-holder"},Va={key:"btn-4",class:"btn-holder"},Fa={key:"btn-5",class:"btn-holder"},Na=J({__name:"AppReactionMenu",props:{iconSize:{default:"40px"},iconZoomSize:{default:"55px"}},emits:["on:like"],setup(n,{emit:k}){const $=k,w=c(!1),f=c(!1),I=c(!1),M=c(!1),y=c(!1),S=m=>{$("on:like",m)};return(m,s)=>(i(),R("div",Oa,[a(Tt,{appear:"","enter-active-class":"animated lightSpeedInLeft"},{default:e(()=>[O("div",Ba,[a(F,{round:"",dense:"",flat:"",color:"primary",onMouseover:s[0]||(s[0]=u=>w.value=!0),onMouseleave:s[1]||(s[1]=u=>w.value=!1),onClick:s[2]||(s[2]=u=>S("LIKE"))},{default:e(()=>[a(ie,{name:w.value?o(It):o(St),size:w.value?m.iconZoomSize:m.iconSize},null,8,["name","size"]),a(fe,{class:"bg-primary",anchor:"top middle",self:"center middle"},{default:e(()=>s[15]||(s[15]=[P(" Like ")])),_:1})]),_:1})]),O("div",Aa,[a(F,{round:"",dense:"",flat:"",color:"green",onMouseover:s[3]||(s[3]=u=>f.value=!0),onMouseleave:s[4]||(s[4]=u=>f.value=!1),onClick:s[5]||(s[5]=u=>S("FIGHTING"))},{default:e(()=>[a(ie,{name:f.value?o($t):o(Rt),size:f.value?m.iconZoomSize:m.iconSize},null,8,["name","size"]),a(fe,{class:"bg-green",anchor:"top middle",self:"center middle"},{default:e(()=>s[16]||(s[16]=[P(" Give going ")])),_:1})]),_:1})]),O("div",Da,[a(F,{round:"",dense:"",flat:"",color:"orange",onMouseover:s[6]||(s[6]=u=>I.value=!0),onMouseleave:s[7]||(s[7]=u=>I.value=!1),onClick:s[8]||(s[8]=u=>S("LAUGH"))},{default:e(()=>[a(ie,{name:I.value?o(Pt):o(zt),size:I.value?m.iconZoomSize:m.iconSize},null,8,["name","size"]),a(fe,{class:"bg-orange",anchor:"top middle",self:"center middle"},{default:e(()=>s[17]||(s[17]=[P(" LOL ")])),_:1})]),_:1})]),O("div",Va,[a(F,{round:"",dense:"",flat:"",color:"pink",onMouseover:s[9]||(s[9]=u=>M.value=!0),onMouseleave:s[10]||(s[10]=u=>M.value=!1),onClick:s[11]||(s[11]=u=>S("CARE"))},{default:e(()=>[a(ie,{name:M.value?o(Et):o(Lt),size:M.value?m.iconZoomSize:m.iconSize},null,8,["name","size"]),a(fe,{class:"bg-pink",anchor:"top middle",self:"center middle"},{default:e(()=>s[18]||(s[18]=[P(" Care ")])),_:1})]),_:1})]),O("div",Fa,[a(F,{round:"",dense:"",flat:"",color:"deep-purple",onMouseover:s[12]||(s[12]=u=>y.value=!0),onMouseleave:s[13]||(s[13]=u=>y.value=!1),onClick:s[14]||(s[14]=u=>S("SAD"))},{default:e(()=>[a(ie,{name:y.value?o(Ot):o(Bt),size:y.value?m.iconZoomSize:m.iconSize},null,8,["name","size"]),a(fe,{class:"bg-deep-purple",anchor:"top middle",self:"center middle"},{default:e(()=>s[19]||(s[19]=[P(" Sad ")])),_:1})]),_:1})])]),_:1})]))}}),Ua=ye(Na,[["__scopeId","data-v-0806a157"]]),qa=J({__name:"ChatMessageMenu",props:{chatId:{},sent:{type:Boolean},showCopy:{type:Boolean,default:!0},messageType:{}},emits:["message-delete","message-unsend","message-copy","on-hide","message-reply","message-share","on-share-post","on-share-action"],setup(n,{emit:k}){const $=k,{appConfirm:w}=Me(),{t:f}=ge(),I=[{label:f("chats.reply"),value:1,icon:At,onHandle(){m()}},{label:f("chats.share"),value:2,icon:Dt,onHandle(){s()}},{label:f("base.copy"),value:3,icon:Vt,onHandle(){S()}},{label:f("base.delete"),value:4,icon:Ft,onHandle(){M()}},{label:f("chats.unsendMessage"),value:5,icon:Nt,onHandle(){y()}}];ke(()=>{n.showCopy||I.splice(2,1),n.sent||I.splice(4,1)});const M=async()=>{await w(f("app.monogram"),f("chats.deleteChatConfirm"))&&$("message-delete")},y=async()=>{await w(f("app.monogram"),f("chats.unsendMessageConfirm"))&&$("message-unsend")},S=async()=>{$("message-copy")},m=()=>{$("message-reply")},s=()=>{$("message-share")};return(u,r)=>(i(),h(ba,{items:I,onOnHide:r[0]||(r[0]=B=>u.$emit("on-hide"))},{default:e(()=>[a(F,{flat:"",round:"",dense:"",size:"sm",icon:o(Ut),class:"text-muted",style:{opacity:"0.5"}},null,8,["icon"])]),_:1}))}}),ja=["id"],Ha={class:"col-12"},Ga={class:"text-muted"},Qa={class:"text-muted"},Ka={class:"text-muted"},Za={key:0,class:"text-muted text-caption"},Wa={class:"row items-center",style:{"z-index":"99999"}},Xa=J({__name:"ChatMessageItem",props:{item:{},chatType:{},index:{},showSenderAvatar:{type:Boolean,default:!1},showSenderName:{type:Boolean,default:!1},label:{},haveReply:{type:Boolean,default:!1},miniChat:{type:Boolean,default:!1},highLightText:{}},emits:["message-reaction","message-delete","message-unsend","message-reply","on-open-seen-dialog","message-share"],setup(n,{emit:k}){const $=ue(()=>re(()=>import("./ChatMessageFile-CSiNQ9gL.js"),__vite__mapDeps([8,9,2,3,10,11,12,13,6,14,15]))),w=ue(()=>re(()=>import("./ChatMessageEngage-BQQmMqPP.js"),__vite__mapDeps([16,2,3,6,17]))),f=ue(()=>re(()=>import("./BaseMapPreview-VHVZ5P_O.js"),__vite__mapDeps([5,2,3,6,7]))),I=k,M=Be(),{screen:y,dark:S}=xe(),{t:m}=ge(),{appFormatDateTimeAuto:s,writeToClipboard:u}=Me();c(!1);const r=c(!1),B=c(null),A=V(()=>n.item.sent?"absolute-bottom-left q-text-black":"absolute-bottom-right q-text-black"),q=V(()=>n.item.sent?"left: -55px;":"right: -50px;"),de=V(()=>n.item.sent?"absolute-bottom-right":"absolute-bottom-left"),Q=V(()=>n.item.sent?n.item.chatMsg?"bottom:-25px":"bottom:-15px":n.item.chatMsg?"bottom:-55px":"bottom:-25px"),ne=V(()=>n.item.sent?n.showSenderName?m("base.you"):"":n.item.sendUser?.name),se=V(()=>!n.item?.files||n.item.files.length==0?[]:n.item.files.filter(t=>t.fileManager&&t.fileManager.image)),Y=V(()=>n.item.files?n.item.files.filter(t=>t.fileManager&&!t.fileManager.image):[]),N=V(()=>n.item.unsend||n.item.chatMessageType=="LEAVE"||n.item.chatMessageType=="INVITE"),D=V(()=>se.value.length>0&&!n.item.chatMsg&&Y.value.length==0),K=V(()=>N.value?"message-unsend":D.value?"message-transparent":n.item.sent?"message-sent":"message-received"),U=V(()=>n.item.sent?"#":`user/${n.item.sendUser?.id}`),W=V(()=>n.item.reactionEngage&&n.item.reactionEngage.length>0?"q-mb-xl":"q-mb-sm"),x=V(()=>{if(N.value||!n.item.files)return;if(n.item.chatMessageType=="LOCATION")return n.miniChat?"10":"9";const t=se.value.length,ee=Y.value.length;if(n.miniChat&&(t>0||ee>0))return"10";if(y.gt.xs){if(t==1||t==2)return"4";if(t>0)return"6"}else if(t>0)return"8"}),j=V(()=>N.value?S.isActive?"grey-4":"grey-7":n.item.sent?"grey-10":S.isActive?"white":"black"),_=async()=>{n.item.id&&I("message-delete",n.item.id)},b=async()=>{n.item.id&&I("message-unsend",n.item.id)},v=async()=>{n.item.id&&I("message-reply",n.item.id)},g=async()=>{n.item.id&&I("message-share",n.item.id)},L=async()=>{console.log("onCopy"),n.item.chatMsg&&await u(n.item.chatMsg)},E=async t=>{n.item.id&&I("message-reaction",t,n.item.id)},le=()=>{!n.item.id||!n.item?.readCount||n.item.readCount==0||!n.item.sent||n.chatType=="PERSONAL"||I("on-open-seen-dialog",n.item.id,n.item.readCount)},H=t=>new Promise(ee=>{B.value=setTimeout(()=>{r.value=t,ee(!0)},500)}),X=async()=>{r.value=!0,await H(!1),await H(!0),await H(!1),await H(!0),await H(!1),clearTimeout(B.value),B.value=null,M.messageIdFocus=void 0},we=t=>{console.log("onReactionClick",t)};return _e(M,t=>{n.item&&n.item.id&&t&&t.messageIdFocus&&t.messageIdFocus==n.item.id&&X()}),(t,ee)=>{const Ce=qt("router-link");return t.item&&t.index!=null?(i(),R("div",Je({key:0},t.$attrs,{class:["row",{"holder-recive":!t.item.sent&&t.miniChat,"holder-sent":t.item.sent&&t.miniChat}],id:`${o(jt)}-${t.item.id}`}),[O("div",Ha,[t.item.onlyLabel?(i(),R(G,{key:0},[t.item.chatMsg?(i(),h(ve,{key:0},{label:e(()=>[O("span",Ga,z(t.item.chatMsg),1)]),_:1})):C("",!0)],64)):(i(),R(G,{key:1},[t.label?(i(),h(ve,{key:0},{label:e(()=>[O("span",Qa,z(t.label),1)]),_:1})):C("",!0),t.item?(i(),h(ve,{key:1,"text-color":j.value,"bg-color":K.value,class:te(W.value),size:x.value,sent:t.item.sent},Ye({name:e(()=>[O("div",Ka,[!t.item.sent&&t.chatType!="PERSONAL"&&(!t.haveReply||t.item.unsend)?(i(),R(G,{key:0},[U.value?(i(),h(Ce,{key:0,to:U.value},{default:e(()=>[P(z(ne.value),1)]),_:1},8,["to"])):C("",!0)],64)):C("",!0)])]),stamp:e(()=>[O("span",{class:te(["text-caption",{"text-muted":o(S).isActive&&D.value}])},z(o(s)(t.item.msgDateTime)),3)]),default:e(()=>[O("div",{class:te({"message-focus":r.value})},[!t.item.sent&&t.chatType!="PERSONAL"&&t.haveReply&&!t.item.unsend?(i(),R("div",Za,z(ne.value),1)):C("",!0),N.value?t.item.chatMsg?(i(),R(G,{key:2},[P(z(t.item.chatMsg),1)],64)):(i(),R(G,{key:3},[P(z(o(m)("chats.unsend")),1)],64)):(i(),R(G,{key:1},[t.item.chatMessageType!="LOCATION"?(i(),R(G,{key:0},[t.item.chatMsg?(i(),h(pa,{key:0,class:te([o(y).gt.xs?"text-div-web":"text-div-mobile","q-pa-xs"]),"wrap-text":!0,limit:20,"is-escape-html":"","high-light-text":t.highLightText||"",content:t.item.chatMsg,"hashtag-urlify":!1,"content-id":`chat-message-${t.item.id}-${t.index}-content`,"link-style":(t.item.sent,"app-text-link"),"text-style":"text-black"},null,8,["class","high-light-text","content","content-id","link-style"])):C("",!0),t.item.chatMsg?(i(),h(ya,{key:1,class:"q-pa-sm",style:Ie({maxWidth:o(y).xs?"60vw":t.miniChat?"13vw":"25vw"}),content:t.item.chatMsg,short:!t.miniChat,"image-max-height":t.miniChat?"120px":"150px","image-size":t.miniChat?"50px":"120px","show-bg":!1},null,8,["style","content","short","image-max-height","image-size"])):C("",!0),t.item.files&&t.item.files.length>0&&t.item.id?(i(),h(o($),{key:2,class:"q-mt-sm","mini-chat":t.miniChat,"chat-id":t.item.id,files:t.item.files,sent:t.item.sent},null,8,["mini-chat","chat-id","files","sent"])):C("",!0)],64)):(i(),h(o(f),{key:1,"preview-src":t.item.chatMsg,preview:"",height:t.miniChat?140:150,zoom:2},null,8,["preview-src","height"])),t.item.reactionEngage&&t.item.reactionEngage.length>0?(i(),R("div",{key:2,class:te(de.value),style:Ie([Q.value,{width:"175px"}])},[t.item.reactionEngage&&t.item.reactionEngage.length>0&&t.item.id?(i(),h(o(w),{key:0,"chat-id":t.item.id,class:te(t.item.sent?"float-right":"float-left"),items:t.item.reactionEngage,onOnClick:we},null,8,["chat-id","class","items"])):C("",!0)],6)):C("",!0),t.item.sent&&t.item.readCount>0?(i(),h(Ca,{key:3,class:"absolute-bottom-left text-muted text-weight-light text-caption app-border-radius q-px-xs","cursor-pointer":t.chatType!="PERSONAL",style:{left:"-50px",bottom:"25px"},onClick:le},{default:e(()=>[P(z(`${o(m)("chats.read")} ${t.chatType=="GROUP"?o(Ht)(t.item.readCount):""}`),1)]),_:1},8,["cursor-pointer"])):C("",!0),t.item.id?(i(),R("div",{key:4,class:te(A.value),style:Ie(q.value)},[O("div",Wa,[a(qa,{"chat-id":t.item.id,sent:t.item.sent,"show-copy":t.item.chatMsg!=null&&!0&&t.item.chatMsg.length>0,"message-type":t.item.chatMessageType,onMessageCopy:L,onMessageDelete:_,onMessageUnsend:b,onMessageReply:v,onMessageShare:g},null,8,["chat-id","sent","show-copy","message-type"]),a(F,{flat:"",round:"",dense:"",size:"sm",icon:o(We),class:te(t.item.liked?"text-amber-9":"text-muted")},{default:e(()=>[a(Oe,{"auto-close":"",anchor:"top end",self:"bottom middle",style:{height:"65px",width:"265px"}},{default:e(()=>[a(Ua,{"onOn:like":E})]),_:1})]),_:1},8,["icon","class"])])],6)):C("",!0)],64))],2)]),_:2},[!t.item.sent||t.showSenderAvatar?{name:"avatar",fn:e(()=>[U.value&&t.item.sendUser?.avatar?.thumbnail?(i(),h(Ce,{key:0,to:U.value},{default:e(()=>[a(pe,{class:"q-mr-xs",src:t.item.sendUser?.avatar?.thumbnail,"fetch-image":""},null,8,["src"])]),_:1},8,["to"])):C("",!0)]),key:"0"}:void 0]),1032,["text-color","bg-color","class","size","sent"])):C("",!0)],64))])],16,ja)):C("",!0)}}}),Ja=ye(Xa,[["__scopeId","data-v-7c08e8f0"]]),Ya=J({__name:"ChatMessage",props:{item:{},chatType:{},index:{},showSenderAvatar:{type:Boolean,default:!1},showSenderName:{type:Boolean,default:!1},miniChat:{type:Boolean,default:!1},label:{},highLightText:{}},emits:["message-reaction","message-delete","message-unsend","message-reply","on-open-seen-dialog","message-share","on-focus-message-reply"],setup(n,{emit:k}){const $=ue(()=>re(()=>import("./ChatMessageReply-mrcqkBYU.js"),__vite__mapDeps([18,2,3,11,12,13,6,14,19,20,21,22,23,15,10,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,4,41,42]))),w=k,f=async u=>{n.item.id&&w("message-reaction",u,n.item.id)},I=async()=>{n.item.id&&w("message-delete",n.item.id)},M=async()=>{n.item.id&&w("message-unsend",n.item.id)},y=async()=>{n.item.id&&w("message-reply",n.item.id)},S=async()=>{n.item.id&&w("message-share",n.item.id)},m=(u,r)=>{w("on-open-seen-dialog",u,r)},s=u=>{w("on-focus-message-reply",u)};return(u,r)=>(i(),R(G,null,[u.item.dtoReplyTo&&!u.item.unsend?(i(),h(o($),{key:0,item:u.item.dtoReplyTo,sent:u.item.sent,onOnClick:s,"mini-chat":u.miniChat},null,8,["item","sent","mini-chat"])):C("",!0),a(Ja,{item:u.item,index:u.index,"chat-type":u.chatType,"have-reply":u.item.dtoReplyTo!=null,"mini-chat":u.miniChat,"high-light-text":u.highLightText,"show-sender-avatar":u.showSenderAvatar,"show-sender-name":u.showSenderName,onMessageDelete:I,onMessageUnsend:M,onMessageReply:y,onMessageReaction:f,onOnOpenSeenDialog:m,onMessageShare:S},null,8,["item","index","chat-type","have-reply","mini-chat","high-light-text","show-sender-avatar","show-sender-name"])],64))}}),xa={key:0},_a=J({__name:"ChatGroupAvatar",props:{item:{},avatarSize:{default:"40px"},rounded:{type:Boolean,default:!1},showPin:{type:Boolean,default:!0}},setup(n){return(k,$)=>k.item?(i(),R("div",xa,[k.item.dtoAvatar?(i(),h(pe,{key:0,"fetch-image":"",rounded:k.rounded,src:k.item.dtoAvatar.thumbnail,size:k.avatarSize},{extra:e(()=>[he(k.$slots,"extra",{},()=>[k.item.online?(i(),h(ze,{key:0,floating:"",color:"positive",rounded:"",transparent:"",class:"absolute"})):C("",!0),k.showPin&&k.item.pin?(i(),h(Se,{key:1,class:"absolute",color:"primary",size:"18px",style:{top:"25px",left:"25px"}},{default:e(()=>[a(ie,{color:"white",name:o(Fe)},null,8,["name"])]),_:1})):C("",!0)])]),_:3},8,["rounded","src","size"])):(i(),h(Se,{key:1,size:`${k.avatarSize}px`,rounded:k.rounded},{default:e(()=>[a(Gt,{alt:"avatar",src:"images/ninja.png"}),he(k.$slots,"extra",{},()=>[k.item.online?(i(),h(ze,{key:0,floating:"",color:"positive",rounded:"",transparent:"",class:"absolute"})):C("",!0),k.showPin&&k.item.pin?(i(),h(Se,{key:1,class:"absolute",color:"primary",size:"18px",style:{top:"25px",left:"25px"}},{default:e(()=>[a(ie,{color:"white",name:o(Fe)},null,8,["name"])]),_:1})):C("",!0)])]),_:3},8,["size","rounded"]))])):C("",!0)}}),en=J({__name:"ChatMenu",props:{chatId:{},pin:{type:Boolean},favorite:{type:Boolean},muteNotify:{type:Boolean},chatType:{}},emits:["toggle-mute","toggle-pin","toggle-fav","toggle-chat","delete-chat","leave-group","invite-people","on-close"],setup(n,{emit:k}){const $=k,{appConfirm:w}=Me(),{t:f}=ge(),I=()=>{n.chatId&&$("on-close",n.chatId)},M=()=>{n.chatId&&$("toggle-mute",n.chatId)},y=()=>{n.chatId&&$("toggle-pin",n.chatId)},S=()=>{n.chatId&&$("toggle-fav",n.chatId)},m=()=>{n.chatId&&$("invite-people",n.chatId)},s=async()=>{if(!n.chatId)return;await w(f("app.monogram"),f("chats.deleteChatConfirm"))&&$("delete-chat",n.chatId)},u=async()=>{if(!n.chatId)return;await w(f("app.monogram"),f("chats.leaveGroupConfirm"))&&$("leave-group",n.chatId)};return(r,B)=>(i(),h(Oe,Ee(Le(r.$attrs)),{default:e(()=>[a(Qt,{dense:""},{default:e(()=>[me((i(),h(oe,{clickable:"",onClick:M},{default:e(()=>[a(Z,null,{default:e(()=>[a(ae,null,{default:e(()=>[P(z(r.muteNotify?o(f)("chats.unmuteNotify"):o(f)("chats.muteNotify")),1)]),_:1})]),_:1})]),_:1})),[[ce]]),me((i(),h(oe,{clickable:"",onClick:y},{default:e(()=>[a(Z,null,{default:e(()=>[a(ae,null,{default:e(()=>[P(z(r.pin?o(f)("chats.unpin"):o(f)("chats.pin")),1)]),_:1})]),_:1})]),_:1})),[[ce]]),me((i(),h(oe,{clickable:"",onClick:S},{default:e(()=>[a(Z,null,{default:e(()=>[a(ae,null,{default:e(()=>[P(z(r.favorite?o(f)("chats.unfavorite"):o(f)("chats.favorite")),1)]),_:1})]),_:1})]),_:1})),[[ce]]),r.chatType=="GROUP"?me((i(),h(oe,{key:0,clickable:"",onClick:m},{default:e(()=>[a(Z,null,{default:e(()=>[a(ae,null,{default:e(()=>[P(z(o(f)("chats.invite")),1)]),_:1})]),_:1})]),_:1})),[[ce]]):C("",!0),me((i(),h(oe,{clickable:"",onClick:s},{default:e(()=>[a(Z,null,{default:e(()=>[a(ae,{class:"text-negative"},{default:e(()=>[P(z(o(f)("base.delete")),1)]),_:1})]),_:1})]),_:1})),[[ce]]),r.chatType=="GROUP"?me((i(),h(oe,{key:1,clickable:"",onClick:u},{default:e(()=>[a(Z,null,{default:e(()=>[a(ae,{class:"text-negative"},{default:e(()=>[P(z(o(f)("chats.leaveGroup")),1)]),_:1})]),_:1})]),_:1})),[[ce]]):C("",!0),me((i(),h(oe,{clickable:"",onClick:I},{default:e(()=>[a(Z,null,{default:e(()=>[a(ae,null,{default:e(()=>[P(z(o(f)("base.close")),1)]),_:1})]),_:1})]),_:1})),[[ce]])]),_:1})]),_:1},16))}}),tn={class:"row"},an=J({__name:"ChatContentHeader",props:{miniChat:{type:Boolean,default:!1},miniminze:{type:Boolean,default:!1},item:{},chatWith:{}},emits:["toggle-mute","toggle-pin","toggle-fav","toggle-chat","delete-chat","leave-group","invite-people","on-close"],setup(n){const k=c(0),{t:$}=ge(),w=c(!1),f=c(""),I=V(()=>n.chatWith?`/user/${n.chatWith.id}`:"#"),M=()=>{f.value=""},y=()=>{w.value=!w.value,w.value||M()},S=()=>{const m=f.value?f.value.trim():void 0;m||(!m||m.length==0)&&M()};return(m,s)=>(i(),h(oe,{class:"card-top-bg"},{default:e(()=>[m.miniChat&&m.miniminze&&k.value>0?(i(),h(ze,{key:0,color:"negative",floating:""},{default:e(()=>[P(z(k.value),1)]),_:1})):C("",!0),a(Z,{avatar:""},{default:e(()=>[a(_a,{item:m.item},null,8,["item"])]),_:1}),a(Z,null,{default:e(()=>[a(ae,{lines:"2"},{default:e(()=>[a(wa,{to:I.value},{default:e(()=>[P(z(m.item.groupName),1)]),_:1},8,["to"]),m.item.favorite?(i(),h(ie,{key:0,color:"amber-8",size:"14px",class:"q-ml-xs q-mb-xs",name:o(Kt)},null,8,["name"])):C("",!0)]),_:1}),a(ae,{caption:"",lines:"1"},{default:e(()=>[P(z(m.item.chatType=="PERSONAL"?"Software engineer":"Group"),1)]),_:1})]),_:1}),a(Z,{side:""},{default:e(()=>[O("div",tn,[he(m.$slots,"headerRight",{},()=>[m.miniChat?C("",!0):(i(),R(G,{key:0},[a(Zt,{onSubmit:S},{default:e(()=>[w.value?(i(),h(Xe,{key:0,modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=u=>f.value=u),outlined:"",dense:"",clearable:"",onClear:M,placeholder:o($)("chats.searchMessage")},null,8,["modelValue","placeholder"])):C("",!0)]),_:1}),a(F,{onClick:y,flat:"",round:"",icon:o(Wt),size:"sm"},null,8,["icon"])],64)),m.item.id?(i(),h(F,{key:1,flat:"",round:"",icon:m.miniChat?o(Jt):o(Xt),size:"sm"},{default:e(()=>[a(en,{"chat-id":m.item.id,"chat-type":m.item.chatType,pin:m.item.pin,"mute-notify":m.item.muteNotify,favorite:m.item.favorite,"mini-chat":m.miniChat,onTogglePin:s[1]||(s[1]=u=>m.$emit("toggle-pin",u)),onToggleMute:s[2]||(s[2]=u=>m.$emit("toggle-mute",u)),onToggleFav:s[3]||(s[3]=u=>m.$emit("toggle-fav",u)),onDeleteChat:s[4]||(s[4]=u=>m.$emit("delete-chat",u)),onLeaveGroup:s[5]||(s[5]=u=>m.$emit("leave-group",u)),onInvitePeople:s[6]||(s[6]=u=>m.$emit("invite-people",u)),onOnClose:s[7]||(s[7]=u=>m.$emit("on-close",u))},null,8,["chat-id","chat-type","pin","mute-notify","favorite","mini-chat"])]),_:1},8,["icon"])):C("",!0)],!0)])]),_:3})]),_:3}))}}),nn=ye(an,[["__scopeId","data-v-1ae1ed4e"]]),sn={class:"text-center"},ln={key:1,class:"row justify-center absolute full-width",style:{bottom:"50px"}},on=J({__name:"ChatContent",props:Ne({showHeader:{type:Boolean,default:!0},square:{type:Boolean,default:!1},inputDense:{type:Boolean},inputAvata:{type:Boolean,default:!0},scrollAreaHeight:{default:"65vh"},miniChat:{type:Boolean,default:!1},miniminze:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:Ne(["toggle-mute","toggle-pin","toggle-fav","toggle-chat","delete-chat","leave-group","on-close"],["update:modelValue"]),setup(n,{emit:k}){const $=ue(()=>re(()=>import("./ChatReplyItem-GZ5utWDj.js"),__vite__mapDeps([43,2,3,11,12,13,6,14]))),{t:w}=ge(),{isDark:f}=Yt();Be();const I=Ze(),M=xt(n,"modelValue"),y=c([..._t.dataList]),S=be("chatInfinityScrollRef"),m=c(""),s=c({chatMsg:null,fileIds:[],chatMessageType:null}),u=c(!1),r=c(),B=c(!1),A=c(),q=c(!1),de=c(0),Q=c(!0),ne=c(),se=be("chatContentInputRef"),Y=c(!1);c(0);const N=c(),D=be("scrollerChatRef"),K=c(!0),U=c(!1),W=c(0),x=c(0),j=c(1e3),_=c(!1),b=c(null),v=c(null);ke(async()=>{g()});const g=async()=>{b.value=setTimeout(()=>{X(),b.value=setTimeout(()=>{K.value=!1},1e3)},1500)},L=(l,d)=>{console.log("onInfiniteChatVirtual",l),setTimeout(async()=>{d(),E()},1e3)},E=()=>{S.value&&(S.value.stop(),K.value=!0)},le=()=>{S.value&&(S.value.resume(),K.value=!1)},H=l=>{l&&(_.value=l.visibleEndIndex!=l.viewEndIndex)},X=()=>{_.value=!1,D.value&&D.value.onScrollToBottom()},we=l=>{l!=null&&D.value&&D.value.onScrollToItem(l)},t=l=>{console.log("invitePeople",l)},ee=l=>new Promise(d=>{const p=y.value.findIndex(T=>T.id==l);d(p)}),Ce=async l=>new Promise(d=>{const p=y.value.find(T=>T.id==l);d(p)}),Te=l=>y.value[l],tt=l=>new Promise(d=>{l>=0&&y.value.splice(l,1),d(!0)}),at=async l=>{console.log("messageDelete",l),E();const d=await ee(l);d>=0&&await tt(d),X(),le()},nt=async(l,d=!0)=>{if(console.log("messageUnsend",{messageId:l,unsendToServer:d}),!l)return;const p=await ee(l);if(p>=0){const T=Te(p);T&&(T.unsend=!0,T.chatMsg=void 0,T.files=[],T.reactionEngage=[])}},st=async(l,d)=>{console.log("messageReaction",{l,messageId:d});const p=await ee(d);if(p>=0){const T=Te(p);T&&(T.liked?T.liked&&T.emojiType==l?(T.liked=!1,T.emojiType=null):T.emojiType=l:(T.liked=!0,T.emojiType=l),T.reactionEngage||(T.reactionEngage=[]),T.reactionEngage.find(ht=>ht.emojiType==l)||T.reactionEngage.push({emojiType:l,total:1}))}},lt=async l=>{console.log("messageReply",l),Q.value=!1,ne.value=setTimeout(()=>{Q.value=!0},100);const d=await ee(l);if(d>=0){const p=Te(d);p&&(r.value=p)}},ot=()=>{r.value=void 0},it=(l,d)=>{console.log("onOpenSeenDialog",{messageId:l,readCount:d}),l&&(A.value=l,de.value=d,q.value=!0)},ut=async l=>{if(!l)return;const d=await ee(l);d>=0?we(d):(A.value=l,B.value=!0)},rt=async l=>{if(console.log("onShare",l),!l)return;const d=await Ce(l);d&&(N.value=d,Y.value=!0)},mt=async(l,d,p)=>{if(!M.value||!M.value?.id||!l&&!d&&!p)return;X(),U.value=!0,console.log("onSendMessage",{message:l,files:d,mapLatlong:p}),l&&(s.value.chatMsg=l),p&&(s.value.chatMsg=p,s.value.chatMessageType="LOCATION"),r.value&&r.value?.id&&(s.value.replyToId=r.value.id);const T=await dt(d);T.length>0&&(s.value.chatMessageType="IMAGE"),await ft(T),X(),await gt(),X(),vt()},dt=async l=>{const d=[];if(l&&l.length>0){for(const p of l){const T=await ct(p);T&&d.push(T)}return new Promise(p=>p(d))}else return new Promise(p=>p(d))},ct=async l=>{const d=va(l);let p;return d?(p=await et(l),j.value++,new Promise(T=>T({id:j.value,fileManager:{id:j.value,fileMime:l.type,fileName:l.name,filePath:p||"",fileThumbnailPath:"",fileSize:l.size+"",functionId:0,isImage:d,image:d,file:l}}))):new Promise(T=>T(null))},ft=l=>{if(!s.value)return new Promise(p=>p(!0));j.value++;const d={id:j.value,chatMsg:s.value.chatMsg,msgDateTime:qe(je),groupId:17,readCount:0,unsend:!1,sent:!0,sendUser:I.auth,files:l,liked:!1,emojiType:null,reactionEngage:[],dtoReplyTo:r.value||null,chatMessageType:s.value.chatMessageType||"TEXT"};return console.log("createItem",d),new Promise(p=>{v.value=setTimeout(()=>{U.value=!1,y.value.push(d),p(!0)},1e3)})},gt=()=>{u.value=!0,j.value++;const l={id:j.value,chatMsg:"Doing fine, how r you?",msgDateTime:qe(je),groupId:17,readCount:10,unsend:!1,sent:!1,sendUser:sa[la(0,15)],files:[],liked:!1,emojiType:null,reactionEngage:[],dtoReplyTo:r.value||null,chatMessageType:"TEXT"};return new Promise(d=>{v.value=setTimeout(()=>{u.value=!1,y.value.push(l),d(!0)},1e3)})},vt=()=>{s.value.fileIds=[],s.value.chatMsg=null,s.value.replyToId=null,s.value.chatMessageType=void 0,r.value=void 0,W.value=0,x.value=0};return ea(()=>{b.value&&(clearTimeout(b.value),b.value=null),v.value&&(clearTimeout(v.value),v.value=null)}),(l,d)=>(i(),R("div",Ee(Le(l.$attrs)),[M.value?(i(),h(ka,{key:0,flat:"",bordered:!l.square,class:te(["card-bg",{"card-minipage-style":l.miniChat}]),square:l.square},{default:e(()=>[l.showHeader?(i(),R(G,{key:0},[a(nn,{item:M.value,"mini-chat":l.miniChat,miniminze:l.miniminze,onTogglePin:d[0]||(d[0]=p=>l.$emit("toggle-pin",p)),onToggleMute:d[1]||(d[1]=p=>l.$emit("toggle-mute",p)),onToggleFav:d[2]||(d[2]=p=>l.$emit("toggle-fav",p)),onDeleteChat:d[3]||(d[3]=p=>l.$emit("delete-chat",p)),onLeaveGroup:d[4]||(d[4]=p=>l.$emit("leave-group",p)),onInvitePeople:t,onOnClose:d[5]||(d[5]=p=>l.$emit("on-close",p))},null,8,["item","mini-chat","miniminze"]),a(ta)],64)):C("",!0),me(O("div",null,[a(fa,{id:"scroll-chat-target-id",ref_key:"scrollerChatRef",ref:D,class:"q-pa-sm","key-field":"id",items:y.value,"min-item-size":24,"scroll-area-height":l.scrollAreaHeight,onOnUpdate:H},{slotBefore:e(()=>[a(Ma,{ref_key:"chatInfinityScrollRef",ref:S,"scroll-target":"#scroll-chat-target-id",reverse:"",disable:K.value,offset:0,onOnInfinite:L},null,8,["disable"])]),default:e(({item:p,index:T})=>[(i(),h(Ya,{key:`message-${p.id}-${T}`,item:p,index:T,"chat-type":M.value.chatType,"mini-chat":l.miniChat,"high-light-text":m.value,onMessageReaction:st,onMessageDelete:at,onMessageUnsend:nt,onMessageReply:lt,onOnOpenSeenDialog:it,onOnFocusMessageReply:ut,onMessageShare:rt},null,8,["item","index","chat-type","mini-chat","high-light-text"]))]),slotAfter:e(()=>[U.value?(i(),h(ve,{key:0,name:o(w)("base.you"),"bg-color":"message-sent",sent:""},{avatar:e(()=>[o(I)?.auth?.avatar?.thumbnail?(i(),h(pe,{key:0,class:"q-message-avatar q-message-avatar--sent",src:o(I)?.auth?.avatar?.thumbnail},null,8,["src"])):C("",!0)]),default:e(()=>[O("div",null,[W.value>0?(i(),R(G,{key:0},[P(z(o(w)("chats.sendFileFmt",{success:x.value,total:W.value})),1)],64)):(i(),R(G,{key:1},[P(z(o(w)("chats.sendingMessage")),1)],64)),a(Ue,{class:"q-ml-sm",size:"2rem"})])]),_:1},8,["name"])):C("",!0),u.value?(i(),h(ve,{key:1,"bg-color":"message-received",sent:!1},{avatar:e(()=>[a(pe,{class:"q-mr-xs",src:"https://cdn.quasar.dev/img/avatar4.jpg"})]),default:e(()=>[O("div",sn,[a(Ue,{size:"2rem",color:"primary"})])]),_:1})):C("",!0)]),_:1},8,["items","scroll-area-height"])],512),[[aa,!l.miniminze]]),_.value&&!l.miniminze?(i(),R("div",ln,[a(F,{round:"",color:o(f)?"black":"white","text-color":o(f)?"white":"black",onClick:X,icon:o(na)},null,8,["color","text-color","icon"])])):C("",!0)]),_:1},8,["bordered","class","square"])):C("",!0),r.value?(i(),h(o($),{key:1,item:r.value,onOnClose:ot},null,8,["item"])):C("",!0),!l.miniminze&&M.value&&M.value.id&&Q.value?(i(),h(La,{key:2,ref_key:"chatContentInputRef",ref:se,"input-id":M.value.id,"mini-chat":l.miniChat,"emoji-picker-id":`chat-message-emoji-${M.value.id}`,loading:U.value,onOnSubmit:mt,"input-dense":!0,"input-avata":l.inputAvata},null,8,["input-id","mini-chat","emoji-picker-id","loading","input-avata"])):C("",!0)],16))}}),un=ye(on,[["__scopeId","data-v-9d51889d"]]),rn={class:"text-center"},Ke=J({__name:"BaseSuspense",setup(n){return(k,$)=>(i(),h(oa,null,{default:e(()=>[he(k.$slots,"default")]),fallback:e(()=>[he(k.$slots,"fallback",{},()=>[O("div",rn,[a(Sa)])])]),_:3}))}}),mn={class:"row"},dn={key:0,class:"col-12 col-md-3 col-sm-4 q-pa-sm"},cn={key:1,class:"col-12"},fn={class:"col-12 col-md-6 col-sm-8 q-pa-md"},gn={key:2,style:{height:"50vh"},class:"row items-center flex-center"},vn={key:2,class:"col-12 col-md-3 q-pa-sm"},hn=J({__name:"index",setup(n){const k=ue(()=>re(()=>import("./ChatLeft-Cnv7R7gr.js"),__vite__mapDeps([44,2,3,36,6,22,23,33,34,30,31,11,12,13,14,25,32,45,40,46,47,48,19,20,21,15,10,24,26,27,28,29,35,37,38,39,4,41,49]))),$=ue(()=>re(()=>import("./ChatRight-DhF3IY27.js"),__vite__mapDeps([50,2,3,11,12,13,6,14,33,34,22,23,46,47,48,37,19,20,21,15,10,24,25,26,27,28,29,30,31,32,35,36,38,39,40,4,41]))),{t:w}=ge(),{screen:f}=xe(),{setTitle:I}=Ta();I(`${w("chats.chats")} | ${w("app.name")}`);const{getParamNumber:M,appNavigateTo:y}=Me(),S=Be(),{isSmallScreen:m,isMobileOrTablet:s}=ia(),u=ua(),r=c(),B=V(()=>M("groupId")||0),A=c(!1),q=c(!1),de=c(!1),Q=c(!0),ne=c([...ra.dataList]);ke(async()=>{s().then(b=>{b&&(A.value=!0)}),await Y(),de.value=!0});const se=b=>{b&&y(`/example/chats/g/${b.id}`)},Y=async()=>{if(Q.value=!0,await N(),!B.value)return Q.value=!1,new Promise(v=>v(!1));const b=ne.value.find(v=>v.id==B.value);return console.log("onFetchGroupData, id ",B.value,b),b&&(r.value=ma(b)),Q.value=!1,new Promise(v=>{v(!0)})},N=()=>(r.value=void 0,new Promise(b=>{setTimeout(()=>{b(!0)},500)})),D=(b,v)=>{S.toggleChatSetting=!0,S.chatId=v,S.chatSettingType=b},K=async(b,v=!0)=>{b&&(v&&r.value&&(console.log("toggleMute",b),r.value.muteNotify=!r.value.muteNotify),D("NOTIFICATION",b))},U=async(b,v=!0)=>{b&&(v&&r.value&&(r.value.pin=!r.value.pin),D("PIN",b))},W=async(b,v=!0)=>{b&&(v&&r.value&&(r.value.favorite=!r.value.favorite),D("FAVORITE",b))},x=async(b,v=!0)=>{b&&(D("LEAVE",b),v&&(N(),y("/example/chats/g/0",!0)))},j=async(b,v=!0)=>{b&&(D("LEAVE",b),v&&(N(),y("/example/chats/g/0",!0)))},_=b=>{console.log("onCloseChat",b),N(),y("/example/chats/g/0",!0)};return _e(()=>u.params.groupId,()=>{Y()}),(b,v)=>(i(),h(ca,null,{default:e(()=>[a($e,{flat:"",square:"",style:{"min-height":"91vh"}},{default:e(()=>[O("div",mn,[o(f).gt.xs?(i(),R("div",dn,[a(Ke,null,{default:e(()=>[a(o(k),{class:"content-limit720",onOnItemClick:se,"group-item":r.value},null,8,["group-item"])]),fallback:e(()=>[a(Pe,{no:5})]),_:1})])):(i(),R("div",cn,[a(F,{icon:o(He),flat:"",round:"",onClick:v[0]||(v[0]=g=>A.value=!0)},null,8,["icon"]),a(F,{icon:o(He),flat:"",round:"",onClick:v[1]||(v[1]=g=>q.value=!0),class:"float-right"},null,8,["icon"])])),O("div",fn,[Q.value?(i(),h(Pe,{key:0,"show-header":"",no:8})):r.value?(i(),h(un,{key:1,modelValue:r.value,"onUpdate:modelValue":v[2]||(v[2]=g=>r.value=g),class:"content-limit",onToggleMute:K,onTogglePin:U,onToggleFav:W,onDeleteChat:x,onLeaveGroup:j,onOnClose:_},null,8,["modelValue"])):(i(),R("div",gn,[a(Ia,{status:"empty",description:o(w)("chats.chatContentEmpty"),"show-icon":!1},{extra:e(()=>[a(ie,{name:o(da),size:"120px",class:"text-muted"},null,8,["name"])]),_:1},8,["description"])]))]),o(f).gt.xs&&o(f).gt.sm?(i(),R("div",vn,[a(Ke,null,{default:e(()=>[r.value?(i(),h(o($),{key:0,modelValue:r.value,"onUpdate:modelValue":v[3]||(v[3]=g=>r.value=g),onToggleMute:K,onTogglePin:U,onToggleFav:W,"show-close":o(m),onOnClose:v[4]||(v[4]=g=>q.value=!1),class:"content-limit720"},null,8,["modelValue","show-close"])):C("",!0)]),fallback:e(()=>[a(Pe,{no:5})]),_:1})])):C("",!0)])]),_:1}),a(Ge,{modelValue:A.value,"onUpdate:modelValue":v[6]||(v[6]=g=>A.value=g),position:"left"},{default:e(()=>[a($e,{style:{"max-width":"350px","min-width":"90vw","min-height":"100vh"}},{default:e(()=>[a(o(k),{"auto-detect":!1,onOnItemClick:se,"show-close":"",onOnClose:v[5]||(v[5]=g=>A.value=!1),"group-item":r.value},null,8,["group-item"])]),_:1})]),_:1},8,["modelValue"]),q.value&&r.value?(i(),h(Ge,{key:0,modelValue:q.value,"onUpdate:modelValue":v[9]||(v[9]=g=>q.value=g),position:"right"},{default:e(()=>[a($e,{style:{"max-width":"350px","min-height":"100vh"}},{default:e(()=>[a(o($),{modelValue:r.value,"onUpdate:modelValue":v[7]||(v[7]=g=>r.value=g),onToggleMute:K,onTogglePin:U,onToggleFav:W,"show-close":"",onOnClose:v[8]||(v[8]=g=>q.value=!1),class:"content-limit720"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])):C("",!0)]),_:1}))}}),Nn=Object.freeze(Object.defineProperty({__proto__:null,default:hn},Symbol.toStringTag,{value:"Module"}));export{_a as _,Nn as i,Be as u};
