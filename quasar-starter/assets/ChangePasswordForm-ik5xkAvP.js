import{l as U,u as h,a as k,r as m,a2 as A,m as I,n as L,w as a,x as e,ax as q,t as w,az as b,J as s,d6 as D,M as v,ba as F,ae as g,a0 as N,Q as z,L as E,aE as p,aM as J,aG as K,aJ as M,aK as T,be as G,aL as O,b9 as R}from"./index-D_pQv8pS.js";import{Q as X}from"./QBar-B3QA6Sqv.js";import{u as j}from"./useValidation-v6PKFoOY.js";import{U as H}from"./UserService-D0G-MVDB.js";import"./useAxios-QRQbEkIG.js";const ae=U({__name:"ChangePasswordForm",props:{dialog:{type:Boolean,default:!1},isFromCompanyAdmin:{type:Boolean,default:!1},title:{type:String,default:void 0},userId:{type:Number,default:void 0}},emits:["on-close","on-okay"],setup(y,{emit:Q}){const n=y,V=Q,{t:o}=h(),{appLoading:c}=k(),i=m(!1),d=m(""),u=m(!0),{validatePasswordStrongV2:C,required:_}=j(),{updateUserPassword:x,updateUserPasswordByAdmin:P}=H(),f=()=>{V("on-close")},B=()=>{S({userChangePasswordRequest:{password:d.value,logoutAllDevice:u.value}})},S=async r=>{n.userId&&(c(),n.isFromCompanyAdmin?await P(r,n.userId):await x(r,n.userId),c(!1),f(),d.value="",u.value=!0)};return A(()=>n.dialog,r=>{i.value=r}),(r,t)=>(L(),I(R,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=l=>i.value=l),persistent:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:a(()=>[e(q,{style:{"max-width":"480px"},flat:"",bordered:""},{default:a(()=>[e(X,{class:"bg-transparent q-my-sm"},{default:a(()=>[e(b,{name:s(D)},null,8,["name"]),w("div",null,v(s(o)("base.changePassword")),1),e(F),e(g,{dense:"",flat:"",icon:s(N),size:"md",onClick:f},{default:a(()=>[e(z,null,{default:a(()=>[E(v(s(o)("base.close")),1)]),_:1})]),_:1},8,["icon"])]),_:1}),e(p,null,{default:a(()=>[e(J,{onSubmit:B,class:"q-px-sm"},{default:a(()=>[e(p,null,{default:a(()=>[e(K,{class:"q-pt-md",outlined:"",dense:"",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),type:"password",label:s(o)("authen.newPassword"),rules:[s(_),l=>s(C)(l)||s(o)("error.passwordStrongError")]},{prepend:a(()=>[e(b,{name:s(M),color:"grey-9"},null,8,["name"])]),_:1},8,["modelValue","label","rules"])]),_:1}),e(p,null,{default:a(()=>[w("div",null,[e(T,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=l=>u.value=l),label:s(o)("authen.logoutAll")},null,8,["modelValue","label"])])]),_:1}),e(G),e(O,{align:"center"},{default:a(()=>[e(g,{unelevated:"",color:"primary",label:s(o)("updatePassword"),type:"submit"},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});export{ae as default};
