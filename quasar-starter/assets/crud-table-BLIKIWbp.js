import{u as N}from"./useAppMeta-5dt4139H.js";import{l as $,u as D,r as u,a as k,o as U,c as X,m as x,n as F,w as R,x as z,a0 as i,y as V,cY as H}from"./index-DEwJ1m0T.js";import{U as Y}from"./UserService-D7fsYNbc.js";import{_ as j}from"./BasePage.vue_vue_type_script_setup_true_lang-CtTOh7QG.js";import{C as s,I as d,_ as q}from"./CrudApiList.vue_vue_type_script_setup_true_lang-Crbs4wQQ.js";import{u as G}from"./usePaging-CXU1kUVP.js";import{u as J}from"./useSort-0_J4JOrs.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-meta-DclE-4wk.js";import"./useAxios-Brfjha5w.js";import"./ClosePopup-DbzcbfLg.js";import"./Paging.vue_vue_type_script_setup_true_lang-dc6aWt4p.js";import"./BaseCard-Rnqjfjrc.js";const Q=$({__name:"crud-table",setup(W){const{t:n}=D(),{setTitle:v}=N();v(`Crud table | ${n("app.name")}`);const g=u([{label:"Image",translateLabel:!1,column:"avatar.thumbnail",type:s.AVATAR,options:{fillable:!0,align:"center",size:"55px"}},{label:"Email",translateLabel:!1,column:"email",type:s.TEXT,options:{searchable:!0,sortable:!0,fillable:!0,searchType:d.TEXT,searchModel:"",searchOperation:":"}},{label:"Username",translateLabel:!1,column:"username",type:s.TEXT,options:{fillable:!0,searchable:!0,sortable:!0,searchType:d.TEXT,searchModel:"",searchOperation:":"}},{label:"Active",translateLabel:!1,column:"active",type:s.STATUS,options:{fillable:!0,sortable:!0,searchable:!0,align:"center",searchType:d.BOOLEAN,searchModel:!0,searchOperation:"="}},{label:"Tools",translateLabel:!1,type:s.BASE_TOOL,options:{fillable:!0,editButton:!0,deleteButton:!0,copyButton:!0,align:"center"}}]),{findAll:h}=Y(),{appConfirm:y}=k(),{pages:t,resetPaging:b}=G(5),{sort:a}=J({column:"id",mode:"desc"}),o=u([]),r=u(!1),m=u(!1);U(async()=>{c()});const _=X(()=>`?page=${t.value.current}&size=${t.value.itemsPerPage}&sort=${a.value.column},${a.value.mode}`),c=async()=>{m.value=!0;const e=await h(_.value);return console.log("findAll",e),e&&(o.value=e.dataList,e.totalPages!=null&&(t.value.totalPages=e.totalPages),e.totalElements!=null&&(t.value.totalElements=e.totalElements),e.last!=null&&(t.value.last=e.last)),r.value||(r.value=!0),m.value=!1,new Promise(l=>l(!0))},P=async()=>{C(),await c()},C=()=>{b(),o.value=[],r.value=!1},T=e=>{console.log("onItemClick",e)},A=e=>{console.log("onItemCopy",e)},O=async e=>{console.log("onPageNoChange",e),e!=null&&(t.value.current=e,await c())},S=async e=>{console.log("onItemPerPageChange",e),e!=null&&(t.value.itemsPerPage=e,await c())},I=async e=>{a.value.column===e?a.value.mode=a.value.mode==="asc"?"desc":"asc":a.value.column=e,console.log("onSort",a.value),f()},f=async()=>{o.value=await H(o.value,a.value.column,a.value.mode||"asc")},L=async e=>{console.log("onSortMode",e),a.value.mode=e,f()},w=async e=>{console.log("onAdvanceSearch",e)},E=async(e,l)=>{await y(n("app.monogram"),n("base.deleteConfirm"))&&(console.log("onItemDelete",{indexOrIds:e,isSingle:l}),l?o.value=o.value.filter((p,M)=>M!==e):Array.isArray(e)&&(o.value=o.value.filter(p=>p.id&&!e.includes(p.id))))},B=()=>{console.log("onNewForm")};return(e,l)=>(F(),x(j,null,{default:R(()=>[z(q,{icon:i(V),title:i(n)("model_user"),"crud-name":"user",loading:m.value,"frist-load":r.value,pages:i(t),headers:g.value,sort:i(a),list:o.value,onOnItemClick:T,onOnItemCopy:A,onOnPageNoChange:O,onOnItemsPerpageChange:S,onOnSort:I,onOnSortMode:L,onOnReload:P,onOnAdvanceSearch:w,onOnItemDelete:E,onOnNewForm:B},null,8,["icon","title","loading","frist-load","pages","headers","sort","list"])]),_:1}))}}),de=K(Q,[["__scopeId","data-v-a00404c6"]]);export{de as default};
