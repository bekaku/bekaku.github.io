const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChatLeft-DpXbl1v2.js","assets/index--rRessbS.js","assets/index-gdJTHt4v.css","assets/ChatHistoryItem-uMOfSA-L.js","assets/ClosePopup-CdkpPTzR.js","assets/BaseContentHtml.vue_vue_type_script_setup_true_lang-Cf3pwHsI.js","assets/chatStore-CQ2b_5mW.js","assets/BaseAvatar-DBU721Eb.js","assets/FileManagerService-CXiPGXBm.js","assets/useAxios-BBYX69-N.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/BaseAvatar-DIqnQNII.css","assets/ChatHistoryItem-Bo1_Lhgc.css","assets/BaseButton-BdMngQoy.js","assets/BaseButton-DSUAVr6U.css","assets/BaseCard-B88I9Z5e.js","assets/BaseCard-BQ9eHCk3.css","assets/BaseDropdownMenu-B57CWaAD.js","assets/BaseLabelValueItem.vue_vue_type_script_setup_true_lang-CwWrHeVE.js","assets/BaseTooltip.vue_vue_type_script_setup_true_lang-DoqvQOHe.js","assets/BaseDropdownMenu-BuF6TE5H.css","assets/BaseInput.vue_vue_type_script_setup_true_lang-cH5r5hVs.js","assets/BaseResult.vue_vue_type_script_setup_true_lang-D7aZpwSp.js","assets/BaseScrollArea.vue_vue_type_script_setup_true_lang-DygCZjl9.js","assets/BaseTabs-BRrWk2Qi.js","assets/BaseTabs-jT3kSFg7.css","assets/ChatRight-yZOvN-s9.js","assets/BaseLink.vue_vue_type_script_setup_true_lang-UgTDPXO0.js"])))=>i.map(i=>d[i]);
import{l as B,m,n as u,dm as X,w as s,v as N,t as L,x as a,u as Y,bN as Z,a as ee,$ as te,ah as oe,r,c as ae,db as le,o as se,dO as ne,a5 as ue,T as $,ay as O,R as _,J as n,aG as S,af as A,dP as I,aA as ie,dc as re,ba as D,ac as me,aO as F}from"./index--rRessbS.js";import ce from"./ChatContent-DwYYijWS.js";import{u as pe}from"./useAppMeta-BgtF2_2c.js";import{_ as de}from"./BaseResult.vue_vue_type_script_setup_true_lang-D7aZpwSp.js";import{_ as ve}from"./BaseSpinner.vue_vue_type_script_setup_true_lang-CypVMFNX.js";import{_ as b}from"./SkeletonItem.vue_vue_type_script_setup_true_lang-Cpqn83wz.js";import{u as fe}from"./chatStore-CQ2b_5mW.js";import"./BaseVirtualScrollerDynamic.vue_vue_type_script_setup_true_lang-eibdG0MW.js";import"./BaseAvatar-DBU721Eb.js";import"./FileManagerService-CXiPGXBm.js";import"./useAxios-BBYX69-N.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BaseFilePicker-BXZrxDRb.js";import"./BaseButton-BdMngQoy.js";import"./BaseFilesPreviewItemAlt.vue_vue_type_script_setup_true_lang-GyMzjN0R.js";import"./BaseFilesPreviewItem.vue_vue_type_script_setup_true_lang-BUFnP1lA.js";import"./BaseTooltip.vue_vue_type_script_setup_true_lang-DoqvQOHe.js";import"./BaseRippleItem.vue_vue_type_script_setup_true_lang-DqdtRDhz.js";import"./BaseContentItem-XcOgbosR.js";import"./BaseContentHtml.vue_vue_type_script_setup_true_lang-Cf3pwHsI.js";import"./OpenGraphItemAlt.vue_vue_type_script_setup_true_lang-Ca6Gi-r9.js";import"./BaseDropdownMenu-B57CWaAD.js";import"./BaseLabelValueItem.vue_vue_type_script_setup_true_lang-CwWrHeVE.js";import"./BaseCard-B88I9Z5e.js";import"./BaseInfiniteScroll.vue_vue_type_script_setup_true_lang-UoXsoPFo.js";import"./ClosePopup-CdkpPTzR.js";import"./BaseLink.vue_vue_type_script_setup_true_lang-UgTDPXO0.js";import"./use-meta-CZkgALQz.js";const ge={class:"text-center"},M=B({__name:"BaseSuspense",setup(R){return(c,h)=>(u(),m(X,null,{default:s(()=>[N(c.$slots,"default")]),fallback:s(()=>[N(c.$slots,"fallback",{},()=>[L("div",ge,[a(ve)])])]),_:3}))}}),_e={class:"row"},he={key:0,class:"col-12 col-md-3 col-sm-4 q-pa-sm"},Ce={key:1,class:"col-12"},ye={class:"col-12 col-md-6 col-sm-8 q-pa-md"},Ve={key:2,style:{height:"50vh"},class:"row items-center flex-center"},ke={key:2,class:"col-12 col-md-3 q-pa-sm"},Xe=B({__name:"index",setup(R){const c=S(()=>F(()=>import("./ChatLeft-DpXbl1v2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]))),h=S(()=>F(()=>import("./ChatRight-yZOvN-s9.js"),__vite__mapDeps([26,1,2,7,8,9,10,11,13,14,15,16,27,23,6,24,25]))),{t:C}=Y(),{screen:y}=Z(),{setTitle:Q}=pe();Q(`${C("chats.chats")} | ${C("app.name")}`);const{getParamNumber:G,appNavigateTo:v}=ee(),V=fe(),{isSmallScreen:U,isMobileOrTablet:q}=te(),j=oe(),o=r(),k=ae(()=>G("groupId")||0),p=r(!1),i=r(!1),z=r(!1),f=r(!0),H=r([...le.dataList]);se(async()=>{q().then(t=>{t&&(p.value=!0)}),await E(),z.value=!0});const P=t=>{t&&v(`/example/chats/g/${t.id}`)},E=async()=>{if(f.value=!0,await g(),!k.value)return f.value=!1,new Promise(e=>e(!1));const t=H.value.find(e=>e.id==k.value);return console.log("onFetchGroupData, id ",k.value,t),t&&(o.value=ne(t)),f.value=!1,new Promise(e=>{e(!0)})},g=()=>(o.value=void 0,new Promise(t=>{setTimeout(()=>{t(!0)},500)})),d=(t,e)=>{V.toggleChatSetting=!0,V.chatId=e,V.chatSettingType=t},w=async(t,e=!0)=>{t&&(e&&o.value&&(console.log("toggleMute",t),o.value.muteNotify=!o.value.muteNotify),d("NOTIFICATION",t))},T=async(t,e=!0)=>{t&&(e&&o.value&&(o.value.pin=!o.value.pin),d("PIN",t))},x=async(t,e=!0)=>{t&&(e&&o.value&&(o.value.favorite=!o.value.favorite),d("FAVORITE",t))},J=async(t,e=!0)=>{t&&(d("LEAVE",t),e&&(g(),v("/example/chats/g/0",!0)))},K=async(t,e=!0)=>{t&&(d("LEAVE",t),e&&(g(),v("/example/chats/g/0",!0)))},W=t=>{console.log("onCloseChat",t),g(),v("/example/chats/g/0",!0)};return ue(()=>j.params.groupId,()=>{E()}),(t,e)=>(u(),m(me,null,{default:s(()=>[a(O,{flat:"",square:"",style:{"min-height":"91vh"}},{default:s(()=>[L("div",_e,[n(y).gt.xs?(u(),_("div",he,[a(M,null,{default:s(()=>[a(n(c),{class:"content-limit720",onOnItemClick:P,"group-item":o.value},null,8,["group-item"])]),fallback:s(()=>[a(b,{no:5})]),_:1})])):(u(),_("div",Ce,[a(A,{icon:n(I),flat:"",round:"",onClick:e[0]||(e[0]=l=>p.value=!0)},null,8,["icon"]),a(A,{icon:n(I),flat:"",round:"",onClick:e[1]||(e[1]=l=>i.value=!0),class:"float-right"},null,8,["icon"])])),L("div",ye,[f.value?(u(),m(b,{key:0,"show-header":"",no:8})):o.value?(u(),m(ce,{key:1,modelValue:o.value,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value=l),class:"content-limit",onToggleMute:w,onTogglePin:T,onToggleFav:x,onDeleteChat:J,onLeaveGroup:K,onOnClose:W},null,8,["modelValue"])):(u(),_("div",Ve,[a(de,{status:"empty",description:n(C)("chats.chatContentEmpty"),"show-icon":!1},{extra:s(()=>[a(ie,{name:n(re),size:"120px",class:"text-muted"},null,8,["name"])]),_:1},8,["description"])]))]),n(y).gt.xs&&n(y).gt.sm?(u(),_("div",ke,[a(M,null,{default:s(()=>[o.value?(u(),m(n(h),{key:0,modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value=l),onToggleMute:w,onTogglePin:T,onToggleFav:x,"show-close":n(U),onOnClose:e[4]||(e[4]=l=>i.value=!1),class:"content-limit720"},null,8,["modelValue","show-close"])):$("",!0)]),fallback:s(()=>[a(b,{no:5})]),_:1})])):$("",!0)])]),_:1}),a(D,{modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=l=>p.value=l),position:"left"},{default:s(()=>[a(O,{style:{"max-width":"350px","min-width":"90vw","min-height":"100vh"}},{default:s(()=>[a(n(c),{"auto-detect":!1,onOnItemClick:P,"show-close":"",onOnClose:e[5]||(e[5]=l=>p.value=!1),"group-item":o.value},null,8,["group-item"])]),_:1})]),_:1},8,["modelValue"]),i.value&&o.value?(u(),m(D,{key:0,modelValue:i.value,"onUpdate:modelValue":e[9]||(e[9]=l=>i.value=l),position:"right"},{default:s(()=>[a(O,{style:{"max-width":"350px","min-height":"100vh"}},{default:s(()=>[a(n(h),{modelValue:o.value,"onUpdate:modelValue":e[7]||(e[7]=l=>o.value=l),onToggleMute:w,onTogglePin:T,onToggleFav:x,"show-close":"",onOnClose:e[8]||(e[8]=l=>i.value=!1),class:"content-limit720"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])):$("",!0)]),_:1}))}});export{Xe as default};
