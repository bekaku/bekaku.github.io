const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BaseDialog-BT7sI-93.js","assets/BaseDialog.vue_vue_type_script_setup_true_lang-DHHOqwoj.js","assets/index-Cc44bwNN.js","assets/index-Dx9QcfFl.css","assets/Ellipsis-m3FcHJ-4.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/Ellipsis-D-gyw0_d.css","assets/BaseInputOtp-CnrJkGm6.js","assets/BaseInputOtp.vue_vue_type_script_setup_true_lang-DwBv44cy.js","assets/PasswordForm-BkYy9Wnq.js","assets/PasswordForm.vue_vue_type_script_setup_true_lang-BCej6t1P.js","assets/useValidation-CNxKagQt.js","assets/BaseButton-C819xg9j.js","assets/BaseButton-5r8o33g0.css"])))=>i.map(i=>d[i]);
import{aR as E,bR as R,k as I,C as v,aS as i,a8 as j,bj as X,dk as G,e2 as J,e3 as Y,e4 as T,e5 as M,e6 as Z,e7 as ee,e8 as te,bT as Q,e9 as ae,ea as ne,b$ as oe,c0 as re,eb as se,ec as le,ed as ie,ee as ue,d as ce,u as de,j as ve,aj as pe,c as N,M as $,o as L,w as C,e as p,aU as fe,a6 as me,ad as _e,T as l,ef as ge,as as be,a as x,X as k,al as Se,i as Pe,ar as K,S as O,eg as we,ak as A,eh as U,at as B}from"./index-Cc44bwNN.js";import{A as Ce}from"./useAuth-CgUXRwib.js";import{u as qe}from"./useValidation-CNxKagQt.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAxios-BTzWUnPn.js";const W=E({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:d}){const{proxy:{$q:m}}=R(),w=I(null),n=v(()=>e.stepper.modelValue===e.step.name),_=v(()=>{const t=e.step.disable;return t===!0||t===""}),q=v(()=>{const t=e.step.error;return t===!0||t===""}),g=v(()=>{const t=e.step.done;return _.value===!1&&(t===!0||t==="")}),f=v(()=>{const t=e.step.headerNav,o=t===!0||t===""||t===void 0;return _.value===!1&&e.stepper.headerNav&&o}),b=v(()=>e.step.prefix&&(n.value===!1||e.stepper.activeIcon==="none")&&(q.value===!1||e.stepper.errorIcon==="none")&&(g.value===!1||e.stepper.doneIcon==="none")),s=v(()=>{const t=e.step.icon||e.stepper.inactiveIcon;if(n.value===!0){const o=e.step.activeIcon||e.stepper.activeIcon;return o==="none"?t:o||m.iconSet.stepper.active}if(q.value===!0){const o=e.step.errorIcon||e.stepper.errorIcon;return o==="none"?t:o||m.iconSet.stepper.error}if(_.value===!1&&g.value===!0){const o=e.step.doneIcon||e.stepper.doneIcon;return o==="none"?t:o||m.iconSet.stepper.done}return t}),c=v(()=>{const t=q.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(n.value===!0){const o=e.step.activeColor||e.stepper.activeColor||e.step.color;return o!==void 0?o:t}return t!==void 0?t:_.value===!1&&g.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),S=v(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(c.value!==void 0?` text-${c.value}`:"")+(q.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(b.value===!0?"prefix":"icon"):"")+(n.value===!0?" q-stepper__tab--active":"")+(g.value===!0?" q-stepper__tab--done":"")+(f.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(_.value===!0?" q-stepper__tab--disabled":"")),h=v(()=>e.stepper.headerNav!==!0?!1:f.value);function u(){w.value?.focus(),n.value===!1&&e.goToPanel(e.step.name)}function V(t){t.keyCode===13&&n.value===!1&&e.goToPanel(e.step.name)}return()=>{const t={class:S.value};f.value===!0&&(t.onClick=u,t.onKeyup=V,Object.assign(t,_.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:d.tabindex||0}));const o=[i("div",{class:"q-focus-helper",tabindex:-1,ref:w}),i("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[i("span",{class:"row flex-center"},[b.value===!0?e.step.prefix:i(j,{name:s.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const y=[i("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&y.push(i("div",{class:"q-stepper__caption"},e.step.caption)),o.push(i("div",{class:"q-stepper__label q-stepper__line relative-position"},y))}return X(i("div",t,o),[[G,h.value]])}}});function H(e){return i("div",{class:"q-stepper__step-content"},[i("div",{class:"q-stepper__step-inner"},Q(e.default))])}const F={setup(e,{slots:d}){return()=>H(d)}},D=E({name:"QStep",props:{...J,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:d,emit:m}){const{proxy:{$q:w}}=R(),n=Y(M,T);if(n===T)return console.error("QStep needs to be a child of QStepper"),T;const{getCache:_}=ee(),q=I(null),g=v(()=>n.value.modelValue===e.name),f=v(()=>w.platform.is.ios!==!0&&w.platform.is.chrome===!0||g.value!==!0||n.value.vertical!==!0?{}:{onScroll(c){const{target:S}=c;S.scrollTop>0&&(S.scrollTop=0),e.onScroll!==void 0&&m("scroll",c)}}),b=v(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function s(){const c=n.value.vertical;return c===!0&&n.value.keepAlive===!0?i(te,n.value.keepAliveProps.value,g.value===!0?[i(n.value.needsUniqueKeepAliveWrapper.value===!0?_(b.value,()=>({...F,name:b.value})):F,{key:b.value},d.default)]:void 0):c!==!0||g.value===!0?H(d):void 0}return()=>i("div",{ref:q,class:"q-stepper__step",role:"tabpanel",...f.value},n.value.vertical===!0?[i(W,{stepper:n.value,step:e,goToPanel:n.value.goToPanel}),n.value.animated===!0?i(Z,s):s()]:[s()])}}),ye=/(-\w)/g;function xe(e){const d={};for(const m in e){const w=m.replace(ye,n=>n[1].toUpperCase());d[w]=e[m]}return d}const Ve=E({name:"QStepper",props:{...oe,...ne,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:ae,setup(e,{slots:d}){const m=R(),w=re(e,m.proxy.$q),{updatePanelsList:n,isValidPanelName:_,updatePanelIndex:q,getPanelContent:g,getPanels:f,panelDirectives:b,goToPanel:s,keepAliveProps:c,needsUniqueKeepAliveWrapper:S}=se();le(M,v(()=>({goToPanel:s,keepAliveProps:c,needsUniqueKeepAliveWrapper:S,...e})));const h=v(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0?" q-stepper--flat":"")+(e.bordered===!0?" q-stepper--bordered":"")+(w.value===!0?" q-stepper--dark q-dark":"")),u=v(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function V(){const t=Q(d.message,[]);if(e.vertical===!0){_(e.modelValue)&&q();const o=i("div",{class:"q-stepper__content"},Q(d.default));return t===void 0?[o]:t.concat(o)}return[i("div",{class:u.value},f().map(o=>{const y=xe(o.props);return i(W,{key:y.name,stepper:e,step:y,goToPanel:s})})),t,ue("div",{class:"q-stepper__content q-panel-parent"},g(),"cont",e.swipeable,()=>b.value)]}return()=>(n(d),i("div",{class:h.value},ie(d.navigation,V())))}}),Ie={class:"q-pa-md text-center"},ke={class:"text-body1"},Te={class:"text-subtitle2 text-muted"},Ae={class:"q-pa-md text-center"},Be={class:"text-body1 text-center"},De={class:"text-subtitle2 text-muted"},Qe={class:"text-subtitle2 text-warning"},Ee=ce({__name:"ForgotPassword",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(e){const d=A(()=>B(()=>import("./BaseDialog-BT7sI-93.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),m=A(()=>B(()=>import("./BaseInputOtp-CnrJkGm6.js"),__vite__mapDeps([7,8,2,3]))),w=A(()=>B(()=>import("./PasswordForm-BkYy9Wnq.js"),__vite__mapDeps([9,10,2,3,11,12,5,13]))),{requestVerifyCodeToResetPwd:n,sendVerifyCodeToResetPwd:_,resetPassword:q}=Ce(),{requireEmail:g}=qe(),{appLoading:f,appToast:b}=de(),{t:s}=ve(),c=pe(e,"modelValue"),S=I(),h=I(1),u=I({email:"",token:"",newPassword:"",confirmPassword:""}),V=I(!1),t=async()=>{if(!u.value.email)return;f();const r=await n(u.value);if(f(!1),r&&r.status&&r.status==200){const a=r.data;a.message&&b(a.message,{type:"positive",position:"bottom",multiLine:!1}),S.value&&S.value.next()}else r&&r.data&&y(r.data)},o=async r=>{if(!r||!u.value.email)return;u.value.token=r,f();const a=await _(u.value);f(!1),a&&a.status!=null&&a.status!=200?y(a.data):S.value&&S.value.next()},y=r=>{r.errors&&b(r.errors.toString(),{type:"negative",position:"bottom",multiLine:!1})},z=async()=>{if(!u.value.token||!u.value.email||!u.value.newPassword)return;f();const r=await q(u.value);if(f(!1),r&&r.status&&r.status==200){const a=r.data;a.message&&b(a.message,{type:"positive",position:"bottom",multiLine:!1}),c.value=!1}else r&&r.data&&y(r.data)};return(r,a)=>c.value!=null?(L(),N(l(d),{key:0,modelValue:c.value,"onUpdate:modelValue":a[5]||(a[5]=P=>c.value=P),"full-width":!1,title:l(s)("authen.forgetPassword"),onOnClose:a[6]||(a[6]=P=>c.value=!1),onOnHide:a[7]||(a[7]=P=>c.value=!1),persistent:!0,"transition-show":"fade","transition-hide":"fade",icon:l(U)},{default:C(()=>[p(fe),p(me,{flat:""},{default:C(()=>[p(_e,null,{default:C(()=>[p(Ve,{flat:"",bordered:"",modelValue:h.value,"onUpdate:modelValue":a[4]||(a[4]=P=>h.value=P),ref_key:"stepper",ref:S,color:"primary",animated:""},{default:C(()=>[p(D,{name:1,title:l(s)("authen.verification"),icon:l(ge),done:h.value>1},{default:C(()=>[p(be,{onSubmit:t,class:"q-px-sm"},{default:C(()=>[x("div",Ie,[x("div",ke,k(l(s)("authen.forgotPwdTitle")),1),x("div",Te,k(l(s)("authen.forgotPwdSubtitle")),1)]),p(Se,{outlined:"",modelValue:u.value.email,"onUpdate:modelValue":a[0]||(a[0]=P=>u.value.email=P),label:l(s)("base.email"),rules:[l(g)]},{prepend:C(()=>[p(j,{name:l(Pe)},null,8,["name"])]),_:1},8,["modelValue","label","rules"]),p(K,{align:"center"},{default:C(()=>[p(O,{unelevated:"",type:"submit",color:"primary",label:l(s)("base.continue")},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["title","icon","done"]),p(D,{name:2,title:l(s)("authen.verificationCode"),icon:l(we),done:h.value>2},{default:C(()=>[x("div",Ae,[x("div",Be,k(l(s)("authen.login_main_helper4")),1),x("div",De,k(l(s)("authen.login_main_helper5")),1),x("div",Qe,k(l(s)("authen.login_main_helper6")),1)]),p(l(m),{"input-length":6,onOnSubmit:o}),p(K,{align:"center"},{default:C(()=>[p(O,{flat:"",color:"primary",onClick:a[1]||(a[1]=P=>h.value=1),label:l(s)("base.previous"),class:"q-ml-sm"},null,8,["label"])]),_:1})]),_:1},8,["title","icon","done"]),p(D,{name:3,title:l(s)("authen.setPassword"),icon:l(U),done:h.value>3},{default:C(()=>[u.value?(L(),N(l(w),{key:0,newPassword:u.value.newPassword,"onUpdate:newPassword":a[2]||(a[2]=P=>u.value.newPassword=P),loading:V.value,"onUpdate:loading":a[3]||(a[3]=P=>V.value=P),onOnSubmit:z},null,8,["newPassword","loading"])):$("",!0)]),_:1},8,["title","icon","done"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title","icon"])):$("",!0)}}),Oe=he(Ee,[["__scopeId","data-v-073244ed"]]);export{Oe as default};
