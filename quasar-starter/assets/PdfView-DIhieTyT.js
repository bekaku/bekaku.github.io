import{d as D,ai as S,aj as b,k as d,b0 as R,c as m,o as f,a6 as Z,w as t,a as P,M as F,e as a,dc as q,T as u,O,j as _,b5 as X,aU as $,ad as z,Y as A,Z as U,aE as H,W as h,S as g,ax as I,V as C,X as k,aw as W,cw as Y,d8 as G,c4 as J,dd as K,z as ee,de as ae}from"./index-DLAlP7tE.js";import{_ as te}from"./BaseDialog.vue_vue_type_script_setup_true_lang-C0-5gNPB.js";import{F as le,l as oe,m as se,d as ne,h as re}from"./FileManagerService-CKlyxv3G.js";import{$ as ie}from"./index-DkB0VxFi.js";import{_ as ue}from"./SkeletonCard.vue_vue_type_script_setup_true_lang-Dyrb88xs.js";import"./Ellipsis-643mrh6r.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAxios-DN4MWJg7.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./BaseCard-ClBFMLe-.js";const de={class:"row justify-center"},fe=D({__name:"PdfViewBase",props:S({src:{},fitParent:{type:Boolean,default:!1},textLayer:{type:Boolean,default:!1},width:{},height:{},watermarkText:{},hideForms:{type:Boolean,default:!1}},{scale:{type:Number,default:1},scaleModifiers:{},page:{type:Number,default:1},pageModifiers:{},pagess:{type:Number,default:1},pagessModifiers:{},loading:{type:Boolean,default:!0},loadingModifiers:{}}),emits:S(["onPageChange"],["update:scale","update:page","update:pagess","update:loading"]),setup(p,{emit:Q}){const l=p,x=b(p,"scale"),M=b(p,"page"),N=b(p,"pagess");b(p,"loading");const w=d(!1),{pdf:y,pages:v}=ie(l.src),c=()=>{w.value=!0,N.value=v.value};return(r,T)=>{const V=R("pdf-vue");return f(),m(Z,{flat:""},{default:t(()=>[P("div",de,[w.value?F("",!0):(f(),m(q,{key:0,query:"",color:"primary",class:"q-mt-sm"})),a(O,null,{default:t(()=>[a(V,{pdf:u(y),scale:x.value,page:M.value,onLoaded:c,"fit-parent":r.fitParent,width:r.width,height:r.height,"text-layer":r.textLayer,"watermark-text":r.watermarkText,"hide-forms":r.hideForms},null,8,["pdf","scale","page","fit-parent","width","height","text-layer","watermark-text","hide-forms"])]),_:1})])]),_:1})}}}),Be=D({__name:"PdfView",props:S({title:{},src:{},fetchToServer:{type:Boolean,default:!1},showDownload:{type:Boolean,default:!0},isBlob:{type:Boolean,default:!1}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:S(["on-close"],["update:show"]),setup(p,{emit:Q}){const l=p,{fethCdnData:x,downloadCdnData:M}=le(),N=Q,{t:w}=_(),y=b(p,"show"),v=d(),c=d(!0),r=d(!1),T=d(),V=d(),o=d(1),s=d(1),B=d(0);X(async()=>{j()});const j=async()=>{if(c.value=!0,l.fetchToServer){const i=await x(l.src,"axiosresponse");i&&(v.value=await oe(i),V.value=i.headers["content-type"],T.value=se(i),c.value=!1)}else v.value=l.src,c.value=!1},E=async()=>{if(r.value=!0,l.fetchToServer)await M(l.src,l.title);else if(l.isBlob)try{ne(l.src,l.title||"pdf_file.pdf")}catch(i){console.error(i)}else re(l.src,l.title||"pdf_file.pdf");r.value=!1},L=()=>{N("on-close"),y.value=!1};return(i,e)=>(f(),m(te,{modelValue:y.value,"onUpdate:modelValue":e[7]||(e[7]=n=>y.value=n),title:i.title?i.title:"Pdf view",onOnClose:L,onOnHide:L,persistent:!0,"transition-show":"fade","transition-hide":"fade",icon:u(ae),"full-width":"","full-height":""},{toolbarAction:t(()=>[a(g,{flat:"",round:"",icon:u(I),onClick:e[0]||(e[0]=n=>o.value=o.value>.25?o.value-.25:o.value)},{default:t(()=>[a(C,null,{default:t(()=>e[8]||(e[8]=[h(" Zoom-")])),_:1})]),_:1},8,["icon"]),P("span",null,k(o.value*100+"%"),1),a(g,{flat:"",round:"",icon:u(W),onClick:e[1]||(e[1]=n=>o.value=o.value<2?o.value+.25:o.value)},{default:t(()=>[a(C,null,{default:t(()=>e[9]||(e[9]=[h(" Zoom+")])),_:1})]),_:1},8,["icon"]),a($,{vertical:""}),a(g,{onClick:e[2]||(e[2]=n=>s.value=s.value>1?s.value-1:s.value),flat:"",round:"",icon:u(Y)},null,8,["icon"]),P("span",null,k(s.value)+" / "+k(B.value),1),a(g,{onClick:e[3]||(e[3]=n=>s.value=s.value<B.value?s.value+1:s.value),flat:"",round:"",icon:u(G)},null,8,["icon"]),a(J),i.showDownload&&!c.value?(f(),m(g,{key:0,onClick:E,flat:"",round:"",icon:u(K)},{default:t(()=>[a(C,null,{default:t(()=>[h(k(u(w)("base.download")),1)]),_:1})]),_:1},8,["icon"])):F("",!0),a(g,{round:"",onClick:L,flat:"",icon:u(ee)},{default:t(()=>[a(C,null,{default:t(()=>[h(k(u(w)("base.close")),1)]),_:1})]),_:1},8,["icon"])]),default:t(()=>[a($),a(Z,{style:{"min-height":"500px","min-width":"100%"}},{default:t(()=>[a(z,null,{default:t(()=>[r.value?(f(),m(q,{key:0,query:"",color:"primary",class:"q-my-sm"})):F("",!0),c.value?(f(),A(U,{key:1},[c.value?(f(),m(ue,{key:0,"text-number":3,flat:"",show:""})):F("",!0)],64)):v.value?(f(),m(H,{key:2,style:{height:"80vh"}},{default:t(()=>[a(O,null,{default:t(()=>[a(fe,{src:v.value,scale:o.value,"onUpdate:scale":e[4]||(e[4]=n=>o.value=n),page:s.value,"onUpdate:page":e[5]||(e[5]=n=>s.value=n),pagess:B.value,"onUpdate:pagess":e[6]||(e[6]=n=>B.value=n)},null,8,["src","scale","page","pagess"])]),_:1})]),_:1})):(f(),A(U,{key:3},[h(" Error")],64))]),_:1})]),_:1})]),_:1},8,["modelValue","title","icon"]))}});export{Be as default};
