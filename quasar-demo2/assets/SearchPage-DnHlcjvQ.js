const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AppResult-C3oSsT45.js","assets/index-C1BRECWX.js","assets/index-BqtQn6ht.css","assets/BaseLoadmore-Cj47l8OB.js","assets/SkeletonItem-DNU5Kj4x.js","assets/SearchItem-B5nippab.js"])))=>i.map(i=>d[i]);
import{d as K,a as $,u as ee,r as c,T as ae,f as te,bE as le,a2 as oe,X as re,bs as se,bt as ne,Y as g,Z as S,_ as ie,B as n,C as i,E as t,L as ue,F as a,M as de,be as ce,$ as me,aa as fe,af as _e,S as W,I as C,aV as f,O as _,R,b8 as he,aq as I,ab as P,ac as s,ad as V,aJ as y,H as X,ai as Y,aW as ve,ah as be,bF as w}from"./index-C1BRECWX.js";import{u as pe}from"./useAppMeta-K1UR0RUG.js";import"./use-meta-J1hOGrFp.js";const qe=()=>({searchApi:async(o,h,e)=>(console.log(`searchApi :${o}, size: ${h}, q: ${e}`),new Promise(v=>{setTimeout(()=>{v([])},1500)}))}),ge=K({__name:"SearchPage",setup(B,{expose:o}){o();const h=g(()=>S(()=>import("./AppResult-C3oSsT45.js"),__vite__mapDeps([0,1,2]))),e=g(()=>S(()=>import("./BaseLoadmore-Cj47l8OB.js"),__vite__mapDeps([3,1,2]))),v=g(()=>S(()=>import("./SkeletonItem-DNU5Kj4x.js"),__vite__mapDeps([4,1,2]))),D=g(()=>S(()=>import("./SearchItem-B5nippab.js"),__vite__mapDeps([5,1,2]))),{searchApi:r}=qe(),{t:b}=$(),{getQuery:m,onReplaceUrl:N}=ee(),{setTitle:U}=pe(),T=c([]),x=c(!1),p=c(1),k=c(10),q=c(!1),E=c(!1),l=c({q:"",post:!0,hashTag:!0,profile:!0,theme:!0});ae(async()=>{await F(),U(`${l.value.q?l.value.q:"-"} | ${b("base.search")}`),Q()});const F=()=>new Promise(u=>{const d=m("q"),M=m("q_post"),z=m("q_profile"),j=m("q_hashtag"),J=m("q_theme");l.value.q=d,l.value.profile=!!(z&&z=="true"),l.value.hashTag=!!(j&&j=="true"),l.value.post=!!(M&&M=="true"),l.value.theme=!!(J&&J=="true"),u(!0)}),L=te(()=>l.value.q?`_q=${encodeURIComponent(l.value.q)}&q_profile=${l.value.profile?"true":"false"}&q_post=${l.value.post?"true":"false"}&q_hashtag=${l.value.hashTag?"true":"false"}&q_theme=${l.value.theme?"true":"false"}`:void 0),Z=async()=>{l.value.q&&l.value.q.length>=3&&Q()},Q=async()=>{x.value=!1,q.value=!1,p.value=1,T.value=[],O(),await A()},A=async()=>{if(!l.value||!l.value.q)return new Promise(d=>{d(!0)});if(!L.value)return new Promise(d=>{d(!0)});E.value=!0;const u=await r(p.value,k.value,L.value);return u&&(T.value.push(...u),u.length<k.value&&(x.value=!0)),q.value||(q.value=!0),E.value=!1,new Promise(d=>{d(!0)})},G=async()=>{p.value++,await A()},O=()=>{let u=`q=${l.value.q}&q_profile=${l.value.profile?"true":"false"}&q_post=${l.value.post?"true":"false"}&q_hashtag=${l.value.hashTag?"true":"false"}&q_theme=${l.value.theme?"true":"false"}`;N(`/search?${u}`)},H={AppResult:h,BaseLoadmore:e,SkeletonItem:v,SearchItemComp:D,searchApi:r,t:b,getQuery:m,onReplaceUrl:N,setTitle:U,items:T,isInfiniteDisabled:x,currentPage:p,currentPageSize:k,fristLoaded:q,loading:E,searchItem:l,initSearch:F,param:L,onSubmit:Z,onReloadSerach:Q,fetchSearching:A,loadNextPage:G,onReplaceSearchUrl:O,get biSearch(){return le},get biPeople(){return oe},get biPencil(){return re},get biHash(){return se},get biFileEarmarkText(){return ne}};return Object.defineProperty(H,"__isScriptSetup",{enumerable:!1,value:!0}),H}}),Se={class:"row"},Ie={class:"col-12 col-md-3 q-pt-md"},Pe={class:"col-12 col-md-9 q-pt-md q-pl-md"};function Ve(B,o,h,e,v,D){return n(),i(ue,{padding:""},{default:t(()=>[a(W,{flat:"",bordered:"",class:"content-limit"},{default:t(()=>[a(de,null,{default:t(()=>[a(ce,{onSubmit:e.onSubmit,class:"q-gutter-md"},{default:t(()=>[a(me,{"bottom-slots":"",modelValue:e.searchItem.q,"onUpdate:modelValue":o[0]||(o[0]=r=>e.searchItem.q=r),label:e.t("searchHelp"),clearable:"",outlined:""},{append:t(()=>[a(fe,{vertical:"",class:"q-mx-sm"}),a(_e,{color:"primary",rounded:"",flat:"",icon:e.biSearch,onClick:e.onSubmit},null,8,["icon"])]),_:1},8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),C("div",Se,[C("div",Ie,[a(W,{flat:"",bordered:""},{default:t(()=>[a(f,{header:""},{default:t(()=>[_(R(e.t("searchType")),1)]),_:1}),a(he,null,{default:t(()=>[I((n(),i(P,{tag:"label"},{default:t(()=>[a(s,{avatar:""},{default:t(()=>[a(V,{color:"primary","text-color":"white",icon:e.biPeople},null,8,["icon"])]),_:1}),a(s,null,{default:t(()=>[a(f,null,{default:t(()=>[_(R(e.t("base.profile")),1)]),_:1})]),_:1}),a(s,{side:"",top:""},{default:t(()=>[a(y,{modelValue:e.searchItem.profile,"onUpdate:modelValue":[o[1]||(o[1]=r=>e.searchItem.profile=r),e.onSubmit]},null,8,["modelValue"])]),_:1})]),_:1})),[[w]]),I((n(),i(P,{tag:"label"},{default:t(()=>[a(s,{avatar:""},{default:t(()=>[a(V,{color:"primary","text-color":"white",icon:e.biPencil},null,8,["icon"])]),_:1}),a(s,null,{default:t(()=>[a(f,null,{default:t(()=>o[5]||(o[5]=[_("Posts")])),_:1})]),_:1}),a(s,{side:"",top:""},{default:t(()=>[a(y,{modelValue:e.searchItem.post,"onUpdate:modelValue":[o[2]||(o[2]=r=>e.searchItem.post=r),e.onSubmit]},null,8,["modelValue"])]),_:1})]),_:1})),[[w]]),I((n(),i(P,{tag:"label"},{default:t(()=>[a(s,{avatar:""},{default:t(()=>[a(V,{color:"primary","text-color":"white",icon:e.biHash},null,8,["icon"])]),_:1}),a(s,null,{default:t(()=>[a(f,null,{default:t(()=>[_(R(e.t("base.hashtag")),1)]),_:1})]),_:1}),a(s,{side:"",top:""},{default:t(()=>[a(y,{modelValue:e.searchItem.hashTag,"onUpdate:modelValue":[o[3]||(o[3]=r=>e.searchItem.hashTag=r),e.onSubmit]},null,8,["modelValue"])]),_:1})]),_:1})),[[w]]),I((n(),i(P,{tag:"label"},{default:t(()=>[a(s,{avatar:""},{default:t(()=>[a(V,{color:"primary","text-color":"white",icon:e.biFileEarmarkText},null,8,["icon"])]),_:1}),a(s,null,{default:t(()=>[a(f,null,{default:t(()=>o[6]||(o[6]=[_("Comments")])),_:1})]),_:1}),a(s,{side:"",top:""},{default:t(()=>[a(y,{modelValue:e.searchItem.theme,"onUpdate:modelValue":[o[4]||(o[4]=r=>e.searchItem.theme=r),e.onSubmit]},null,8,["modelValue"])]),_:1})]),_:1})),[[w]])]),_:1})]),_:1})]),C("div",Pe,[e.fristLoaded?e.items.length>0?(n(),X(Y,{key:1},[(n(!0),X(Y,null,ve(e.items,(r,b)=>(n(),i(e.SearchItemComp,{key:b,item:r,q:e.searchItem.q},null,8,["item","q"]))),128)),e.isInfiniteDisabled?be("",!0):(n(),i(e.BaseLoadmore,{key:0,"frist-loaded":e.fristLoaded,"is-infinite-disabled":e.isInfiniteDisabled,label:e.t("base.loadMore"),onOnNextPage:e.loadNextPage,button:"","show-icon":"","full-width":""},null,8,["frist-loaded","is-infinite-disabled","label"]))],64)):(n(),i(e.AppResult,{key:2,status:"empty",description:e.t("error.dataNotfound")},null,8,["description"])):(n(),i(e.SkeletonItem,{key:0,items:3,show:""}))])])]),_:1})}const xe=ie(ge,[["render",Ve],["__file","SearchPage.vue"]]);export{xe as default};
