const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/NotificationItem-Bko-sAG6.js","assets/index-Cd3HZUlj.js","assets/index-HNifYG8Q.css","assets/ClosePopup-B614tKRB.js","assets/BaseAvatar-chh6F9eG.js","assets/AppImage-cUbFlt6P.js","assets/FileManagerService-CkeDqAkX.js","assets/useAxios-DnD0xNDn.js","assets/_commonjsHelpers-Cpj98o6Y.js","assets/AppImage-DWpen-BO.css","assets/BaseAvatar-CgUjO2Sl.css","assets/useAuth-DDQ19SYr.js","assets/AppDialog-BEB5Th91.js","assets/QBar-BOW1NthI.js","assets/NotificationItem-DlV33eYF.css","assets/SkeletonItem-C_Grrqrp.js","assets/AppResult-D0oG2dtb.js","assets/SearchForm-BX909nc9.js","assets/SearchForm-BB958prA.css"])))=>i.map(i=>d[i]);
import{d as O,bw as H,a as D,au as J,ce as G,l as z,cf as U,ek as W,el as X,cj as $,aH as ee,em as te,c7 as ae,en as oe,eo as ne,cb as le,ep as re,ci as ie,_ as E,B as l,C as r,E as a,F as t,ac as d,ah as b,aY as q,I as C,R as _,O as y,N as g,bq as R,bb as Q,aq as A,ab as S,aa as M,H as x,ai as T,aZ as V,ap as se,eq as de,r as B,er as ce,T as j,Y as P,Z as L,M as F,af as p,S as ue,u as fe,bF as K,dK as me,es as _e,et as he,eu as ge,ev as be,ew as ye,a7 as ve,ad as Se,a9 as pe,ag as I,cA as we,aN as ke,ex as Ae}from"./index-Cd3HZUlj.js";import{C as N}from"./ClosePopup-B614tKRB.js";import{B as Ne}from"./BaseAvatar-chh6F9eG.js";import{u as Ce}from"./useAuth-DDQ19SYr.js";import{a as Y,u as xe}from"./useAxios-DnD0xNDn.js";import Te from"./AppDialog-BEB5Th91.js";const Be=O({__name:"UserNavSetting",props:{hambergerMenu:{type:Boolean,default:!0},showLogo:{type:Boolean,default:!0},frontend:{type:Boolean,default:!0},showTogleDrawer:{type:Boolean,default:!1},reveal:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1}},setup(f,{expose:o}){o();const s=H(),{t:e}=D(),c=J(),m=G(),{signOut:u}=Ce(),n=z(()=>U.find(v=>v.iso==m.locale)),i={$q:s,t:e,authenStore:c,langugeAndThemeStore:m,signOut:u,currenLocale:n,BaseAvatar:Ne,get availableLocales(){return U},get availableThemes(){return W},get biBoxArrowRight(){return X},get biCheck2(){return $},get biChevronExpand(){return ee},get biChevronRight(){return te},get biGear(){return ae},get biMoon(){return oe},get biPersonSquare(){return ne},get biQuestionCircle(){return le},get biSun(){return re},get biTranslate(){return ie}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),qe={class:"cursor-pointer text-weight-bold"};function Ie(f,o,s,e,c,m){return l(),r(S,se(f.$attrs,{clickable:""}),{default:a(()=>[t(d,{avatar:"",top:""},{default:a(()=>[e.authenStore.loginedAvatar?(l(),r(e.BaseAvatar,{key:0,class:"shadow-5",src:e.authenStore.loginedAvatar,size:"36px"},null,8,["src"])):b("",!0)]),_:1}),e.$q.screen.gt.xs?(l(),r(d,{key:0},{default:a(()=>[t(q,{lines:"1"},{default:a(()=>[C("span",qe,_(e.authenStore.loginedDisplay),1)]),_:1}),t(q,{caption:"",lines:1},{default:a(()=>o[0]||(o[0]=[y(" Sofware Engineer ")])),_:1})]),_:1})):b("",!0),t(d,{side:""},{default:a(()=>[t(g,{name:e.biChevronExpand,size:"16px"},null,8,["name"])]),_:1}),t(R,null,{default:a(()=>[t(Q,{style:{"min-width":"260px"}},{default:a(()=>{var u;return[A((l(),r(S,{clickable:"",to:`/user/${(u=e.authenStore.auth)==null?void 0:u.id}`},{default:a(()=>[t(d,{avatar:""},{default:a(()=>[e.authenStore.loginedAvatar?(l(),r(e.BaseAvatar,{key:0,src:e.authenStore.loginedAvatar,size:"36px",rounded:""},null,8,["src"])):(l(),r(g,{key:1,name:e.biPersonSquare},null,8,["name"]))]),_:1}),t(d,null,{default:a(()=>[y(_(e.t("base.yourProfile")),1)]),_:1})]),_:1},8,["to"])),[[N]]),t(M),t(S,{clickable:""},{default:a(()=>[t(d,{avatar:""},{default:a(()=>[t(g,{name:e.langugeAndThemeStore.theme=="dark"?e.biMoon:e.biSun},null,8,["name"])]),_:1}),t(d,null,{default:a(()=>[t(q,{lines:"1"},{default:a(()=>[y(_(e.t("base.appearance"))+" : "+_(e.t(`theme.${e.langugeAndThemeStore.theme}`)),1)]),_:1})]),_:1}),t(d,{side:""},{default:a(()=>[t(g,{name:e.biChevronRight},null,8,["name"])]),_:1}),t(R,{anchor:e.$q.screen.gt.xs?"top end":"bottom left",self:"top start"},{default:a(()=>[t(Q,{style:{"min-width":"150px"}},{default:a(()=>[(l(!0),x(T,null,V(e.availableThemes,n=>(l(),r(S,{clickable:"",key:n.key,onClick:i=>e.langugeAndThemeStore.setThemeSetting(n.key)},{default:a(()=>[t(d,{avatar:""},{default:a(()=>[t(g,{name:n.icon},null,8,["name"])]),_:2},1024),t(d,null,{default:a(()=>[y(_(e.t(n.text)),1)]),_:2},1024),n.key==e.langugeAndThemeStore.themeSetting?(l(),r(d,{key:0,side:""},{default:a(()=>[t(g,{name:e.biCheck2},null,8,["name"])]),_:1})):b("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["anchor"])]),_:1}),t(S,{clickable:""},{default:a(()=>[t(d,{avatar:""},{default:a(()=>[t(g,{name:e.biTranslate},null,8,["name"])]),_:1}),t(d,null,{default:a(()=>[t(q,{lines:"1"},{default:a(()=>[y(_(e.t("base.language"))+" : "+_(e.currenLocale?e.currenLocale.name:""),1)]),_:1})]),_:1}),t(d,{side:""},{default:a(()=>[t(g,{name:e.biChevronRight},null,8,["name"])]),_:1}),t(R,{anchor:e.$q.screen.gt.xs?"top end":"bottom left",self:"top start"},{default:a(()=>[t(Q,{style:{"min-width":"150px"}},{default:a(()=>[(l(!0),x(T,null,V(e.availableLocales,n=>(l(),r(S,{clickable:"",key:n.iso,onClick:i=>e.langugeAndThemeStore.setLocale(n.iso)},{default:a(()=>[t(d,null,{default:a(()=>[y(_(n.name),1)]),_:2},1024),n.iso==e.langugeAndThemeStore.locale?(l(),r(d,{key:0,side:""},{default:a(()=>[t(g,{name:e.biCheck2},null,8,["name"])]),_:1})):b("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["anchor"])]),_:1}),t(M),A((l(),r(S,{clickable:""},{default:a(()=>[t(d,{avatar:""},{default:a(()=>[t(g,{name:e.biQuestionCircle},null,8,["name"])]),_:1}),t(d,null,{default:a(()=>[y(_(e.t("base.help")),1)]),_:1})]),_:1})),[[N]]),A((l(),r(S,{clickable:"",to:"/settings"},{default:a(()=>[t(d,{avatar:""},{default:a(()=>[t(g,{name:e.biGear},null,8,["name"])]),_:1}),t(d,null,{default:a(()=>[y(_(e.t("base.setting")),1)]),_:1})]),_:1})),[[N]]),A((l(),r(S,{clickable:"",onClick:e.signOut},{default:a(()=>[t(d,{avatar:""},{default:a(()=>[t(g,{name:e.biBoxArrowRight},null,8,["name"])]),_:1}),t(d,null,{default:a(()=>[y(_(e.t("base.logout")),1)]),_:1})]),_:1},8,["onClick"])),[[N]])]}),_:1})]),_:1})]),_:1},16)}const Re=E(Be,[["render",Ie],["__file","UserNavSetting.vue"]]),Pe=de("notificationStore",()=>{const{cacheNotifyCount:f}=Y(),o=B({lastestId:0,totalNotify:0});return{notify:o,setNotify:c=>{o.value.totalNotify=c.totalNotify,o.value.lastestId=c.lastestId},setLastNotify:c=>{f.value.lastestId=c}}}),Z=()=>{const{callAxios:f}=xe();return{updateFcmSetting:async n=>{await f({API:"/api/userNotify/updateFcmSetting",method:"PUT",body:n})},refreshFcmToken:async n=>{await f({API:"/api/userNotify/refreshFcmToken",method:"PUT",body:n})},findAllByUser:async(n,i)=>new Promise(v=>{setTimeout(()=>{v([])},1500)}),findCountAllNotRead:async n=>await f({API:`/api/userNotify/findCountAllNotRead?lastestNotifyId=${n}`,method:"GET"}),updateReadNotify:async n=>await f({API:`/api/userNotify/updateReadNotify/${n}`,method:"PUT"}),updateReadNotifyAll:async()=>await f({API:"/api/userNotify/updateReadNotifyAll",method:"PUT"})}},Le=()=>{const{findCountAllNotRead:f}=Z(),{cacheNotifyCount:o}=Y(),s=Pe(),{notify:e}=ce(s),{setNotify:c}=s;return j(()=>{e.value.totalNotify=999}),{notify:e,setNotify:c,resetBadgeCount:()=>{e.value.totalNotify=0},notificationLink:(i,v)=>{if(i&&v){if(i=="LIKE_POST"||i=="SHARE"||i=="COMMENT_POST")return`/post/view/${v}`;if(i=="LIKE_COMMENT")return`/comment/view/${v}`;if(i=="COMMENT_REPLY")return`/comment/view/${v}?isReply=1`}},fetchNotReadNotify:async()=>{const i=await f(o.value&&o.value.lastestId?o.value.lastestId:0);i&&i.lastestId&&i.totalNotify&&c(i)}}},Oe=O({__name:"NotificationBarMenu",setup(f,{expose:o}){o();const s=P(()=>L(()=>import("./NotificationItem-Bko-sAG6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),e=P(()=>L(()=>import("./SkeletonItem-C_Grrqrp.js"),__vite__mapDeps([15,1,2]))),c=P(()=>L(()=>import("./AppResult-D0oG2dtb.js"),__vite__mapDeps([16,1,2]))),{findAllByUser:m}=Z(),{t:u}=D(),n=B(!1),i=B([]);j(async()=>{n.value=!0,await v(),n.value=!1});const v=async()=>{const h=await m(1,10);return h&&h.length>0&&i.value.push(...h),new Promise(w=>{w(!0)})},k={NotificationItem:s,SkeletonItem:e,AppResult:c,findAllByUser:m,t:u,loading:n,items:i,fetchDataData:v};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),De={class:"text-h6"};function Ee(f,o,s,e,c,m){return l(),r(ue,{flat:""},{default:a(()=>[t(F,null,{default:a(()=>[C("div",De,_(e.t("base.notification")),1)]),_:1}),e.loading?(l(),r(e.SkeletonItem,{key:0,items:5,show:""})):e.items.length>0?(l(),x(T,{key:1},[(l(!0),x(T,null,V(e.items,(u,n)=>(l(),r(e.NotificationItem,{key:`notification-${u.id}`,item:u,index:n},null,8,["item","index"]))),128)),t(F,null,{default:a(()=>[A(t(p,{unelevated:"",rounded:"",color:"primary",class:"full-width",label:e.t("base.readAllNotifications"),to:"/notifications"},null,8,["label"]),[[N]])]),_:1})],64)):(l(),r(e.AppResult,{key:2,status:"empty",description:e.t("error.dataNotfound")},null,8,["description"]))]),_:1})}const Qe=E(Oe,[["render",Ee],["__file","NotificationBarMenu.vue"]]),Me=O({__name:"SearchDialog",props:{modelValue:{type:Boolean,require:!0}},emits:["on-close","update:modelValue","on-submit"],setup(f,{expose:o,emit:s}){o();const e=P(()=>L(()=>import("./SearchForm-BX909nc9.js"),__vite__mapDeps([17,1,2,7,18]))),c=f,{appGoto:m}=fe(),{t:u}=D(),n=s,i=z({get:()=>c.modelValue,set:h=>n("update:modelValue",h)}),k={SearchForm:e,props:c,appGoto:m,t:u,emit:n,show:i,onSubmit:h=>{i.value=!1;let w=`q=${h.q}&q_profile=${h.profile?"true":"false"}&q_post=${h.post?"true":"false"}&q_hashtag=${h.hashTag?"true":"false"}&q_theme=${h.theme?"true":"false"}`;m(`/search?${w}`)},AppDialog:Te,get biSearch(){return K}};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}});function Ve(f,o,s,e,c,m){return l(),r(e.AppDialog,{icon:e.biSearch,"model-value":e.show,"full-width":!1,title:e.t("base.search"),onOnClose:o[0]||(o[0]=u=>e.show=!1),onOnHide:o[1]||(o[1]=u=>e.show=!1),persistent:!1,"transition-show":"fade","transition-hide":"fade","dialog-style":"width: 550px; max-width: 90vw"},{default:a(()=>[t(M),t(e.SearchForm,{onOnSubmit:e.onSubmit})]),_:1},8,["icon","model-value","title"])}const Ue=E(Me,[["render",Ve],["__scopeId","data-v-a2865a10"],["__file","SearchDialog.vue"]]),Fe=O({__name:"AppHeader",props:{bordered:{type:Boolean,default:!1},reveal:{type:Boolean,default:!1},showTogleDrawer:{type:Boolean,default:!1},frontend:{type:Boolean},showLogo:{type:Boolean,default:!0},hambergerMenu:{type:Boolean},hambergerIcon:{default:()=>me},hambergerIconOff:{},showUserSetting:{type:Boolean,default:!0}},setup(f,{expose:o}){o();const s=H(),e=B(!1),{notify:c,resetBadgeCount:m}=Le(),{t:u}=D(),n=G(),i=B(!1),h={$q:s,showGotTopBtn:e,notify:c,resetBadgeCount:m,t:u,langugeAndThemeStore:n,showSearch:i,onOpenSearch:()=>{i.value=!0},onScroll:w=>{w&&w.position&&w.position.top>100?e.value=!0:e.value=!1},UserNavSetting:Re,get biAppIndicator(){return _e},get biBell(){return he},get biCameraVideo(){return ge},get biChatDots(){return be},get biSearch(){return K},NotificationBarMenu:Qe,SearchDialog:Ue};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),He=["src"],Ge={class:"q-mr-sm text-muted"},ze={class:"q-gutter-md row items-center no-wrap"};function je(f,o,s,e,c,m){return l(),x(T,null,[t(Ae,{reveal:s.reveal,"height-hint":"58",bordered:s.bordered,elevated:e.showGotTopBtn,class:ke({"wee-second-bg-color-theme-dark text-white":e.$q.dark.isActive,"bg-white text-black":!e.$q.dark.isActive})},{default:a(()=>[t(ye,{onScroll:e.onScroll}),t(ve,{class:"q-py-xs"},{default:a(()=>[s.showTogleDrawer?(l(),r(p,{key:0,dense:"",flat:"",round:"",icon:s.hambergerIcon,onClick:o[0]||(o[0]=u=>e.langugeAndThemeStore.setLeftDrawer(!e.langugeAndThemeStore.leftDrawerOpen))},null,8,["icon"])):b("",!0),s.showLogo?(l(),r(p,{key:1,flat:"","no-caps":"","no-wrap":"",class:"q-mr-xs",ripple:!1,to:"/"},{default:a(()=>[t(Se,{style:{height:"auto",width:"42px"},square:""},{default:a(()=>[C("img",{src:e.$q.dark.isActive?"/quasar-starter-template/logo/logo-white.png":"/quasar-starter-template/logo/logo-black.png"},null,8,He)]),_:1})]),_:1})):b("",!0),e.$q.screen.gt.xs?(l(),r(p,{key:2,flat:"",onClick:e.onOpenSearch,class:"text-capitalize"},{default:a(()=>[C("span",Ge,_(e.t("base.search")+" Vue Quasar"),1),t(g,{name:e.biSearch},null,8,["name"])]),_:1})):b("",!0),t(pe),C("div",ze,[e.$q.screen.gt.sm?(l(),r(p,{key:0,round:"",dense:"",flat:"",icon:e.biCameraVideo},{default:a(()=>[t(I,null,{default:a(()=>o[3]||(o[3]=[y("Create a video or post")])),_:1})]),_:1},8,["icon"])):b("",!0),e.$q.screen.gt.sm?(l(),r(p,{key:1,round:"",dense:"",flat:"",icon:e.biAppIndicator},{default:a(()=>[t(I,null,{default:a(()=>o[4]||(o[4]=[y("Apps")])),_:1})]),_:1},8,["icon"])):b("",!0),e.$q.screen.gt.sm?(l(),r(p,{key:2,round:"",dense:"",flat:"",icon:e.biChatDots,to:"/chats"},{default:a(()=>[t(I,null,{default:a(()=>o[5]||(o[5]=[y("Messages")])),_:1})]),_:1},8,["icon"])):b("",!0),e.$q.screen.gt.xs?b("",!0):(l(),r(p,{key:3,round:"",dense:"",flat:"",onClick:e.onOpenSearch},{default:a(()=>[t(g,{name:e.biSearch},null,8,["name"])]),_:1})),t(p,{round:"",dense:"",flat:"",onClick:e.resetBadgeCount,icon:e.biBell},{default:a(()=>[e.notify&&e.notify.totalNotify?(l(),r(we,{key:0,color:"negative",rounded:"","text-color":"white",floating:""},{default:a(()=>[y(_(e.notify.totalNotify>99?"99+":e.notify.totalNotify),1)]),_:1})):b("",!0),t(I,null,{default:a(()=>[y(_(e.t("nav.notifications")),1)]),_:1}),t(R,{anchor:"bottom left",self:"top left",style:{width:"360px"}},{default:a(()=>[t(e.NotificationBarMenu)]),_:1})]),_:1},8,["onClick","icon"]),s.showUserSetting?(l(),r(e.UserNavSetting,{key:4,style:{"max-width":"225px"}})):b("",!0)])]),_:1})]),_:1},8,["reveal","bordered","elevated","class"]),e.showSearch?(l(),r(e.SearchDialog,{key:0,"model-value":e.showSearch,"onUpdate:modelValue":o[1]||(o[1]=u=>e.showSearch=u),onOnClose:o[2]||(o[2]=u=>e.showSearch=!1)},null,8,["model-value"])):b("",!0)],64)}const $e=E(Fe,[["render",je],["__file","AppHeader.vue"]]);export{$e as A,Z as U,Re as a,Le as u};
