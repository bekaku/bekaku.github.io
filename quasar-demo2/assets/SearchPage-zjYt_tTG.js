const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AppResult-Dya3OwwP.js","assets/index-DnUFBeQi.js","assets/index-HNifYG8Q.css","assets/BaseLoadmore-BmF_jp7u.js","assets/SkeletonItem-D_oKOfQP.js","assets/SearchItem-C-Kh9vnv.js"])))=>i.map(i=>d[i]);
import{d as W,a as $,u as ee,r as c,T as ae,l as te,bF as le,a2 as oe,X as re,bv as se,bq as ne,Y as g,Z as S,_ as ie,B as n,C as i,E as t,L as ue,F as a,M as de,bh as ce,$ as me,aa as fe,af as _e,S as G,I as E,aN as f,O as _,R,bb as he,aq as I,ab as P,ac as s,ad as V,aZ as y,H as X,ai as Y,aO as ve,ah as be,bG as w}from"./index-DnUFBeQi.js";import{u as pe}from"./useAppMeta-D-4poQQP.js";import"./use-meta-dX1U_zrL.js";const qe=()=>({searchApi:async(o,h,e)=>(console.log(`searchApi :${o}, size: ${h}, q: ${e}`),new Promise(v=>{setTimeout(()=>{v([])},1500)}))}),ge=W({__name:"SearchPage",setup(B,{expose:o}){o();const h=g(()=>S(()=>import("./AppResult-Dya3OwwP.js"),__vite__mapDeps([0,1,2]))),e=g(()=>S(()=>import("./BaseLoadmore-BmF_jp7u.js"),__vite__mapDeps([3,1,2]))),v=g(()=>S(()=>import("./SkeletonItem-D_oKOfQP.js"),__vite__mapDeps([4,1,2]))),D=g(()=>S(()=>import("./SearchItem-C-Kh9vnv.js"),__vite__mapDeps([5,1,2]))),{searchApi:r}=qe(),{t:b}=$(),{getQuery:m,onReplaceUrl:N}=ee(),{setTitle:O}=pe(),T=c([]),x=c(!1),p=c(1),k=c(10),q=c(!1),L=c(!1),l=c({q:"",post:!0,hashTag:!0,profile:!0,theme:!0});ae(async()=>{await U(),O(`${l.value.q?l.value.q:"-"} | ${b("base.search")}`),A()});const U=()=>new Promise(u=>{const d=m("q"),M=m("q_post"),z=m("q_profile"),Z=m("q_hashtag"),j=m("q_theme");l.value.q=d,l.value.profile=!!(z&&z=="true"),l.value.hashTag=!!(Z&&Z=="true"),l.value.post=!!(M&&M=="true"),l.value.theme=!!(j&&j=="true"),u(!0)}),Q=te(()=>l.value.q?`_q=${encodeURIComponent(l.value.q)}&q_profile=${l.value.profile?"true":"false"}&q_post=${l.value.post?"true":"false"}&q_hashtag=${l.value.hashTag?"true":"false"}&q_theme=${l.value.theme?"true":"false"}`:void 0),J=async()=>{l.value.q&&l.value.q.length>=3&&A()},A=async()=>{x.value=!1,q.value=!1,p.value=1,T.value=[],F(),await C()},C=async()=>{if(!l.value||!l.value.q)return new Promise(d=>{d(!0)});if(!Q.value)return new Promise(d=>{d(!0)});L.value=!0;const u=await r(p.value,k.value,Q.value);return u&&(T.value.push(...u),u.length<k.value&&(x.value=!0)),q.value||(q.value=!0),L.value=!1,new Promise(d=>{d(!0)})},K=async()=>{p.value++,await C()},F=()=>{let u=`q=${l.value.q}&q_profile=${l.value.profile?"true":"false"}&q_post=${l.value.post?"true":"false"}&q_hashtag=${l.value.hashTag?"true":"false"}&q_theme=${l.value.theme?"true":"false"}`;N(`/search?${u}`)},H={AppResult:h,BaseLoadmore:e,SkeletonItem:v,SearchItemComp:D,searchApi:r,t:b,getQuery:m,onReplaceUrl:N,setTitle:O,items:T,isInfiniteDisabled:x,currentPage:p,currentPageSize:k,fristLoaded:q,loading:L,searchItem:l,initSearch:U,param:Q,onSubmit:J,onReloadSerach:A,fetchSearching:C,loadNextPage:K,onReplaceSearchUrl:F,get biSearch(){return le},get biPeople(){return oe},get biPencil(){return re},get biHash(){return se},get biFileEarmarkText(){return ne}};return Object.defineProperty(H,"__isScriptSetup",{enumerable:!1,value:!0}),H}}),Se={class:"row"},Ie={class:"col-12 col-md-3 q-pt-md"},Pe={class:"col-12 col-md-9 q-pt-md q-pl-md"};function Ve(B,o,h,e,v,D){return n(),i(ue,{padding:""},{default:t(()=>[a(G,{flat:"",bordered:"",class:"content-limit"},{default:t(()=>[a(de,null,{default:t(()=>[a(ce,{onSubmit:e.onSubmit,class:"q-gutter-md"},{default:t(()=>[a(me,{"bottom-slots":"",modelValue:e.searchItem.q,"onUpdate:modelValue":o[0]||(o[0]=r=>e.searchItem.q=r),label:e.t("searchHelp"),clearable:"",outlined:""},{append:t(()=>[a(fe,{vertical:"",class:"q-mx-sm"}),a(_e,{color:"primary",rounded:"",flat:"",icon:e.biSearch,onClick:e.onSubmit},null,8,["icon"])]),_:1},8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),E("div",Se,[E("div",Ie,[a(G,{flat:"",bordered:""},{default:t(()=>[a(f,{header:""},{default:t(()=>[_(R(e.t("searchType")),1)]),_:1}),a(he,null,{default:t(()=>[I((n(),i(P,{tag:"label"},{default:t(()=>[a(s,{avatar:""},{default:t(()=>[a(V,{color:"primary","text-color":"white",icon:e.biPeople},null,8,["icon"])]),_:1}),a(s,null,{default:t(()=>[a(f,null,{default:t(()=>[_(R(e.t("base.profile")),1)]),_:1})]),_:1}),a(s,{side:"",top:""},{default:t(()=>[a(y,{modelValue:e.searchItem.profile,"onUpdate:modelValue":[o[1]||(o[1]=r=>e.searchItem.profile=r),e.onSubmit]},null,8,["modelValue"])]),_:1})]),_:1})),[[w]]),I((n(),i(P,{tag:"label"},{default:t(()=>[a(s,{avatar:""},{default:t(()=>[a(V,{color:"primary","text-color":"white",icon:e.biPencil},null,8,["icon"])]),_:1}),a(s,null,{default:t(()=>[a(f,null,{default:t(()=>o[5]||(o[5]=[_("Posts")])),_:1})]),_:1}),a(s,{side:"",top:""},{default:t(()=>[a(y,{modelValue:e.searchItem.post,"onUpdate:modelValue":[o[2]||(o[2]=r=>e.searchItem.post=r),e.onSubmit]},null,8,["modelValue"])]),_:1})]),_:1})),[[w]]),I((n(),i(P,{tag:"label"},{default:t(()=>[a(s,{avatar:""},{default:t(()=>[a(V,{color:"primary","text-color":"white",icon:e.biHash},null,8,["icon"])]),_:1}),a(s,null,{default:t(()=>[a(f,null,{default:t(()=>[_(R(e.t("base.hashtag")),1)]),_:1})]),_:1}),a(s,{side:"",top:""},{default:t(()=>[a(y,{modelValue:e.searchItem.hashTag,"onUpdate:modelValue":[o[3]||(o[3]=r=>e.searchItem.hashTag=r),e.onSubmit]},null,8,["modelValue"])]),_:1})]),_:1})),[[w]]),I((n(),i(P,{tag:"label"},{default:t(()=>[a(s,{avatar:""},{default:t(()=>[a(V,{color:"primary","text-color":"white",icon:e.biFileEarmarkText},null,8,["icon"])]),_:1}),a(s,null,{default:t(()=>[a(f,null,{default:t(()=>o[6]||(o[6]=[_("Comments")])),_:1})]),_:1}),a(s,{side:"",top:""},{default:t(()=>[a(y,{modelValue:e.searchItem.theme,"onUpdate:modelValue":[o[4]||(o[4]=r=>e.searchItem.theme=r),e.onSubmit]},null,8,["modelValue"])]),_:1})]),_:1})),[[w]])]),_:1})]),_:1})]),E("div",Pe,[e.fristLoaded?e.items.length>0?(n(),X(Y,{key:1},[(n(!0),X(Y,null,ve(e.items,(r,b)=>(n(),i(e.SearchItemComp,{key:b,item:r,q:e.searchItem.q},null,8,["item","q"]))),128)),e.isInfiniteDisabled?be("",!0):(n(),i(e.BaseLoadmore,{key:0,"frist-loaded":e.fristLoaded,"is-infinite-disabled":e.isInfiniteDisabled,label:e.t("base.loadMore"),onOnNextPage:e.loadNextPage,button:"","show-icon":"","full-width":""},null,8,["frist-loaded","is-infinite-disabled","label"]))],64)):(n(),i(e.AppResult,{key:2,status:"empty",description:e.t("error.dataNotfound")},null,8,["description"])):(n(),i(e.SkeletonItem,{key:0,items:3,show:""}))])])]),_:1})}const xe=ie(ge,[["render",Ve],["__file","SearchPage.vue"]]);export{xe as default};
