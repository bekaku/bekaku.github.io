import{d as I,aC as N,aD as C,r as d,_ as M,A as z,B as r,C as s,E as l,I as A,dp as U,ah as h,F as o,cw as X,S as Q,H as f,ai as _,aX as B,aL as P,aV as L,ab as Z,ac as q,aW as R,a as W,T as G,bh as J,cs as K,dq as Y,dr as $,aI as ee,b_ as ae,b$ as te,af as w,ag as F,O as k,R as x,aa as j,a9 as oe,M as le,am as ne}from"./index-jqmU7M3e.js";import re from"./AppDialog-CTXe4I8v.js";import{F as ie,l as se,m as de,h as fe,i as ce}from"./FileManagerService-L0QQYSOg.js";import{$ as ue}from"./index-BS5YFOKs.js";import"./QBar-DtmPYQcZ.js";import"./useAxios-Ce_LYO3O.js";import"./_commonjsHelpers-Cpj98o6Y.js";const ge=I({__name:"PdfViewBase",props:N({src:{},fitParent:{type:Boolean,default:!1},textLayer:{type:Boolean,default:!1},width:{},height:{},watermarkText:{},hideForms:{type:Boolean,default:!1}},{scale:{type:Number,default:1},scaleModifiers:{},page:{type:Number,default:1},pageModifiers:{},pagess:{type:Number,default:1},pagessModifiers:{},loading:{type:Boolean,default:!0},loadingModifiers:{}}),emits:N(["onPageChange"],["update:scale","update:page","update:pagess","update:loading"]),setup(i,{expose:t,emit:a}){t();const e=i,u=C(i,"scale"),g=C(i,"page"),n=C(i,"pagess"),m=C(i,"loading"),b=d(!1),{pdf:p,pages:y}=ue(e.src),v={props:e,scale:u,page:g,pagess:n,loading:m,firstLoaded:b,pdf:p,pages:y,emit:a,onLoaded:()=>{b.value=!0,n.value=y.value}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),me={class:"row justify-center"};function ye(i,t,a,e,u,g){const n=z("pdf-vue");return r(),s(Q,{flat:""},{default:l(()=>[A("div",me,[e.firstLoaded?h("",!0):(r(),s(U,{key:0,query:"",color:"primary",class:"q-mt-sm"})),o(X,null,{default:l(()=>[o(n,{pdf:e.pdf,scale:e.scale,page:e.page,onLoaded:e.onLoaded,"fit-parent":a.fitParent,width:a.width,height:a.height,"text-layer":a.textLayer,"watermark-text":a.watermarkText,"hide-forms":a.hideForms},null,8,["pdf","scale","page","fit-parent","width","height","text-layer","watermark-text","hide-forms"])]),_:1})])]),_:1})}const we=M(ge,[["render",ye],["__file","PdfViewBase.vue"]]),_e=I({__name:"SkeletonCard",props:{vertical:{type:Boolean,default:!1},flat:{type:Boolean,default:!0},height:{type:Number,default:100},no:{type:Number,default:1},textNumber:{type:Number,default:0},col:{type:String,default:"col-12 col-md-12 q-pa-xs"},rowCss:{type:String,default:void 0}},setup(i,{expose:t}){t();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}});function he(i,t,a,e,u,g){return a.vertical?(r(!0),f(_,{key:1},B(a.no,n=>(r(),f("div",{class:P(["row",a.rowCss]),key:n},[A("div",{class:P(a.col)},[o(Q,{flat:a.flat},{default:l(()=>[o(L,{height:`${a.height}px`},null,8,["height"]),a.textNumber>0?(r(),s(Z,{key:0},{default:l(()=>[o(q,null,{default:l(()=>[(r(!0),f(_,null,B(a.textNumber,m=>(r(),s(R,{key:m},{default:l(()=>[o(L,{type:"text",animation:"fade"})]),_:2},1024))),128))]),_:1})]),_:1})):h("",!0)]),_:1},8,["flat"])],2)],2))),128)):(r(),f("div",{key:0,class:P(["row",a.rowCss])},[(r(!0),f(_,null,B(a.no,n=>(r(),f("div",{key:n,class:P(a.col)},[o(Q,{flat:a.flat},{default:l(()=>[o(L,{height:`${a.height}px`},null,8,["height"]),a.textNumber>0?(r(),s(Z,{key:0},{default:l(()=>[o(q,null,{default:l(()=>[(r(!0),f(_,null,B(a.textNumber,m=>(r(),s(R,{key:m},{default:l(()=>[o(L,{type:"text",animation:"fade"})]),_:2},1024))),128))]),_:1})]),_:1})):h("",!0)]),_:1},8,["flat"])],2))),128))],2))}const be=M(_e,[["render",he],["__file","SkeletonCard.vue"]]),pe=I({__name:"PdfView",props:N({title:{},src:{},fetchToServer:{type:Boolean,default:!1},showDownload:{type:Boolean,default:!0},isBlob:{type:Boolean,default:!1}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:N(["on-close"],["update:show"]),setup(i,{expose:t,emit:a}){t();const e=i,{fethCdnData:u,downloadCdnData:g}=ie(),n=a,{t:m}=W(),b=C(i,"show"),p=d(),y=d(!0),S=d(!1),V=d(),v=d(),E=d(1),H=d(1),O=d(0);G(async()=>{T()});const T=async()=>{if(y.value=!0,e.fetchToServer){const c=await u(e.src,"axiosresponse");c&&(p.value=await se(c),v.value=c.headers["content-type"],V.value=de(c),y.value=!1)}else p.value=e.src,y.value=!1},D={props:e,fethCdnData:u,downloadCdnData:g,emit:n,t:m,show:b,pdfSrc:p,loading:y,downloadLoading:S,fileName:V,contentType:v,scale:E,page:H,pages:O,onLoad:T,downloadPdf:async()=>{if(S.value=!0,e.fetchToServer)await g(e.src,e.title);else if(e.isBlob)try{fe(e.src,e.title||"pdf_file.pdf")}catch(c){console.error(c)}else ce(e.src,e.title||"pdf_file.pdf");S.value=!1},onPageChange:c=>{O.value=c},onClose:()=>{n("on-close"),b.value=!1},AppDialog:re,get biArrowLeft(){return J},get biArrowRight(){return K},get biFilePdf(){return Y},get biFloppy(){return $},get biX(){return ee},get biZoomIn(){return ae},get biZoomOut(){return te},PdfViewBase:we,SkeletonItem:be};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}});function ve(i,t,a,e,u,g){return r(),s(e.AppDialog,{"model-value":e.show,title:a.title?a.title:"Pdf view",onOnClose:e.onClose,onOnHide:e.onClose,persistent:!0,"transition-show":"fade","transition-hide":"fade",icon:e.biFilePdf,"full-width":"","full-height":""},{toolbarAction:l(()=>[o(w,{flat:"",round:"",icon:e.biZoomOut,onClick:t[0]||(t[0]=n=>e.scale=e.scale>.25?e.scale-.25:e.scale)},{default:l(()=>[o(F,null,{default:l(()=>t[7]||(t[7]=[k(" Zoom-")])),_:1})]),_:1},8,["icon"]),A("span",null,x(e.scale*100+"%"),1),o(w,{flat:"",round:"",icon:e.biZoomIn,onClick:t[1]||(t[1]=n=>e.scale=e.scale<2?e.scale+.25:e.scale)},{default:l(()=>[o(F,null,{default:l(()=>t[8]||(t[8]=[k(" Zoom+")])),_:1})]),_:1},8,["icon"]),o(j,{vertical:""}),o(w,{onClick:t[2]||(t[2]=n=>e.page=e.page>1?e.page-1:e.page),flat:"",round:"",icon:e.biArrowLeft},null,8,["icon"]),A("span",null,x(e.page)+" / "+x(e.pages),1),o(w,{onClick:t[3]||(t[3]=n=>e.page=e.page<e.pages?e.page+1:e.page),flat:"",round:"",icon:e.biArrowRight},null,8,["icon"]),o(oe),a.showDownload&&!e.loading?(r(),s(w,{key:0,onClick:e.downloadPdf,flat:"",round:"",icon:e.biFloppy},{default:l(()=>[o(F,null,{default:l(()=>[k(x(e.t("base.download")),1)]),_:1})]),_:1},8,["icon"])):h("",!0),o(w,{round:"",onClick:e.onClose,flat:"",icon:e.biX},{default:l(()=>[o(F,null,{default:l(()=>[k(x(e.t("base.close")),1)]),_:1})]),_:1},8,["icon"])]),default:l(()=>[o(j),o(Q,{style:{"min-height":"500px","min-width":"100%"}},{default:l(()=>[o(le,null,{default:l(()=>[e.downloadLoading?(r(),s(U,{key:0,query:"",color:"primary",class:"q-my-sm"})):h("",!0),e.loading?(r(),f(_,{key:1},[e.loading?(r(),s(e.SkeletonItem,{key:0,height:100,"text-number":3,flat:"",show:""})):h("",!0)],64)):e.pdfSrc?(r(),s(ne,{key:2,style:{height:"80vh"}},{default:l(()=>[o(X,null,{default:l(()=>[o(e.PdfViewBase,{src:e.pdfSrc,scale:e.scale,"onUpdate:scale":t[4]||(t[4]=n=>e.scale=n),page:e.page,"onUpdate:page":t[5]||(t[5]=n=>e.page=n),pagess:e.pages,"onUpdate:pagess":t[6]||(t[6]=n=>e.pages=n)},null,8,["src","scale","page","pagess"])]),_:1})]),_:1})):(r(),f(_,{key:3},[k(" Error")],64))]),_:1})]),_:1})]),_:1},8,["model-value","title","icon"])}const Qe=M(pe,[["render",ve],["__file","PdfView.vue"]]);export{Qe as default};
