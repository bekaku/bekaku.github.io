import{_ as F,B as z,H as W,I as G,ak as K,al as E,A as J,ai as Q,aX as _,aL as k,dD as $,F as tt,E as et,ah as ot,b as it}from"./index-gOe3LaSD.js";if(typeof D>"u")var D=window;var nt=Object.create,O=Object.defineProperty,st=Object.getPrototypeOf,rt=Object.prototype.hasOwnProperty,lt=Object.getOwnPropertyNames,at=Object.getOwnPropertyDescriptor,ht=t=>O(t,"__esModule",{value:!0}),T=(t,e)=>()=>(e||(e={exports:{}},t(e.exports,e)),e.exports),ut=(t,e,o)=>{if(ht(t),e&&typeof e=="object"||typeof e=="function")for(let s of lt(e))!rt.call(t,s)&&s!=="default"&&O(t,s,{get:()=>e[s],enumerable:!(o=at(e,s))||o.enumerable});return t},ct=t=>t&&t.__esModule?t:ut(O(t!=null?nt(st(t)):{},"default",{value:t,enumerable:!0}),t),H=T((t,e)=>{function o(s){var l=typeof s;return s!=null&&(l=="object"||l=="function")}e.exports=o}),ft=T((t,e)=>{var o=typeof D=="object"&&D&&D.Object===Object&&D;e.exports=o}),U=T((t,e)=>{var o=ft(),s=typeof self=="object"&&self&&self.Object===Object&&self,l=o||s||Function("return this")();e.exports=l}),dt=T((t,e)=>{var o=U(),s=function(){return o.Date.now()};e.exports=s}),B=T((t,e)=>{var o=U(),s=o.Symbol;e.exports=s}),mt=T((t,e)=>{var o=B(),s=Object.prototype,l=s.hasOwnProperty,i=s.toString,r=o?o.toStringTag:void 0;function h(u){var c=l.call(u,r),d=u[r];try{u[r]=void 0;var a=!0}catch{}var m=i.call(u);return a&&(c?u[r]=d:delete u[r]),m}e.exports=h}),pt=T((t,e)=>{var o=Object.prototype,s=o.toString;function l(i){return s.call(i)}e.exports=l}),gt=T((t,e)=>{var o=B(),s=mt(),l=pt(),i="[object Null]",r="[object Undefined]",h=o?o.toStringTag:void 0;function u(c){return c==null?c===void 0?r:i:h&&h in Object(c)?s(c):l(c)}e.exports=u}),Tt=T((t,e)=>{function o(s){return s!=null&&typeof s=="object"}e.exports=o}),wt=T((t,e)=>{var o=gt(),s=Tt(),l="[object Symbol]";function i(r){return typeof r=="symbol"||s(r)&&o(r)==l}e.exports=i}),Mt=T((t,e)=>{var o=H(),s=wt(),l=NaN,i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;function d(a){if(typeof a=="number")return a;if(s(a))return l;if(o(a)){var m=typeof a.valueOf=="function"?a.valueOf():a;a=o(m)?m+"":m}if(typeof a!="string")return a===0?a:+a;a=a.replace(i,"");var g=h.test(a);return g||u.test(a)?c(a.slice(2),g?2:8):r.test(a)?l:+a}e.exports=d}),yt=T((t,e)=>{var o=H(),s=dt(),l=Mt(),i="Expected a function",r=Math.max,h=Math.min;function u(c,d,a){var m,g,S,y,p,w,n=0,P=!1,M=!1,b=!0;if(typeof c!="function")throw new TypeError(i);d=l(d)||0,o(a)&&(P=!!a.leading,M="maxWait"in a,S=M?r(l(a.maxWait)||0,d):S,b="trailing"in a?!!a.trailing:b);function v(f){var X=m,x=g;return m=g=void 0,n=f,y=c.apply(x,X),y}function V(f){return n=f,p=setTimeout(Y,d),P?v(f):y}function N(f){var X=f-w,x=f-n,R=d-X;return M?h(R,S-x):R}function L(f){var X=f-w,x=f-n;return w===void 0||X>=d||X<0||M&&x>=S}function Y(){var f=s();if(L(f))return C(f);p=setTimeout(Y,N(f))}function C(f){return p=void 0,b&&m?v(f):(m=g=void 0,y)}function q(){p!==void 0&&clearTimeout(p),n=0,m=w=g=p=void 0}function A(){return p===void 0?y:C(s())}function I(){var f=s(),X=L(f);if(m=arguments,g=this,w=f,X){if(p===void 0)return V(w);if(M)return clearTimeout(p),p=setTimeout(Y,d),v(w)}return p===void 0&&(p=setTimeout(Y,d)),y}return I.cancel=q,I.flush=A,I}e.exports=u}),Pt=ct(yt()),Xt=Pt.default;function St(){let t=[],e=[];function o(n,P){n.forEach(M=>{M.call(null,P)})}this.onSingleTap=function(n){typeof n=="function"&&!t.includes(n)&&t.push(n)},this.onDoubleTap=function(n){typeof n=="function"&&!e.includes(n)&&e.push(n)},this.attach=function(n){if(!(n instanceof Element)){console.error("TapDetector.attach: arg must be an Element");return}n.addEventListener("touchstart",c),n.addEventListener("touchmove",a),n.addEventListener("touchend",d),n.addEventListener("mousedown",m),n.addEventListener("mouseup",g),n.addEventListener("mousemove",S)},this.detach=function(n){n.removeEventListener("touchstart",c),n.removeEventListener("touchmove",a),n.removeEventListener("touchend",d),n.removeEventListener("mousedown",m),n.removeEventListener("mouseup",g),n.removeEventListener("mousemove",S)};let s=!1,l=0,i=0,r=0,h=0,u=0;function c(n){s=!0,n.touches.length===1&&y(n.touches[0].clientX,n.touches[0].clientY)}function d(n){n.touches.length===0&&p()}function a(n){n.touches.length===1&&w(n.touches[0].clientX,n.touches[0].clientY)}function m(n){s||y(n.clientX,n.clientY)}function g(n){s||p()}function S(n){s||n.button===0&&w(n.clientX,n.clientY)}function y(n,P){h=n,u=P,r=0}function p(){let n=Date.now();r<10&&(n-l<300?i+=1:i=1,l=Date.now(),o(t,{clientX:h,clientY:u}),i===2&&(o(e,{clientX:h,clientY:u}),i=0)),r=0}function w(n,P){let M=h-n,b=u-P,v=Math.sqrt(M*M+b*b);r+=v,h=n,u=P}}const bt={props:{minScale:{type:Number,default:1},maxScale:{type:Number,default:5},zoomed:{type:Boolean,default:!1},resetTrigger:{type:Number,default:1e5},aspectRatio:{type:Number,default:1},backgroundColor:{type:String,default:"transparent"},pivot:{type:String,default:"cursor"},zoomingElastic:{type:Boolean,default:!0},limitTranslation:{type:Boolean,default:!0},doubleClickToZoom:{type:Boolean,default:!0},mouseWheelToZoom:{type:Boolean,default:!0}},data(){return{containerWidth:1,containerHeight:1,containerLeft:0,containerTop:0,translateX:0,animTranslateX:0,translateY:0,animTranslateY:0,scale:1,animScale:1,lastFullWheelTime:0,lastWheelTime:0,lastWheelDirection:"y",isPointerDown:!1,pointerPosX:-1,pointerPosY:-1,twoFingerInitDist:0,panLocked:!0,raf:null,tapDetector:null}},computed:{wrapperStyle(){let t=this.containerWidth*this.animTranslateX,e=this.containerHeight*this.animTranslateY;return{transform:[`translate(${t}px, ${e}px)`,`scale(${this.animScale})`].join(" ")}}},watch:{scale(t){t!==1&&(this.$emit("update:zoomed",!0),this.panLocked=!1)},resetTrigger:"reset"},mounted(){this.tapDetector=new St,this.tapDetector.attach(this.$refs.root),this.doubleClickToZoom&&this.tapDetector.onDoubleTap(this.onDoubleTap),window.addEventListener("resize",this.onWindowResize),this.onWindowResize(),this.refreshContainerPos(),this.loop()},beforeUnmount(){this.tapDetector.detach(this.$refs.root),window.removeEventListener("resize",this.onWindowResize),window.cancelAnimationFrame(this.raf)},methods:{reset(){this.scale=1,this.panLocked=!0,this.translateX=0,this.translateY=0},zoomIn(t=2){this.tryToScale(t),this.onInteractionEnd()},zoomOut(t=.5){this.tryToScale(t),this.onInteractionEnd()},tryToScale(t){let e=this.scale*t;if(this.zoomingElastic){if(e<this.minScale||e>this.maxScale){let o=Math.log2(t);o*=.2,t=Math.pow(2,o),e=this.scale*t}}else e<this.minScale?e=this.minScale:e>this.maxScale&&(e=this.maxScale);if(t=e/this.scale,this.scale=e,this.pivot!=="image-center"){let o=(this.pointerPosX-this.containerLeft)/this.containerWidth,s=(this.pointerPosY-this.containerTop)/this.containerHeight;this.translateX=(.5+this.translateX-o)*t+o-.5,this.translateY=(.5+this.translateY-s)*t+s-.5}},setPointerPosCenter(){this.pointerPosX=this.containerLeft+this.containerWidth/2,this.pointerPosY=this.containerTop+this.containerHeight/2},onPointerMove(t,e){if(this.isPointerDown){let o=t-this.pointerPosX,s=e-this.pointerPosY;this.panLocked||(this.translateX+=o/this.containerWidth,this.translateY+=s/this.containerHeight)}this.pointerPosX=t,this.pointerPosY=e},onInteractionEnd:Xt(function(){this.limit(),this.panLocked=this.scale===1,this.$emit("update:zoomed",!this.panLocked)},100),limit(){if(this.scale<this.minScale?this.scale=this.minScale:this.scale>this.maxScale&&this.tryToScale(this.maxScale/this.scale),this.limitTranslation){let t=this.calcTranslateLimit();Math.abs(this.translateX)>t.x&&(this.translateX*=t.x/Math.abs(this.translateX)),Math.abs(this.translateY)>t.y&&(this.translateY*=t.y/Math.abs(this.translateY))}},calcTranslateLimit(){if(this.getMarginDirection()==="y"){let t=this.containerWidth/this.aspectRatio/this.containerHeight,e=(this.scale*t-1)/2;return e<0&&(e=0),{x:(this.scale-1)/2,y:e}}else{let t=this.containerHeight*this.aspectRatio/this.containerWidth,e=(this.scale*t-1)/2;return e<0&&(e=0),{x:e,y:(this.scale-1)/2}}},getMarginDirection(){return this.containerWidth/this.containerHeight>this.aspectRatio?"x":"y"},onDoubleTap(t){this.scale===1?(t.clientX>0&&(this.pointerPosX=t.clientX,this.pointerPosY=t.clientY),this.tryToScale(Math.min(3,this.maxScale))):this.reset(),this.onInteractionEnd()},onWindowResize(){let t=window.getComputedStyle(this.$refs.root);this.containerWidth=parseFloat(t.width),this.containerHeight=parseFloat(t.height),this.setPointerPosCenter(),this.limit()},refreshContainerPos(){let t=this.$refs.root.getBoundingClientRect();this.containerLeft=t.left,this.containerTop=t.top},loop(){this.animScale=this.gainOn(this.animScale,this.scale),this.animTranslateX=this.gainOn(this.animTranslateX,this.translateX),this.animTranslateY=this.gainOn(this.animTranslateY,this.translateY),this.raf=window.requestAnimationFrame(this.loop)},gainOn(t,e){let o=(e-t)*.3;return Math.abs(o)>1e-5?t+o:e},onMouseWheel(t){if(!this.mouseWheelToZoom)return;t.preventDefault(),t.detail&&(t.wheelDelta=t.detail*-10);let e=Date.now();Math.abs(t.wheelDelta)===120?e-this.lastFullWheelTime>50&&(this.onMouseWheelDo(t.wheelDelta),this.lastFullWheelTime=e):(e-this.lastWheelTime>50&&typeof t.deltaX=="number"&&(this.lastWheelDirection=t.detail==0&&Math.abs(t.deltaX)>Math.abs(t.deltaY)?"x":"y",this.lastWheelDirection==="x"&&this.$emit("swipe",t.deltaX>0?"left":"right")),this.lastWheelDirection==="y"&&this.onMouseWheelDo(t.wheelDelta)),this.lastWheelTime=e},onMouseWheelDo(t){let e=Math.pow(1.25,t/120);this.tryToScale(e),this.onInteractionEnd()},onMouseDown(t){this.refreshContainerPos(),this.isPointerDown=!0,this.pointerPosX=t.clientX,this.pointerPosY=t.clientY},onMouseUp(t){this.isPointerDown=!1,this.onInteractionEnd()},onMouseMove(t){this.onPointerMove(t.clientX,t.clientY)},onTouchStart(t){if(t.touches.length===1)this.refreshContainerPos(),this.pointerPosX=t.touches[0].clientX,this.pointerPosY=t.touches[0].clientY,this.isPointerDown=!0;else if(t.touches.length===2){this.isPointerDown=!0,this.pointerPosX=(t.touches[0].clientX+t.touches[1].clientX)/2,this.pointerPosY=(t.touches[0].clientY+t.touches[1].clientY)/2;let e=t.touches[0].clientX-t.touches[1].clientX,o=t.touches[0].clientY-t.touches[1].clientY;this.twoFingerInitDist=Math.sqrt(e*e+o*o)}},onTouchEnd(t){t.touches.length===0?(this.isPointerDown=!1,Math.abs(this.scale-1)<.1&&(this.scale=1),this.onInteractionEnd()):t.touches.length===1&&(this.pointerPosX=t.touches[0].clientX,this.pointerPosY=t.touches[0].clientY)},onTouchMove(t){if(t.touches.length===1)this.onPointerMove(t.touches[0].clientX,t.touches[0].clientY);else if(t.touches.length===2){let e=(t.touches[0].clientX+t.touches[1].clientX)/2,o=(t.touches[0].clientY+t.touches[1].clientY)/2;this.onPointerMove(e,o),this.pointerPosX=e,this.pointerPosY=o;let s=t.touches[0].clientX-t.touches[1].clientX,l=t.touches[0].clientY-t.touches[1].clientY,i=Math.sqrt(s*s+l*l);this.tryToScale(i/this.twoFingerInitDist),this.twoFingerInitDist=i}}}};function vt(t,e,o,s,l,i){return z(),W("div",{ref:"root",class:"vue-zoomer",style:E({backgroundColor:o.backgroundColor}),onMousewheel:e[0]||(e[0]=(...r)=>i.onMouseWheel&&i.onMouseWheel(...r)),"on:DOMMouseScroll":e[1]||(e[1]=(...r)=>i.onMouseWheel&&i.onMouseWheel(...r)),onMousedown:e[2]||(e[2]=(...r)=>i.onMouseDown&&i.onMouseDown(...r)),onMouseup:e[3]||(e[3]=(...r)=>i.onMouseUp&&i.onMouseUp(...r)),onMousemove:e[4]||(e[4]=(...r)=>i.onMouseMove&&i.onMouseMove(...r)),onMouseout:e[5]||(e[5]=(...r)=>i.setPointerPosCenter&&i.setPointerPosCenter(...r)),onTouchstart:e[6]||(e[6]=(...r)=>i.onTouchStart&&i.onTouchStart(...r)),onTouchend:e[7]||(e[7]=(...r)=>i.onTouchEnd&&i.onTouchEnd(...r)),onTouchmove:e[8]||(e[8]=(...r)=>i.onTouchMove&&i.onTouchMove(...r))},[G("div",{class:"zoomer",style:E(i.wrapperStyle)},[K(t.$slots,"default",{},void 0,!0)],4)],36)}const j=F(bt,[["render",vt],["__scopeId","data-v-2e65fed4"],["__file","vue-zoomer.vue"]]),xt=50,Dt={props:{modelValue:{type:Number,required:!0},list:{type:Array,required:!0},backgroundColor:{type:String,default:"#333"},pivot:{type:String,default:"cursor"},zoomingElastic:{type:Boolean,default:!0},limitTranslation:{type:Boolean,default:!0},doubleClickToZoom:{type:Boolean,default:!0},mouseWheelToZoom:{type:Boolean,default:!0}},data(){return{zoomerRefs:[],containerWidth:1,containerHeight:1,selIndex:this.modelValue,animSelIndex:this.modelValue,currentZoomed:!1,autoSliding:!1,imageAspectRatios:[],isPointerDown:!1,lastPointerX:0,slideOffsetX:0}},computed:{middleStyle(){return{left:`${0+this.slideOffsetX}px`}},leftStyle(){return{left:`${-this.containerWidth+this.slideOffsetX}px`}},rightStyle(){return{left:`${this.containerWidth+this.slideOffsetX}px`}},slideThresh(){return Math.max(xt,this.containerWidth*.1)}},watch:{modelValue(t){t!==this.animSelIndex&&(this.selIndex=t,this.animSelIndex=t)},selIndex(){this.$nextTick(()=>{this.zoomerRefs.forEach(t=>{t.refreshContainerPos()})})}},mounted(){window.addEventListener("resize",this.onWindowResize),this.onWindowResize()},unmounted(){window.removeEventListener("resize",this.onWindowResize)},methods:{reset(){this.zoomerRefs.forEach(t=>{t.reset()})},zoomIn(t){this.zoomerRefs[1]&&this.zoomerRefs[1].zoomIn(t)},zoomOut(t){this.zoomerRefs[1]&&this.zoomerRefs[1].zoomOut(t)},onWindowResize(){let t=window.getComputedStyle(this.$refs.root);this.containerWidth=parseFloat(t.width),this.containerHeight=parseFloat(t.height)},onPointerMove(t){if(this.isPointerDown&&!this.currentZoomed){let e=this.selIndex===0&&t>0&&this.slideOffsetX+t>0||this.selIndex===this.list.length-1&&t<0&&this.slideOffsetX+t<0?.3:1;this.slideOffsetX+=t*e}},onPointerUp(){this.slideOffsetX<-this.slideThresh?this.paginate(1):this.slideOffsetX>this.slideThresh?this.paginate(-1):this.paginate(0)},onImageDragStart(t){return t.preventDefault(),!1},paginate(t){let e=this.selIndex+t;if(e<0||e>=this.list.length){this.slideOffsetX=0;return}this.slideOffsetX=this.containerWidth*-t,this.autoSliding=!0,this.$emit("update:modelValue",e),this.animSelIndex=e,setTimeout(()=>{this.selIndex=e,this.slideOffsetX=0,this.autoSliding=!1},400)},onMouseDown(t){this.isPointerDown=!0,this.lastPointerX=t.clientX},onMouseUp(t){this.isPointerDown=!1,this.onPointerUp()},onMouseMove(t){this.isPointerDown&&(this.onPointerMove(t.clientX-this.lastPointerX),this.lastPointerX=t.clientX)},onTouchStart(t){t.touches.length===1&&(this.isPointerDown=!0,this.lastPointerX=t.touches[0].clientX)},onTouchEnd(t){t.touches.length===0&&(this.isPointerDown=!1,this.onPointerUp())},onTouchMove(t){t.touches.length===1&&(this.onPointerMove(t.touches[0].clientX-this.lastPointerX),this.lastPointerX=t.touches[0].clientX)},onImageLoad(t,e){let o=e.target.naturalWidth/e.target.naturalHeight;this.imageAspectRatios[t]=o},onImageSwipe(t){this.paginate(t=="right"?-1:1)}}},Yt=["src","onLoad"];function zt(t,e,o,s,l,i){const r=J("v-zoomer");return z(),W("div",{ref:"root",class:k([{anim:l.autoSliding&&!l.isPointerDown},"vue-zoomer-gallery"]),style:E({"background-color":o.backgroundColor}),onMousemove:e[2]||(e[2]=(...h)=>i.onMouseMove&&i.onMouseMove(...h)),onMousedown:e[3]||(e[3]=(...h)=>i.onMouseDown&&i.onMouseDown(...h)),onMouseout:e[4]||(e[4]=(...h)=>i.onMouseUp&&i.onMouseUp(...h)),onMouseup:e[5]||(e[5]=(...h)=>i.onMouseUp&&i.onMouseUp(...h)),onTouchstart:e[6]||(e[6]=(...h)=>i.onTouchStart&&i.onTouchStart(...h)),onTouchend:e[7]||(e[7]=(...h)=>i.onTouchEnd&&i.onTouchEnd(...h)),onTouchmove:e[8]||(e[8]=$((...h)=>i.onTouchMove&&i.onTouchMove(...h),["prevent"]))},[(z(),W(Q,null,_(3,(h,u)=>tt(r,{ref_for:!0,ref:c=>{l.zoomerRefs[u]=c},key:u+"-"+l.selIndex,class:k([["left","middle","right"][u],"slide"]),style:E([i.leftStyle,i.middleStyle,i.rightStyle][u]),"max-scale":10,zoomed:l.currentZoomed,"onUpdate:zoomed":e[1]||(e[1]=c=>l.currentZoomed=c),"reset-trigger":u,"aspect-ratio":l.imageAspectRatios[l.selIndex+u-1]||1,pivot:o.pivot,"zooming-elastic":o.zoomingElastic,"limit-translation":o.limitTranslation,"double-click-to-zoom":o.doubleClickToZoom,"mouse-wheel-to-zoom":o.mouseWheelToZoom,onSwipe:i.onImageSwipe},{default:et(()=>[l.selIndex+u-1>-1&&l.selIndex+u-1<o.list.length?(z(),W("img",{key:0,src:o.list[l.selIndex+u-1],draggable:"false",style:{"object-fit":"contain",width:"100%",height:"100%"},onLoad:c=>i.onImageLoad(l.selIndex+u-1,c),onDragstart:e[0]||(e[0]=(...c)=>i.onImageDragStart&&i.onImageDragStart(...c))},null,40,Yt)):ot("",!0)]),_:2},1032,["class","style","zoomed","reset-trigger","aspect-ratio","pivot","zooming-elastic","limit-translation","double-click-to-zoom","mouse-wheel-to-zoom","onSwipe"])),64))],38)}const Z=F(Dt,[["render",zt],["__scopeId","data-v-0d3d0b97"],["__file","vue-zoomer-gallery.vue"]]),Wt={install(t){t.component("VZoomer",j),t.component("VZoomerGallery",Z)},Zoomer:j,Gallery:Z},It=it(({app:t})=>{t.use(Wt)});export{It as default};
