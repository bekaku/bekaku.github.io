import{cP as T,r as S,cQ as k,T as C,d as B,cR as I,bv as x,a as R,cd as q,cS as P,cT as L,cU as O,cV as Q,bE as E,_ as M,B as c,C as d,E as o,F as s,cW as U,af as f,ah as u,ad as V,I as b,R as _,N as w,a9 as D,ag as p,O as m,cz as F,bo as H,a7 as z,aL as G,cX as K}from"./index-ffBvIxcR.js";import{a as A,u as j}from"./useAxios-BmLKEBft.js";const W=T("notificationStore",()=>{const{cacheNotifyCount:r}=A(),t=S({lastestId:0,totalNotify:0});return{notify:t,setNotify:l=>{t.value.totalNotify=l.totalNotify,t.value.lastestId=l.lastestId},setLastNotify:l=>{r.value.lastestId=l}}}),X=()=>{const{callAxios:r}=j();return{updateFcmSetting:async i=>{await r({API:"/api/userNotify/updateFcmSetting",method:"PUT",body:i})},refreshFcmToken:async i=>{await r({API:"/api/userNotify/refreshFcmToken",method:"PUT",body:i})},findAllByUser:async(i,a)=>new Promise(y=>{setTimeout(()=>{y([])},1500)}),findCountAllNotRead:async i=>await r({API:`/api/userNotify/findCountAllNotRead?lastestNotifyId=${i}`,method:"GET"}),updateReadNotify:async i=>await r({API:`/api/userNotify/updateReadNotify/${i}`,method:"PUT"}),updateReadNotifyAll:async()=>await r({API:"/api/userNotify/updateReadNotifyAll",method:"PUT"})}},Y=()=>{const{findCountAllNotRead:r}=X(),{cacheNotifyCount:t}=A(),n=W(),{notify:e}=k(n),{setNotify:l}=n;return C(()=>{e.value.totalNotify=999}),{notify:e,setNotify:l,resetBadgeCount:()=>{e.value.totalNotify=0},notificationLink:(a,y)=>{if(a&&y){if(a=="LIKE_POST"||a=="SHARE"||a=="COMMENT_POST")return`/post/view/${y}`;if(a=="LIKE_COMMENT")return`/comment/view/${y}`;if(a=="COMMENT_REPLY")return`/comment/view/${y}?isReply=1`}},fetchNotReadNotify:async()=>{const a=await r(t.value&&t.value.lastestId?t.value.lastestId:0);a&&a.lastestId&&a.totalNotify&&l(a)}}},J=B({__name:"AppHeader",props:{bordered:{type:Boolean,default:!1},reveal:{type:Boolean,default:!1},showTogleDrawer:{type:Boolean,default:!1},frontend:{type:Boolean},showLogo:{type:Boolean,default:!0},hambergerMenu:{type:Boolean},hambergerIcon:{default:()=>I},hambergerIconOff:{},showUserSetting:{type:Boolean,default:!0}},setup(r,{expose:t}){t();const n=x(),e=S(!1),{notify:l,resetBadgeCount:g}=Y(),{t:h}=R(),i=q(),a=S(!1),v={$q:n,showGotTopBtn:e,notify:l,resetBadgeCount:g,t:h,langugeAndThemeStore:i,showSearch:a,onOpenSearch:()=>{a.value=!0},onScroll:N=>{N&&N.position&&N.position.top>100?e.value=!0:e.value=!1},get biAppIndicator(){return P},get biBell(){return L},get biCameraVideo(){return O},get biChatDots(){return Q},get biSearch(){return E}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),Z=["src"],$={class:"q-mr-sm text-muted"},ee={class:"q-gutter-md row items-center no-wrap"};function te(r,t,n,e,l,g){return c(),d(K,{reveal:n.reveal,"height-hint":"58",bordered:n.bordered,elevated:e.showGotTopBtn,class:G({"wee-second-bg-color-theme-dark text-white":e.$q.dark.isActive,"bg-white text-black":!e.$q.dark.isActive})},{default:o(()=>[s(U,{onScroll:e.onScroll}),s(z,{class:"q-py-xs"},{default:o(()=>[n.showTogleDrawer?(c(),d(f,{key:0,dense:"",flat:"",round:"",icon:n.hambergerIcon,onClick:t[0]||(t[0]=h=>e.langugeAndThemeStore.setLeftDrawer(!e.langugeAndThemeStore.leftDrawerOpen))},null,8,["icon"])):u("",!0),n.showLogo?(c(),d(f,{key:1,flat:"","no-caps":"","no-wrap":"",class:"q-mr-xs",ripple:!1,to:"/"},{default:o(()=>[s(V,{style:{height:"auto",width:"42px"},square:""},{default:o(()=>[b("img",{src:e.$q.dark.isActive?"/quasar-starter-template/logo/logo-white.png":"/quasar-starter-template/logo/logo-black.png"},null,8,Z)]),_:1})]),_:1})):u("",!0),e.$q.screen.gt.xs?(c(),d(f,{key:2,flat:"",onClick:e.onOpenSearch,class:"text-capitalize"},{default:o(()=>[b("span",$,_(e.t("base.search")+" Vue Quasar"),1),s(w,{name:e.biSearch},null,8,["name"])]),_:1})):u("",!0),s(D),b("div",ee,[e.$q.screen.gt.sm?(c(),d(f,{key:0,round:"",dense:"",flat:"",icon:e.biCameraVideo},{default:o(()=>[s(p,null,{default:o(()=>t[1]||(t[1]=[m("Create a video or post")])),_:1})]),_:1},8,["icon"])):u("",!0),e.$q.screen.gt.sm?(c(),d(f,{key:1,round:"",dense:"",flat:"",icon:e.biAppIndicator},{default:o(()=>[s(p,null,{default:o(()=>t[2]||(t[2]=[m("Apps")])),_:1})]),_:1},8,["icon"])):u("",!0),e.$q.screen.gt.sm?(c(),d(f,{key:2,round:"",dense:"",flat:"",icon:e.biChatDots,to:"/chats"},{default:o(()=>[s(p,null,{default:o(()=>t[3]||(t[3]=[m("Messages")])),_:1})]),_:1},8,["icon"])):u("",!0),e.$q.screen.gt.xs?u("",!0):(c(),d(f,{key:3,round:"",dense:"",flat:"",onClick:e.onOpenSearch},{default:o(()=>[s(w,{name:e.biSearch},null,8,["name"])]),_:1})),s(f,{round:"",dense:"",flat:"",onClick:e.resetBadgeCount,icon:e.biBell},{default:o(()=>[e.notify&&e.notify.totalNotify?(c(),d(F,{key:0,color:"negative",rounded:"","text-color":"white",floating:""},{default:o(()=>[m(_(e.notify.totalNotify>99?"99+":e.notify.totalNotify),1)]),_:1})):u("",!0),s(p,null,{default:o(()=>[m(_(e.t("nav.notifications")),1)]),_:1}),s(H,{anchor:"bottom left",self:"top left",style:{width:"360px"}})]),_:1},8,["onClick","icon"])])]),_:1})]),_:1},8,["reveal","bordered","elevated","class"])}const se=M(J,[["render",te],["__file","AppHeader.vue"]]);export{se as A};
