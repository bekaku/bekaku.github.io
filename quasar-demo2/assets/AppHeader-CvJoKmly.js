import{d as O,bv as E,a as M,au as F,cd as U,f as z,ce as R,dK as G,dL as H,ci as K,aE as j,dM as W,c6 as X,dN as J,dO as Y,ca as Z,dP as $,ch as ee,_ as D,B as o,C as r,E as a,F as t,ac as s,ah as h,aW as k,I as w,R as m,O as g,N as f,bo as C,b9 as x,aq as p,ab as y,aa as q,H as I,ai as P,aX as Q,ap as te,dQ as ae,r as B,dR as oe,T as ne,dJ as le,dS as re,dT as se,dU as ie,dV as de,bE as ce,dW as ue,af as S,ad as fe,a9 as me,ag as A,cz as ge,a7 as he,aL as be,dX as _e}from"./index-CyhFmzYZ.js";import{C as N}from"./ClosePopup-DzvNLi4U.js";import{B as ye}from"./BaseAvatar-DKRmqA8L.js";import{u as ve}from"./useAuth-PBC8Lyl0.js";import{a as V,u as Se}from"./useAxios-C7u6lCW9.js";const ke=O({__name:"UserNavSetting",props:{hambergerMenu:{type:Boolean,default:!0},showLogo:{type:Boolean,default:!0},frontend:{type:Boolean,default:!0},showTogleDrawer:{type:Boolean,default:!1},reveal:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1}},setup(c,{expose:n}){n();const d=E(),{t:e}=M(),u=F(),v=U(),{signOut:b}=ve(),l=z(()=>R.find(_=>_.iso==v.locale)),i={$q:d,t:e,authenStore:u,langugeAndThemeStore:v,signOut:b,currenLocale:l,BaseAvatar:ye,get availableLocales(){return R},get availableThemes(){return G},get biBoxArrowRight(){return H},get biCheck2(){return K},get biChevronExpand(){return j},get biChevronRight(){return W},get biGear(){return X},get biMoon(){return J},get biPersonSquare(){return Y},get biQuestionCircle(){return Z},get biSun(){return $},get biTranslate(){return ee}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),pe={class:"cursor-pointer text-weight-bold"};function Ae(c,n,d,e,u,v){return o(),r(y,te(c.$attrs,{clickable:""}),{default:a(()=>[t(s,{avatar:"",top:""},{default:a(()=>[e.authenStore.loginedAvatar?(o(),r(e.BaseAvatar,{key:0,class:"shadow-5",src:e.authenStore.loginedAvatar,size:"36px"},null,8,["src"])):h("",!0)]),_:1}),e.$q.screen.gt.xs?(o(),r(s,{key:0},{default:a(()=>[t(k,{lines:"1"},{default:a(()=>[w("span",pe,m(e.authenStore.loginedDisplay),1)]),_:1}),t(k,{caption:"",lines:1},{default:a(()=>n[0]||(n[0]=[g(" Sofware Engineer ")])),_:1})]),_:1})):h("",!0),t(s,{side:""},{default:a(()=>[t(f,{name:e.biChevronExpand,size:"16px"},null,8,["name"])]),_:1}),t(C,null,{default:a(()=>[t(x,{style:{"min-width":"260px"}},{default:a(()=>{var b;return[p((o(),r(y,{clickable:"",to:`/user/${(b=e.authenStore.auth)==null?void 0:b.id}`},{default:a(()=>[t(s,{avatar:""},{default:a(()=>[e.authenStore.loginedAvatar?(o(),r(e.BaseAvatar,{key:0,src:e.authenStore.loginedAvatar,size:"36px",rounded:""},null,8,["src"])):(o(),r(f,{key:1,name:e.biPersonSquare},null,8,["name"]))]),_:1}),t(s,null,{default:a(()=>[g(m(e.t("base.yourProfile")),1)]),_:1})]),_:1},8,["to"])),[[N]]),t(q),t(y,{clickable:""},{default:a(()=>[t(s,{avatar:""},{default:a(()=>[t(f,{name:e.langugeAndThemeStore.theme=="dark"?e.biMoon:e.biSun},null,8,["name"])]),_:1}),t(s,null,{default:a(()=>[t(k,{lines:"1"},{default:a(()=>[g(m(e.t("base.appearance"))+" : "+m(e.t(`theme.${e.langugeAndThemeStore.theme}`)),1)]),_:1})]),_:1}),t(s,{side:""},{default:a(()=>[t(f,{name:e.biChevronRight},null,8,["name"])]),_:1}),t(C,{anchor:e.$q.screen.gt.xs?"top end":"bottom left",self:"top start"},{default:a(()=>[t(x,{style:{"min-width":"150px"}},{default:a(()=>[(o(!0),I(P,null,Q(e.availableThemes,l=>(o(),r(y,{clickable:"",key:l.key,onClick:i=>e.langugeAndThemeStore.setThemeSetting(l.key)},{default:a(()=>[t(s,{avatar:""},{default:a(()=>[t(f,{name:l.icon},null,8,["name"])]),_:2},1024),t(s,null,{default:a(()=>[g(m(e.t(l.text)),1)]),_:2},1024),l.key==e.langugeAndThemeStore.themeSetting?(o(),r(s,{key:0,side:""},{default:a(()=>[t(f,{name:e.biCheck2},null,8,["name"])]),_:1})):h("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["anchor"])]),_:1}),t(y,{clickable:""},{default:a(()=>[t(s,{avatar:""},{default:a(()=>[t(f,{name:e.biTranslate},null,8,["name"])]),_:1}),t(s,null,{default:a(()=>[t(k,{lines:"1"},{default:a(()=>[g(m(e.t("base.language"))+" : "+m(e.currenLocale?e.currenLocale.name:""),1)]),_:1})]),_:1}),t(s,{side:""},{default:a(()=>[t(f,{name:e.biChevronRight},null,8,["name"])]),_:1}),t(C,{anchor:e.$q.screen.gt.xs?"top end":"bottom left",self:"top start"},{default:a(()=>[t(x,{style:{"min-width":"150px"}},{default:a(()=>[(o(!0),I(P,null,Q(e.availableLocales,l=>(o(),r(y,{clickable:"",key:l.iso,onClick:i=>e.langugeAndThemeStore.setLocale(l.iso)},{default:a(()=>[t(s,null,{default:a(()=>[g(m(l.name),1)]),_:2},1024),l.iso==e.langugeAndThemeStore.locale?(o(),r(s,{key:0,side:""},{default:a(()=>[t(f,{name:e.biCheck2},null,8,["name"])]),_:1})):h("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["anchor"])]),_:1}),t(q),p((o(),r(y,{clickable:""},{default:a(()=>[t(s,{avatar:""},{default:a(()=>[t(f,{name:e.biQuestionCircle},null,8,["name"])]),_:1}),t(s,null,{default:a(()=>[g(m(e.t("base.help")),1)]),_:1})]),_:1})),[[N]]),p((o(),r(y,{clickable:"",to:"/settings"},{default:a(()=>[t(s,{avatar:""},{default:a(()=>[t(f,{name:e.biGear},null,8,["name"])]),_:1}),t(s,null,{default:a(()=>[g(m(e.t("base.setting")),1)]),_:1})]),_:1})),[[N]]),p((o(),r(y,{clickable:"",onClick:e.signOut},{default:a(()=>[t(s,{avatar:""},{default:a(()=>[t(f,{name:e.biBoxArrowRight},null,8,["name"])]),_:1}),t(s,null,{default:a(()=>[g(m(e.t("base.logout")),1)]),_:1})]),_:1},8,["onClick"])),[[N]])]}),_:1})]),_:1})]),_:1},16)}const Ne=D(ke,[["render",Ae],["__file","UserNavSetting.vue"]]),we=ae("notificationStore",()=>{const{cacheNotifyCount:c}=V(),n=B({lastestId:0,totalNotify:0});return{notify:n,setNotify:u=>{n.value.totalNotify=u.totalNotify,n.value.lastestId=u.lastestId},setLastNotify:u=>{c.value.lastestId=u}}}),Ce=()=>{const{callAxios:c}=Se();return{updateFcmSetting:async l=>{await c({API:"/api/userNotify/updateFcmSetting",method:"PUT",body:l})},refreshFcmToken:async l=>{await c({API:"/api/userNotify/refreshFcmToken",method:"PUT",body:l})},findAllByUser:async(l,i)=>new Promise(_=>{setTimeout(()=>{_([])},1500)}),findCountAllNotRead:async l=>await c({API:`/api/userNotify/findCountAllNotRead?lastestNotifyId=${l}`,method:"GET"}),updateReadNotify:async l=>await c({API:`/api/userNotify/updateReadNotify/${l}`,method:"PUT"}),updateReadNotifyAll:async()=>await c({API:"/api/userNotify/updateReadNotifyAll",method:"PUT"})}},Te=()=>{const{findCountAllNotRead:c}=Ce(),{cacheNotifyCount:n}=V(),d=we(),{notify:e}=oe(d),{setNotify:u}=d;return ne(()=>{e.value.totalNotify=999}),{notify:e,setNotify:u,resetBadgeCount:()=>{e.value.totalNotify=0},notificationLink:(i,_)=>{if(i&&_){if(i=="LIKE_POST"||i=="SHARE"||i=="COMMENT_POST")return`/post/view/${_}`;if(i=="LIKE_COMMENT")return`/comment/view/${_}`;if(i=="COMMENT_REPLY")return`/comment/view/${_}?isReply=1`}},fetchNotReadNotify:async()=>{const i=await c(n.value&&n.value.lastestId?n.value.lastestId:0);i&&i.lastestId&&i.totalNotify&&u(i)}}},xe=O({__name:"AppHeader",props:{bordered:{type:Boolean,default:!1},reveal:{type:Boolean,default:!1},showTogleDrawer:{type:Boolean,default:!1},frontend:{type:Boolean},showLogo:{type:Boolean,default:!0},hambergerMenu:{type:Boolean},hambergerIcon:{default:()=>le},hambergerIconOff:{},showUserSetting:{type:Boolean,default:!0}},setup(c,{expose:n}){n();const d=E(),e=B(!1),{notify:u,resetBadgeCount:v}=Te(),{t:b}=M(),l=U(),i=B(!1),L={$q:d,showGotTopBtn:e,notify:u,resetBadgeCount:v,t:b,langugeAndThemeStore:l,showSearch:i,onOpenSearch:()=>{i.value=!0},onScroll:T=>{T&&T.position&&T.position.top>100?e.value=!0:e.value=!1},UserNavSetting:Ne,get biAppIndicator(){return re},get biBell(){return se},get biCameraVideo(){return ie},get biChatDots(){return de},get biSearch(){return ce}};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),Be=["src"],Le={class:"q-mr-sm text-muted"},Re={class:"q-gutter-md row items-center no-wrap"};function qe(c,n,d,e,u,v){return o(),r(_e,{reveal:d.reveal,"height-hint":"58",bordered:d.bordered,elevated:e.showGotTopBtn,class:be({"wee-second-bg-color-theme-dark text-white":e.$q.dark.isActive,"bg-white text-black":!e.$q.dark.isActive})},{default:a(()=>[t(ue,{onScroll:e.onScroll}),t(he,{class:"q-py-xs"},{default:a(()=>[d.showTogleDrawer?(o(),r(S,{key:0,dense:"",flat:"",round:"",icon:d.hambergerIcon,onClick:n[0]||(n[0]=b=>e.langugeAndThemeStore.setLeftDrawer(!e.langugeAndThemeStore.leftDrawerOpen))},null,8,["icon"])):h("",!0),d.showLogo?(o(),r(S,{key:1,flat:"","no-caps":"","no-wrap":"",class:"q-mr-xs",ripple:!1,to:"/"},{default:a(()=>[t(fe,{style:{height:"auto",width:"42px"},square:""},{default:a(()=>[w("img",{src:e.$q.dark.isActive?"/quasar-starter-template/logo/logo-white.png":"/quasar-starter-template/logo/logo-black.png"},null,8,Be)]),_:1})]),_:1})):h("",!0),e.$q.screen.gt.xs?(o(),r(S,{key:2,flat:"",onClick:e.onOpenSearch,class:"text-capitalize"},{default:a(()=>[w("span",Le,m(e.t("base.search")+" Vue Quasar"),1),t(f,{name:e.biSearch},null,8,["name"])]),_:1})):h("",!0),t(me),w("div",Re,[e.$q.screen.gt.sm?(o(),r(S,{key:0,round:"",dense:"",flat:"",icon:e.biCameraVideo},{default:a(()=>[t(A,null,{default:a(()=>n[1]||(n[1]=[g("Create a video or post")])),_:1})]),_:1},8,["icon"])):h("",!0),e.$q.screen.gt.sm?(o(),r(S,{key:1,round:"",dense:"",flat:"",icon:e.biAppIndicator},{default:a(()=>[t(A,null,{default:a(()=>n[2]||(n[2]=[g("Apps")])),_:1})]),_:1},8,["icon"])):h("",!0),e.$q.screen.gt.sm?(o(),r(S,{key:2,round:"",dense:"",flat:"",icon:e.biChatDots,to:"/chats"},{default:a(()=>[t(A,null,{default:a(()=>n[3]||(n[3]=[g("Messages")])),_:1})]),_:1},8,["icon"])):h("",!0),e.$q.screen.gt.xs?h("",!0):(o(),r(S,{key:3,round:"",dense:"",flat:"",onClick:e.onOpenSearch},{default:a(()=>[t(f,{name:e.biSearch},null,8,["name"])]),_:1})),t(S,{round:"",dense:"",flat:"",onClick:e.resetBadgeCount,icon:e.biBell},{default:a(()=>[e.notify&&e.notify.totalNotify?(o(),r(ge,{key:0,color:"negative",rounded:"","text-color":"white",floating:""},{default:a(()=>[g(m(e.notify.totalNotify>99?"99+":e.notify.totalNotify),1)]),_:1})):h("",!0),t(A,null,{default:a(()=>[g(m(e.t("nav.notifications")),1)]),_:1}),t(C,{anchor:"bottom left",self:"top left",style:{width:"360px"}})]),_:1},8,["onClick","icon"]),d.showUserSetting?(o(),r(e.UserNavSetting,{key:4,style:{"max-width":"225px"}})):h("",!0)])]),_:1})]),_:1},8,["reveal","bordered","elevated","class"])}const Ue=D(xe,[["render",qe],["__file","AppHeader.vue"]]);export{Ue as A,Ne as U};
