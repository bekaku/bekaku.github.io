import{b_ as _,b$ as h,d as v,bM as b,C as A,r as y,_ as C,o as O,j as P,e,w as o,Q as m,F as S,c0 as w,aK as d,I,t as g,J as T,K as k,p as F,y as Q,B as x,i as D,bN as B}from"./index.f3a08178.js";import{u as E}from"./useLang.0a7da174.js";import{u as L}from"./use-meta.8cafa842.js";import{u as $}from"./useAxios.086e1b00.js";import{U as M}from"./UserService.dcf6c6fd.js";import{u as N}from"./useBase.d86bdcbd.js";import{_ as U}from"./plugin-vue_export-helper.21dcd24c.js";var V=()=>{const{callAxios:a}=$();return{uploadApi:async(n,r=0)=>{const t=new FormData;return t.append(_,n),t.append(h,r.toString()),await a({API:"/api/fileManager/uploadApi",method:"POST",body:t})}}};const R={biPencilFill:w},q=v({components:{ImageCropper:b(()=>B(()=>import("./ImageCropper.a77bcc98.js"),["assets/ImageCropper.a77bcc98.js","assets/ImageCropper.03ed8414.css","assets/index.f3a08178.js","assets/index.6170d171.css","assets/useLang.0a7da174.js","assets/useBase.d86bdcbd.js","assets/plugin-vue_export-helper.21dcd24c.js"]))},setup(){const{t:a}=E(),{WeeLoader:s}=N();L({title:a("page.settingsPublicProfile")});const{uploadApi:n}=V(),{updateUserAvatar:r}=M(),t=A(),u=y(!1);return{t:a,authenStore:t,dialog:u,onOkay:async i=>{s();const p=await n(i);if(p&&t.auth){await r(p.id);const c=t.auth;c.avatar&&(c.avatar.thumbnail=p.fileThumbnailPath,c.avatar.image=p.filePath)}s(!1)},onOpenCropper:()=>{u.value=!0},...R}}}),K={class:"text-h6"};function j(a,s,n,r,t,u){const f=C("image-cropper");return O(),P(S,null,[e(m,{square:"",flat:"",class:"bg-transparent q-pl-lg"},{default:o(()=>[e(d,null,{default:o(()=>[I("div",K,g(a.t("page.settingsPublicProfile")),1),e(T)]),_:1}),e(d,null,{default:o(()=>[e(m,null,{default:o(()=>[e(d,{class:"text-white bg-primary",style:{height:"100px"}},{default:o(()=>[e(k,{size:"100px",class:"shadow-10 absolute-bottom",style:{top:"20px",left:"25px"}},{default:o(()=>{var l,i;return[e(F,{"spinner-color":"white",src:(i=(l=a.authenStore.auth)==null?void 0:l.avatar)==null?void 0:i.image,style:{height:"100px","max-width":"100px"}},null,8,["src"]),e(Q,{onClick:a.onOpenCropper,flat:"",round:"",class:"absolute",icon:a.biPencilFill},{default:o(()=>[e(x,null,{default:o(()=>[D(g(a.t("base.changeAvatar")),1)]),_:1})]),_:1},8,["onClick","icon"])]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{title:a.t("cropAvatar"),dialog:a.dialog,onOnClose:s[0]||(s[0]=l=>a.dialog=!1),onOnOkay:a.onOkay},null,8,["title","dialog","onOnOkay"])],64)}var Z=U(q,[["render",j]]);export{Z as default};
