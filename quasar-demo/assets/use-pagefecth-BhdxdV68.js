const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Paging-B1OB03Rd.js","assets/index-Ck7C3Bne.js","assets/index-54-LVJYF.css","assets/index-BSkhW1H0.js","assets/BaseSpinner-DsvQPgCZ.js","assets/AppResult-DbJgmuE7.js","assets/BaseLoadmore-Ckx7daZ7.js"])))=>i.map(i=>d[i]);
import{r as P,f as O,bQ as z,bM as G,bN as H,bR as W,bS as X,d as Y,a as J,T as K,Y as C,Z as D,_ as $,B as d,C as g,E as s,L as ee,F as r,M as k,a7 as ae,a8 as te,O as _,a9 as le,aa as se,S as T,I as M,H as p,ai as L,b9 as q,aX as Z,ab as F,ac as V,aW as R,R as S,ah as re}from"./index-Ck7C3Bne.js";import{u as ne}from"./useAppMeta-eNfZYAUK.js";import{u as ie}from"./usePaging-BNKlWwao.js";import{u as oe}from"./useSort-B_P1EnGQ.js";import{u as de}from"./useAxios-CTh94MuL.js";import{B as ue}from"./BaseScrollArea-DqMuq8n7.js";import"./use-meta-o6AKASHm.js";const j=t=>{const{callAxios:u}=de(),{pages:i,resetPaging:a}=ie(t!=null&&t.itemsPerPage?t.itemsPerPage:10),{sort:c}=oe(t==null?void 0:t.defaultSort),f=P([]),n=P(!1),o=P(!1),b=P(!1),A=P(t.urlEndpoint),y=P(t==null?void 0:t.additionalUri),h=O(()=>{let e=!1,l="";return(t.pageAble==null||t.pageAble)&&(l+=`page=${t.pageStartZero==null||t.pageStartZero?i.value.current>0?i.value.current-1:0:i.value.current}`,l+=`&size=${i.value.itemsPerPage}`,e=!0),(t.sortAble==null||t.sortAble)&&(e&&(l+="&"),l+=`${c.value.column&&c.value.mode?"sort="+c.value.column+","+c.value.mode:""}`,e=!0),y.value&&(e&&(l+="&"),l+=`${y.value}`),z(l)?void 0:l}),B=O(()=>`${A.value}${h.value?"?"+h.value:""}`),m=async()=>{b.value=!0;const e=await u({API:B.value,method:"GET"});let l=[];if(!G(e)&&!H(e)){if(W(e))t.reverseList?l=e.dataList.reverse():l=e.dataList,await w(l),e.totalPages!=null&&(i.value.totalPages=e.totalPages),e.totalElements!=null&&(i.value.totalElements=e.totalElements,(e.totalElements==0||e.totalElements<i.value.itemsPerPage)&&(n.value=!0)),e.last!=null&&(i.value.last=e.last,n.value=e.last);else if(e&&X(e)){const v=e;(v.length==0||v.length<i.value.itemsPerPage)&&(n.value=!0),t.reverseList?l=v.reverse():l=v,await w(l)}}return o.value||(o.value=!0),b.value=!1,new Promise(v=>{v(!0)})},w=e=>new Promise(l=>{i.value.current==1?f.value=e:t.concatList?t.addUnshift?f.value.unshift(...e):f.value.push(...e):f.value=e,l(!0)}),x=(e=!0)=>{e&&a(),f.value=[],o.value=!1,n.value=!1},I=async()=>(a(),t.preventResetListReload||(o.value=!1,f.value=[]),n.value=!1,await m(),new Promise(e=>e(!0))),N=async()=>(o.value&&(i.value.current++,await m()),new Promise(e=>e(!0))),E=async(e=!1)=>(x(e),await m(),new Promise(l=>l(!0)));return{isInfiniteDisabled:n,firstLoaded:o,loading:b,pages:i,sort:c,dataList:f,urlEndpoint:A,additionalUri:y,loadData:m,resetData:x,onPageChange:async e=>(await E(!1),new Promise(l=>l(!0))),onPerPageChange:async e=>(await E(!1),new Promise(l=>l(!0))),onNextPage:N,onReload:I}},fe=Y({__name:"use-pagefecth",setup(t,{expose:u}){u();const i=C(()=>D(()=>import("./Paging-B1OB03Rd.js"),__vite__mapDeps([0,1,2,3]))),a=C(()=>D(()=>import("./BaseSpinner-DsvQPgCZ.js"),__vite__mapDeps([4,1,2]))),c=C(()=>D(()=>import("./AppResult-DbJgmuE7.js"),__vite__mapDeps([5,1,2]))),f=C(()=>D(()=>import("./BaseLoadmore-Ckx7daZ7.js"),__vite__mapDeps([6,1,2]))),{t:n}=J(),{setTitle:o}=ne();o(`Use pagefecth | ${n("app.name")}`);const{firstLoaded:b,pages:A,dataList:y,loadData:h,onPageChange:B,onPerPageChange:m}=j({urlEndpoint:"/api/permission",defaultSort:{column:"id",mode:"desc"},itemsPerPage:4}),{isInfiniteDisabled:w,loading:x,firstLoaded:I,dataList:N,loadData:E,onNextPage:U}=j({urlEndpoint:"/api/permission",defaultSort:{column:"id",mode:"desc"},itemsPerPage:4,concatList:!0});K(()=>{h(),E()});const Q={Paging:i,BaseSpinner:a,AppResult:c,BaseLoadmore:f,t:n,setTitle:o,firstLoaded:b,pages:A,dataList:y,loadData:h,onPageChange:B,onPerPageChange:m,isInfiniteDisabled:w,loading:x,firstLoaded2:I,dataList2:N,loadData2:E,onNextPage:U,BaseScrollArea:ue};return Object.defineProperty(Q,"__isScriptSetup",{enumerable:!1,value:!0}),Q}});function ce(t,u,i,a,c,f){return d(),g(ee,{padding:""},{default:s(()=>[r(T,{flat:"",bordered:"",class:"content-limit"},{default:s(()=>[r(k,null,{default:s(()=>[r(ae,null,{default:s(()=>[r(te,null,{default:s(()=>u[1]||(u[1]=[_(" Use pagefecth")])),_:1}),r(le)]),_:1}),r(se)]),_:1}),r(k,null,{default:s(()=>[r(T,null,{default:s(()=>[r(k,null,{default:s(()=>[u[2]||(u[2]=M("div",{class:"text-h5 q-ma-sm"},"Paging",-1)),a.firstLoaded?(d(),p(L,{key:1},[a.dataList.length===0?(d(),g(a.AppResult,{key:0,status:"empty",description:a.t("error.dataNotfound")},null,8,["description"])):(d(),p(L,{key:1},[r(q,null,{default:s(()=>[(d(!0),p(L,null,Z(a.dataList,(n,o)=>(d(),g(F,{key:`${o}-${n.id}`},{default:s(()=>[r(V,null,{default:s(()=>[r(R,null,{default:s(()=>[_(S(n.description),1)]),_:2},1024),r(R,{caption:""},{default:s(()=>[_(S(n.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),r(a.Paging,{modelValue:a.pages,"onUpdate:modelValue":u[0]||(u[0]=n=>a.pages=n),"boundary-numbers":!1,"onUpdate:current":a.onPageChange,"onUpdate:perPage":a.onPerPageChange},null,8,["modelValue","onUpdate:current","onUpdate:perPage"])],64))],64)):(d(),g(a.BaseSpinner,{key:0}))]),_:1})]),_:1}),r(T,{class:"q-my-md"},{default:s(()=>[r(k,null,{default:s(()=>[u[3]||(u[3]=M("div",{class:"text-h5 q-ma-sm"},"Loadmore",-1)),a.firstLoaded2?(d(),p(L,{key:1},[a.dataList2.length===0?(d(),g(a.AppResult,{key:0,status:"empty",description:a.t("error.dataNotfound")},null,8,["description"])):(d(),p(L,{key:1},[r(a.BaseScrollArea,{height:"250px"},{default:s(()=>[r(q,null,{default:s(()=>[(d(!0),p(L,null,Z(a.dataList2,(n,o)=>(d(),g(F,{key:`${o}-${n.id}`},{default:s(()=>[r(V,{side:""},{default:s(()=>[_(S(o+1),1)]),_:2},1024),r(V,null,{default:s(()=>[r(R,null,{default:s(()=>[_(S(n.description),1)]),_:2},1024),r(R,{caption:""},{default:s(()=>[_(S(n.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),a.isInfiniteDisabled?re("",!0):(d(),g(a.BaseLoadmore,{key:0,loading:a.loading,"frist-loaded":a.firstLoaded2,"is-infinite-disabled":a.isInfiniteDisabled,label:a.t("base.loadMore"),onOnNextPage:a.onNextPage,button:"","show-icon":"","full-width":""},null,8,["loading","frist-loaded","is-infinite-disabled","label","onOnNextPage"]))],64))],64)):(d(),g(a.BaseSpinner,{key:0}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const be=$(fe,[["render",ce],["__file","use-pagefecth.vue"]]);export{be as default};
