import{d as p,r as c,T as b,bT as y,b1 as I,bU as C,_ as x,B as d,C as f,E as u,I as v,F as _,bx as B,ap as m,ae as g,N as w,O as k,ak as z}from"./index-DzrxKNnn.js";import{F as U}from"./FileManagerService-B_drXciZ.js";const A=p({__name:"AppImage",props:{src:{},fetch:{type:Boolean,default:!1},imageBg:{type:Boolean,default:!1},placHolder:{},spinnerColor:{default:"white"},alt:{default:"img"},ratio:{default:()=>4/3},fit:{default:"cover"}},setup(a,{expose:o}){o();const{fethCdnData:e}=U(),r=c(!0),t=c(),l=c(!1);b(async()=>{await n()}),y(()=>{l.value&&n()});const n=async()=>{if(!a.src){r.value=!1;return}a.fetch?e(a.src).then(i=>{s(),i&&(t.value=i)}).catch(i=>{s()}):(t.value=a.src,s())},s=()=>{r.value=!1,l.value||(l.value=!0)};I(()=>{t.value=void 0});const h={fethCdnData:e,loading:r,srcUrl:t,firstLoaded:l,onFetchImage:n,clearLoading:s,get biCardImage(){return C}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),F={class:"absolute-full flex flex-center"},N={class:"absolute-full flex flex-center bg-primary text-white"};function S(a,o,e,r,t,l){return r.loading?(d(),f(g,m({key:0,"spinner-color":e.spinnerColor,"placeholder-src":e.placHolder,ratio:e.ratio},a.$attrs,{loading:"lazy"}),{default:u(()=>[v("div",F,[_(B,{showing:"",color:"white",size:"xs"})])]),_:1},16,["spinner-color","placeholder-src","ratio"])):r.srcUrl?(d(),f(g,m({key:1,src:r.srcUrl,fit:e.fit,"placeholder-src":e.placHolder,"spinner-color":e.spinnerColor,ratio:e.ratio},a.$attrs,{loading:"lazy",class:{"img-bg":e.imageBg},alt:e.alt}),{error:u(()=>[v("div",N,[_(w,{name:r.biCardImage,class:"q-mr-sm",size:"md"},null,8,["name"]),o[0]||(o[0]=k(" Cannot load image "))])]),default:u(()=>[z(a.$slots,"default",{},void 0,!0)]),_:3},16,["src","fit","placeholder-src","spinner-color","ratio","class","alt"])):(d(),f(g,m({key:2,ratio:e.ratio},a.$attrs,{loading:"lazy",src:"/images/no_picture_thumb.jpg"}),null,16,["ratio"]))}const Q=x(A,[["render",S],["__scopeId","data-v-a1041af2"],["__file","AppImage.vue"]]);export{Q as A};
