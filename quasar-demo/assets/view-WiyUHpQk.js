const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChangePasswordForm-Cmnmupws.js","assets/index-DzrxKNnn.js","assets/index-BqtQn6ht.css","assets/QBar-NpiT9Tei.js","assets/useValidation-DPCTsogT.js","assets/UserService-Q1yo_jj5.js","assets/useAxios-iI_x9o6-.js","assets/AppResult-BzzMlWu3.js","assets/Togle-DHWQggxd.js"])))=>i.map(i=>d[i]);
import{s as me,t as ue,x as _e,f as S,h as V,y as F,z as fe,d as ye,bv as ve,a as be,u as Ae,r as g,T as he,a4 as ge,bE as Ce,ba as ke,aG as pe,aH as we,bq as Be,a2 as Ve,cs as Re,Y as I,Z as x,_ as Pe,B as r,C as f,E as n,L as qe,F as l,I as d,H as C,ad as Fe,ah as k,$ as R,N as u,aK as Ie,R as v,af as G,aa as xe,O as p,M as z,aJ as K,ag as Se,am as M,b8 as X,aW as j,aq as H,ab as J,ac as w,aV as W,ai as Y,bF as Z}from"./index-DzrxKNnn.js";import{u as Ee,C as De}from"./CrudApiForm-D1p8GXjv.js";import{u as Te}from"./useAppMeta-iLytvd9M.js";import{u as Qe}from"./useValidation-DPCTsogT.js";import{u as Le}from"./useAxios-iI_x9o6-.js";import"./Button-BycsPVDh.js";import"./use-meta-AT2aoAx3.js";const Oe=me({name:"QBanner",props:{...ue,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(t,{slots:o}){const{proxy:{$q:b}}=fe(),e=_e(t,b),A=S(()=>"q-banner row items-center"+(t.dense===!0?" q-banner--dense":"")+(e.value===!0?" q-banner--dark q-dark":"")+(t.rounded===!0?" rounded-borders":"")),h=S(()=>`q-banner__actions row items-center justify-end col-${t.inlineActions===!0?"auto":"all"}`);return()=>{const a=[V("div",{class:"q-banner__avatar col-auto row items-center self-start"},F(o.avatar)),V("div",{class:"q-banner__content col text-body2"},F(o.default))],i=F(o.action);return i!==void 0&&a.push(V("div",{class:h.value},i)),V("div",{class:A.value+(t.inlineActions===!1&&i!==void 0?" q-banner--top-padding":""),role:"alert"},a)}}}),Ne=()=>{const{callAxios:t}=Le();return{findAllBackendRole:async()=>await t({API:"/api/role/findAllBackend",method:"GET"}),findAllSystemFrontend:async()=>await t({API:"/api/role/findAllSystemFrontend",method:"GET"}),findAllByCompanyAndFrontend:async a=>await t({API:`/api/role/findAllByCompanyAndFrontend?companyId=${a}`,method:"GET"}),findAllRoleByCompany:async()=>await t({API:"/api/role/findAllByCompany",method:"GET"}),findAllByAuthAndFrontend:async()=>await t({API:"/api/role/findAllByAuthAndFrontend",method:"GET"})}},Ue=ye({__name:"view",setup(t,{expose:o}){o();const b=I(()=>x(()=>import("./ChangePasswordForm-Cmnmupws.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),e=I(()=>x(()=>import("./AppResult-BzzMlWu3.js"),__vite__mapDeps([7,1,2]))),A=I(()=>x(()=>import("./Togle-DHWQggxd.js"),__vite__mapDeps([8,1,2]))),{dark:h}=ve(),{t:a}=be(),{required:i,requireEmail:B,requireUsername:$}=Qe(),{appLoading:P}=Ae(),{findAllBackendRole:E}=Ne(),y=g([]),q=g(""),D=g(!1),{crudAction:T,onBack:ee,loading:le,onSubmit:ae,crudEntity:c,onDelete:ne,preFectData:Q,crudName:oe,crudId:te}=Ee({crudName:"user",apiEndpoint:"/api",fectchDataOnLoad:!1,backToPreviousPath:!0},{id:null,email:"",username:null,active:!0,password:null,userData:null,selectedRoles:[]}),L=g(c.value);P(),Te({additionalTitle:a("crudAction."+T.value)}),he(()=>{O()});const O=async()=>{y.value=await E(),await Q(),L.value=c.value,P(!1)},re=S(()=>{const m=y.value,s=q.value?q.value.toLowerCase().trim():null;return s?m.filter(_=>_.name&&_.name.toString().toLowerCase().includes(s)):m}),de=m=>{const s=y.value.find(_=>_.id===m);return s&&s.name?s.name:"unknown"},ie=m=>{c.value&&c.value.selectedRoles&&c.value.selectedRoles.splice(m,1)},se=()=>{N(D.value)},N=m=>{if(c.value.selectedRoles=[],m)for(let s=0;s<y.value.length;s++){const _=y.value[s];_&&c.value.selectedRoles.push(_.id)}},ce=g(!1),U={ChangePasswordForm:b,AppResult:e,FormTogle:A,dark:h,t:a,required:i,requireEmail:B,requireUsername:$,appLoading:P,findAllBackendRole:E,roles:y,filterText:q,selectedAll:D,crudAction:T,onBack:ee,loading:le,onSubmit:ae,crudEntity:c,onDelete:ne,preFectData:Q,crudName:oe,crudId:te,entity:L,onLoadData:O,filteredList:re,findDisplayRoleById:de,removeRole:ie,onCheckedAll:se,updateSelectedAll:N,showChangePasswordForm:ce,CrudApiForm:De,get biPerson(){return ge},get biSearch(){return Ce},get biEnvelope(){return ke},get biCheck(){return pe},get biX(){return we},get biKey(){return Be},get biPeople(){return Ve},get biInfoCircle(){return Re}};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}}),Ge={class:"row"},ze={key:0,class:"col-12 q-pa-md text-center"},Ke=["src"],Me={class:"col-12 col-md-6 q-pa-md"},Xe={class:"col-12 col-md-6 q-pa-md"},je={key:1,class:"col-12 col-md-6 q-pa-md"},He={key:2,class:"col-12 col-md-6 q-pa-md"},Je={class:"col-12 col-md-6 q-pa-md"},We={class:"row"},Ye={class:"col-12 col-md-6"},Ze={class:"q-px-md"},$e={class:"col-12 col-md-6"},el={class:"q-px-md"};function ll(t,o,b,e,A,h){return r(),f(qe,{padding:""},{default:n(()=>[l(e.CrudApiForm,{icon:e.biPerson,title:e.t("model_user"),"crud-action":e.crudAction,"crud-name":e.crudName,loading:e.loading,onOnBack:e.onBack,onOnSubmit:e.onSubmit,onOnDelete:e.onDelete},{crudFromContent:n(()=>[d("div",Ge,[e.entity.avatar?(r(),C("div",ze,[l(Fe,{size:"125px",class:"shadow-5"},{default:n(()=>[d("img",{src:e.entity.avatar.thumbnail,all:"user_img"},null,8,Ke)]),_:1})])):k("",!0),d("div",Me,[l(R,{readonly:e.loading,outlined:"",counter:"",maxlength:"100",modelValue:e.entity.email,"onUpdate:modelValue":o[0]||(o[0]=a=>e.entity.email=a),label:e.t("model_user_email"),rules:[e.required,e.requireEmail]},{prepend:n(()=>[l(u,{name:e.biEnvelope},null,8,["name"])]),_:1},8,["readonly","modelValue","label","rules"])]),d("div",Xe,[l(R,{readonly:e.loading,outlined:"",counter:"",maxlength:"20",modelValue:e.entity.username,"onUpdate:modelValue":o[1]||(o[1]=a=>e.entity.username=a),label:e.t("model_user_username"),rules:[e.requireUsername]},{prepend:n(()=>[l(u,{name:e.biPerson},null,8,["name"])]),_:1},8,["readonly","modelValue","label","rules"]),l(Oe,{class:Ie(["q-my-sm",e.dark.isActive?"bg-grey-9":"bg-grey-3"]),dense:""},{avatar:n(()=>[l(u,{name:e.biInfoCircle,color:"primary"},null,8,["name"])]),default:n(()=>[d("p",null,v(`${e.t("helper.username1")}, ${e.t("helper.username2")}, ${e.t("helper.username3")}, ${e.t("helper.username4")}, ${e.t("helper.username5")}`),1)]),_:1},8,["class"])]),e.crudAction!="view"?(r(),C("div",je,[l(R,{readonly:e.loading,outlined:"",type:"password",modelValue:e.entity.password,"onUpdate:modelValue":o[2]||(o[2]=a=>e.entity.password=a),label:e.t("model_user_login_password"),rules:[e.required]},{prepend:n(()=>[l(u,{name:e.biKey},null,8,["name"])]),_:1},8,["readonly","modelValue","label","rules"])])):k("",!0),e.crudAction=="view"?(r(),C("div",He,[l(G,{onClick:o[3]||(o[3]=a=>e.showChangePasswordForm=!0),flat:"",color:"primary",icon:e.biKey,label:e.t("base.changePassword")},null,8,["icon","label"])])):k("",!0),d("div",Je,[l(e.FormTogle,{label:e.t("base.enable"),modelValue:e.entity.active,"onUpdate:modelValue":o[4]||(o[4]=a=>e.entity.active=a)},null,8,["label","modelValue"])])]),l(xe),d("div",We,[d("div",Ye,[d("div",Ze,[l(u,{name:e.biPeople,size:"sm"},null,8,["name"]),p(" "+v(e.t("model_role")),1)]),l(z,null,{default:n(()=>[l(R,{rounded:"",filled:"",outlined:"",modelValue:e.filterText,"onUpdate:modelValue":o[6]||(o[6]=a=>e.filterText=a),label:e.t("base.search")},{prepend:n(()=>[l(K,{modelValue:e.selectedAll,"onUpdate:modelValue":o[5]||(o[5]=a=>e.selectedAll=a),onClick:e.onCheckedAll},{default:n(()=>[l(Se,null,{default:n(()=>[p(v(e.selectedAll?e.t("base.deselectAll"):e.t("base.selectAll")),1)]),_:1})]),_:1},8,["modelValue"])]),append:n(()=>[l(u,{name:e.biSearch},null,8,["name"])]),_:1},8,["modelValue","label"]),l(M,{style:{height:"250px"}},{default:n(()=>[e.filteredList.length>0?(r(),f(X,{key:0,dense:""},{default:n(()=>[(r(!0),C(Y,null,j(e.filteredList,(a,i)=>H((r(),f(J,{key:i,tag:"label"},{default:n(()=>[l(w,{avatar:""},{default:n(()=>[l(K,{modelValue:e.entity.selectedRoles,"onUpdate:modelValue":o[7]||(o[7]=B=>e.entity.selectedRoles=B),val:a.id},null,8,["modelValue","val"])]),_:2},1024),l(w,null,{default:n(()=>[l(W,null,{default:n(()=>[p(v(a.name?a.name:"unknown"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[Z]])),128))]),_:1})):k("",!0)]),_:1})]),_:1})]),d("div",$e,[d("div",el,[l(u,{color:"positive",name:e.biCheck,size:"sm"},null,8,["name"]),p(" "+v(e.t("userRoleSelected")),1)]),e.entity.selectedRoles?(r(),f(z,{key:0},{default:n(()=>[l(M,{style:{height:"250px"}},{default:n(()=>[e.entity.selectedRoles.length>0?(r(),f(X,{key:0,dense:""},{default:n(()=>[(r(!0),C(Y,null,j(e.entity.selectedRoles,(a,i)=>H((r(),f(J,{key:i},{default:n(()=>[l(w,{avatar:""},{default:n(()=>[l(u,{color:"primary",name:e.biCheck},null,8,["name"])]),_:1}),l(w,null,{default:n(()=>[l(W,null,{default:n(()=>[p(v(e.findDisplayRoleById(a)),1)]),_:2},1024)]),_:2},1024),l(w,{side:""},{default:n(()=>[l(G,{flat:"",round:"",color:"negative",onClick:B=>e.removeRole(i),icon:e.biX},null,8,["onClick","icon"])]),_:2},1024)]),_:2},1024)),[[Z]])),128))]),_:1})):(r(),f(e.AppResult,{key:1,status:"empty",description:e.t("userRoleNotFound")},null,8,["description"]))]),_:1})]),_:1})):k("",!0)])])]),_:1},8,["icon","title","crud-action","crud-name","loading","onOnBack","onOnSubmit","onOnDelete"]),l(e.ChangePasswordForm,{dialog:e.showChangePasswordForm,"user-id":e.crudId,onOnClose:o[8]||(o[8]=a=>e.showChangePasswordForm=!1)},null,8,["dialog","user-id"])]),_:1})}const sl=Pe(Ue,[["render",ll],["__file","view.vue"]]);export{sl as default};
